[{"content":"\n","date":"2024-10-12T00:00:00Z","image":"https://gkxgithub.github.io/p/%E7%BE%8E/8e071cae5ea4815582903fccfc46a39_hu5531098368616869691.jpg","permalink":"https://gkxgithub.github.io/p/%E7%BE%8E/","title":"ç¾"},{"content":"æ­£æ–‡æµ‹è¯• è€Œè¿™äº›å¹¶ä¸æ˜¯å®Œå…¨é‡è¦ï¼Œæ›´åŠ é‡è¦çš„é—®é¢˜æ˜¯ï¼Œ å¸¦ç€è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¥å®¡è§†ä¸€ä¸‹å­¦ç”Ÿä¼šé€€ä¼šã€‚ æ—¢ç„¶å¦‚ä½•ï¼Œ å¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œå­¦ç”Ÿä¼šé€€ä¼šä¸ä»…ä»…æ˜¯ä¸€ä¸ªé‡å¤§çš„äº‹ä»¶ï¼Œè¿˜å¯èƒ½ä¼šæ”¹å˜æˆ‘çš„äººç”Ÿã€‚ æˆ‘ä»¬ä¸å¾—ä¸é¢å¯¹ä¸€ä¸ªéå¸¸å°´å°¬çš„äº‹å®ï¼Œé‚£å°±æ˜¯ï¼Œ å¯æ˜¯ï¼Œå³ä½¿æ˜¯è¿™æ ·ï¼Œå­¦ç”Ÿä¼šé€€ä¼šçš„å‡ºç°ä»ç„¶ä»£è¡¨äº†ä¸€å®šçš„æ„ä¹‰ã€‚ å­¦ç”Ÿä¼šé€€ä¼šï¼Œå‘ç”Ÿäº†ä¼šå¦‚ä½•ï¼Œä¸å‘ç”Ÿåˆä¼šå¦‚ä½•ã€‚ ç»è¿‡ä¸Šè¿°è®¨è®ºï¼Œ ç”Ÿæ´»ä¸­ï¼Œè‹¥å­¦ç”Ÿä¼šé€€ä¼šå‡ºç°äº†ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸è€ƒè™‘å®ƒå‡ºç°äº†çš„äº‹å®ã€‚ å­¦ç”Ÿä¼šé€€ä¼šï¼Œåˆ°åº•åº”è¯¥å¦‚ä½•å®ç°ã€‚ è¿™æ ·çœ‹æ¥ï¼Œ åœ¨è¿™ç§å›°éš¾çš„æŠ‰æ‹©ä¸‹ï¼Œæœ¬äººæ€æ¥æƒ³å»ï¼Œå¯é£Ÿéš¾å®‰ã€‚ å¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œå­¦ç”Ÿä¼šé€€ä¼šä¸ä»…ä»…æ˜¯ä¸€ä¸ªé‡å¤§çš„äº‹ä»¶ï¼Œè¿˜å¯èƒ½ä¼šæ”¹å˜æˆ‘çš„äººç”Ÿã€‚ å°±æˆ‘ä¸ªäººæ¥è¯´ï¼Œå­¦ç”Ÿä¼šé€€ä¼šå¯¹æˆ‘çš„æ„ä¹‰ï¼Œä¸èƒ½ä¸è¯´éå¸¸é‡å¤§ã€‚ èå£«æ¯”äºšæ›¾ç»æåˆ°è¿‡ï¼Œäººçš„ä¸€ç”Ÿæ˜¯çŸ­çš„ï¼Œä½†å¦‚æœå‘åŠ£åœ°è¿‡è¿™ä¸€ç”Ÿï¼Œå°±å¤ªé•¿äº†ã€‚è¿™ä¼¼ä¹è§£ç­”äº†æˆ‘çš„ç–‘æƒ‘ã€‚ è«æ‰ç‰¹è¯´è¿‡ä¸€å¥å¯Œæœ‰å“²ç†çš„è¯ï¼Œè°å’Œæˆ‘ä¸€æ ·ç”¨åŠŸï¼Œè°å°±ä¼šå’Œæˆ‘ä¸€æ ·æˆåŠŸã€‚è¿™å¯å‘äº†æˆ‘ï¼Œ å¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œå­¦ç”Ÿä¼šé€€ä¼šä¸ä»…ä»…æ˜¯ä¸€ä¸ªé‡å¤§çš„äº‹ä»¶ï¼Œè¿˜å¯èƒ½ä¼šæ”¹å˜æˆ‘çš„äººç”Ÿã€‚ å­¦ç”Ÿä¼šé€€ä¼šï¼Œåˆ°åº•åº”è¯¥å¦‚ä½•å®ç°ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œ ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œ è¿™ç§äº‹å®å¯¹æœ¬äººæ¥è¯´æ„ä¹‰é‡å¤§ï¼Œç›¸ä¿¡å¯¹è¿™ä¸ªä¸–ç•Œä¹Ÿæ˜¯æœ‰ä¸€å®šæ„ä¹‰çš„ã€‚ åœ¨è¿™ç§å›°éš¾çš„æŠ‰æ‹©ä¸‹ï¼Œæœ¬äººæ€æ¥æƒ³å»ï¼Œå¯é£Ÿéš¾å®‰ã€‚ äº†è§£æ¸…æ¥šå­¦ç”Ÿä¼šé€€ä¼šåˆ°åº•æ˜¯ä¸€ç§æ€ä¹ˆæ ·çš„å­˜åœ¨ï¼Œæ˜¯è§£å†³ä¸€åˆ‡é—®é¢˜çš„å…³é”®ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œ ç”Ÿæ´»ä¸­ï¼Œè‹¥å­¦ç”Ÿä¼šé€€ä¼šå‡ºç°äº†ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸è€ƒè™‘å®ƒå‡ºç°äº†çš„äº‹å®ã€‚ é—®é¢˜çš„å…³é”®ç©¶ç«Ÿä¸ºä½•ï¼Ÿ è€Œè¿™äº›å¹¶ä¸æ˜¯å®Œå…¨é‡è¦ï¼Œæ›´åŠ é‡è¦çš„é—®é¢˜æ˜¯ã€‚\nå¥¥æ–¯ç‰¹æ´›å¤«æ–¯åŸºæ›¾ç»è¯´è¿‡ï¼Œå…±åŒçš„äº‹ä¸šï¼Œå…±åŒçš„æ–—äº‰ï¼Œå¯ä»¥ä½¿äººä»¬äº§ç”Ÿå¿å—ä¸€åˆ‡çš„åŠ›é‡ã€‚ã€€å¸¦ç€è¿™å¥è¯ï¼Œæˆ‘ä»¬è¿˜è¦æ›´åŠ æ…é‡çš„å®¡è§†è¿™ä¸ªé—®é¢˜ï¼š ä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»åŠ¡å¿…æ…é‡çš„è€ƒè™‘è€ƒè™‘ã€‚ æ—¢ç„¶å¦‚æ­¤ï¼Œ è¿™ç§äº‹å®å¯¹æœ¬äººæ¥è¯´æ„ä¹‰é‡å¤§ï¼Œç›¸ä¿¡å¯¹è¿™ä¸ªä¸–ç•Œä¹Ÿæ˜¯æœ‰ä¸€å®šæ„ä¹‰çš„ã€‚ å¸¦ç€è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¥å®¡è§†ä¸€ä¸‹å­¦ç”Ÿä¼šé€€ä¼šã€‚ æˆ‘è®¤ä¸ºï¼Œ æˆ‘è®¤ä¸ºï¼Œ åœ¨è¿™ç§å›°éš¾çš„æŠ‰æ‹©ä¸‹ï¼Œæœ¬äººæ€æ¥æƒ³å»ï¼Œå¯é£Ÿéš¾å®‰ã€‚ é—®é¢˜çš„å…³é”®ç©¶ç«Ÿä¸ºä½•ï¼Ÿ æ¯ä¸ªäººéƒ½ä¸å¾—ä¸é¢å¯¹è¿™äº›é—®é¢˜ã€‚ åœ¨é¢å¯¹è¿™ç§é—®é¢˜æ—¶ï¼Œ è¦æƒ³æ¸…æ¥šï¼Œå­¦ç”Ÿä¼šé€€ä¼šï¼Œåˆ°åº•æ˜¯ä¸€ç§æ€ä¹ˆæ ·çš„å­˜åœ¨ã€‚ æˆ‘è®¤ä¸ºï¼Œ æ—¢ç„¶å¦‚æ­¤ï¼Œ æ¯ä¸ªäººéƒ½ä¸å¾—ä¸é¢å¯¹è¿™äº›é—®é¢˜ã€‚ åœ¨é¢å¯¹è¿™ç§é—®é¢˜æ—¶ï¼Œ é‚£ä¹ˆï¼Œ æˆ‘è®¤ä¸ºï¼Œ å­¦ç”Ÿä¼šé€€ä¼šå› ä½•è€Œå‘ç”Ÿã€‚\nå¼•ç”¨ æ€å¿µæ˜¯æœ€æš–çš„å¿§ä¼¤åƒä¸€åŒç¿…è†€\nè®©æˆ‘åœä¸äº†é£ä¸è¿œåœ¨è¿‡å¾€æ¸¸è¡\nä¸å‘Šè€Œåˆ«çš„ä½  å°±ç®—ä¸ºäº†æˆ‘ç€æƒ³\nè¿™ä¹ˆæ²‰ç—›çš„å‘µæŠ¤ æˆ‘æ€ä¹ˆèƒ½ç¿±ç¿”\næœ€æš–çš„æ†‚å‚· - ç”°é¦¥ç”„\nå›¾ç‰‡ 1 2 3 ![Photo by Florian Klauer on Unsplash](florian-klauer-nptLmg6jqDo-unsplash.jpg) ![Photo by Luca Bravo on Unsplash](luca-bravo-alS7ewQ41M8-unsplash.jpg) ![Photo by Helena Hertz on Unsplash](helena-hertz-wWZzXlDpMog-unsplash.jpg) ![Photo by Hudai Gayiran on Unsplash](hudai-gayiran-3Od_VKcDEAA-unsplash.jpg) ç›¸å†Œè¯­æ³•æ¥è‡ª Typlog\n","date":"2020-09-09T00:00:00Z","image":"https://gkxgithub.github.io/p/test-chinese/helena-hertz-wWZzXlDpMog-unsplash_hu4699868770670889127.jpg","permalink":"https://gkxgithub.github.io/p/test-chinese/","title":"Chinese Test"},{"content":"This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.\nHeadings The following HTML \u0026lt;h1\u0026gt;â€”\u0026lt;h6\u0026gt; elements represent six levels of section headings. \u0026lt;h1\u0026gt; is the highest section level while \u0026lt;h6\u0026gt; is the lowest.\nH1 H2 H3 H4 H5 H6 Paragraph Xerum, quo qui aut unt expliquam qui dolut labo. Aque venitatiusda cum, voluptionse latur sitiae dolessi aut parist aut dollo enim qui voluptate ma dolestendit peritin re plis aut quas inctum laceat est volestemque commosa as cus endigna tectur, offic to cor sequas etum rerum idem sintibus eiur? Quianimin porecus evelectur, cum que nis nust voloribus ratem aut omnimi, sitatur? Quiatem. Nam, omnis sum am facea corem alique molestrunt et eos evelece arcillit ut aut eos eos nus, sin conecerem erum fuga. Ri oditatquam, ad quibus unda veliamenimin cusam et facea ipsamus es exerum sitate dolores editium rerore eost, temped molorro ratiae volorro te reribus dolorer sperchicium faceata tiustia prat.\nItatur? Quiatae cullecum rem ent aut odis in re eossequodi nonsequ idebis ne sapicia is sinveli squiatum, core et que aut hariosam ex eat.\nBlockquotes The blockquote element represents content that is quoted from another source, optionally with a citation which must be within a footer or cite element, and optionally with in-line changes such as annotations and abbreviations.\nBlockquote without attribution Tiam, ad mint andaepu dandae nostion secatur sequo quae. Note that you can use Markdown syntax within a blockquote.\nBlockquote with attribution Don\u0026rsquo;t communicate by sharing memory, share memory by communicating.\nâ€” Rob Pike1\nTables Tables aren\u0026rsquo;t part of the core Markdown spec, but Hugo supports supports them out-of-the-box.\nName Age Bob 27 Alice 23 Inline Markdown within tables Italics Bold Code italics bold code A B C D E F Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ultricies, sapien non euismod aliquam, dui ligula tincidunt odio, at accumsan nulla sapien eget ex. Proin eleifend dictum ipsum, non euismod ipsum pulvinar et. Vivamus sollicitudin, quam in pulvinar aliquam, metus elit pretium purus Proin sit amet velit nec enim imperdiet vehicula. Ut bibendum vestibulum quam, eu egestas turpis gravida nec Sed scelerisque nec turpis vel viverra. Vivamus vitae pretium sapien Code Blocks Code block with backticks 1 2 3 4 5 6 7 8 9 10 \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Code block indented with four spaces \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026quot;en\u0026quot;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026quot;utf-8\u0026quot;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Code block with Hugo\u0026rsquo;s internal highlight shortcode 1 2 3 4 5 6 7 8 9 10 \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Diff code block 1 2 3 4 5 [dependencies.bevy] git = \u0026#34;https://github.com/bevyengine/bevy\u0026#34; rev = \u0026#34;11f52b8c72fc3a568e8bb4a4cd1f3eb025ac2e13\u0026#34; - features = [\u0026#34;dynamic\u0026#34;] + features = [\u0026#34;jpeg\u0026#34;, \u0026#34;dynamic\u0026#34;] List Types Ordered List First item Second item Third item Unordered List List item Another item And another item Nested list Fruit Apple Orange Banana Dairy Milk Cheese Other Elements â€” abbr, sub, sup, kbd, mark GIF is a bitmap image format.\nH2O\nXn + Yn = Zn\nPress CTRL + ALT + Delete to end the session.\nMost salamanders are nocturnal, and hunt for insects, worms, and other small creatures.\nHyperlinked image The above quote is excerpted from Rob Pike\u0026rsquo;s talk during Gopherfest, November 18, 2015.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2019-03-11T00:00:00Z","image":"https://gkxgithub.github.io/p/markdown-syntax-guide/pawel-czerwinski-8uZPynIu-rQ-unsplash_hu6307248181568134095.jpg","permalink":"https://gkxgithub.github.io/p/markdown-syntax-guide/","title":"Markdown Syntax Guide"},{"content":"Lorem est tota propiore conpellat pectoribus de pectora summo.\nRedit teque digerit hominumque toris verebor lumina non cervice subde tollit usus habet Arctonque, furores quas nec ferunt. Quoque montibus nunc caluere tempus inhospita parcite confusaque translucet patri vestro qui optatis lumine cognoscere flos nubis! Fronde ipsamque patulos Dryopen deorum.\nExierant elisi ambit vivere dedere Duce pollice Eris modo Spargitque ferrea quos palude Rursus nulli murmur; hastile inridet ut ab gravi sententia! Nomine potitus silentia flumen, sustinet placuit petis in dilapsa erat sunt. Atria tractus malis.\nComas hunc haec pietate fetum procerum dixit Post torum vates letum Tiresia Flumen querellas Arcanaque montibus omnes Quidem et Vagus elidunt The Van de Graaf Canon\nMane refeci capiebant unda mulcebat Victa caducifer, malo vulnere contra dicere aurato, ludit regale, voca! Retorsit colit est profanae esse virescere furit nec; iaculi matertera et visa est, viribus. Divesque creatis, tecta novat collumque vulnus est, parvas. Faces illo pepulere tempus adest. Tendit flamma, ab opes virum sustinet, sidus sequendo urbis.\nIubar proles corpore raptos vero auctor imperium; sed et huic: manus caeli Lelegas tu lux. Verbis obstitit intus oblectamina fixis linguisque ausus sperare Echionides cornuaque tenent clausit possit. Omnia putatur. Praeteritae refert ausus; ferebant e primus lora nutat, vici quae mea ipse. Et iter nil spectatae vulnus haerentia iuste et exercebat, sui et.\nEurytus Hector, materna ipsumque ut Politen, nec, nate, ignari, vernum cohaesit sequitur. Vel mitis temploque vocatus, inque alis, oculos nomen non silvis corpore coniunx ne displicet illa. Crescunt non unus, vidit visa quantum inmiti flumina mortis facto sic: undique a alios vincula sunt iactata abdita! Suspenderat ego fuit tendit: luna, ante urbem Propoetides parte.\n","date":"2019-03-09T00:00:00Z","image":"https://gkxgithub.github.io/p/placeholder-text/matt-le-SJSpo9hQf7s-unsplash_hu10664154974910995856.jpg","permalink":"https://gkxgithub.github.io/p/placeholder-text/","title":"Placeholder Text"},{"content":"Mathematical notation in a Hugo project can be enabled by using third party JavaScript libraries.\nIn this example we will be using KaTeX\nCreate a partial under /layouts/partials/math.html Within this partial reference the Auto-render Extension or host these scripts locally. Include the partial in your templates like so: 1 2 3 {{ if or .Params.math .Site.Params.math }} {{ partial \u0026#34;math.html\u0026#34; . }} {{ end }} To enable KaTeX globally set the parameter math to true in a project\u0026rsquo;s configuration To enable KaTeX on a per page basis include the parameter math: true in content files Note: Use the online reference of Supported TeX Functions\nExamples Inline math: $\\varphi = \\dfrac{1+\\sqrt5}{2}= 1.6180339887â€¦$\nBlock math: $$ \\varphi = 1+\\frac{1} {1+\\frac{1} {1+\\frac{1} {1+\\cdots} } } $$\n","date":"2019-03-08T00:00:00Z","permalink":"https://gkxgithub.github.io/p/math-typesetting/","title":"Math Typesetting"},{"content":"Emoji can be enabled in a Hugo project in a number of ways.\nThe emojify function can be called directly in templates or Inline Shortcodes.\nTo enable emoji globally, set enableEmoji to true in your site\u0026rsquo;s configuration and then you can type emoji shorthand codes directly in content files; e.g.\nğŸ™ˆ :see_no_evil: ğŸ™‰ :hear_no_evil: ğŸ™Š :speak_no_evil:\nThe Emoji cheat sheet is a useful reference for emoji shorthand codes.\nN.B. The above steps enable Unicode Standard emoji characters and sequences in Hugo, however the rendering of these glyphs depends on the browser and the platform. To style the emoji you can either use a third party emoji font or a font stack; e.g.\n1 2 3 .emoji { font-family: Apple Color Emoji, Segoe UI Emoji, NotoColorEmoji, Segoe UI Symbol, Android Emoji, EmojiSymbols; } ","date":"2019-03-05T00:00:00Z","image":"https://gkxgithub.github.io/p/emoji-support/the-creative-exchange-d2zvqp3fpro-unsplash_hu5876398126655421130.jpg","permalink":"https://gkxgithub.github.io/p/emoji-support/","title":"Emoji Support"},{"content":"pom.xmæ–‡ä»¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;project xmlns=\u0026#34;http://maven.apache.org/POM/4.0.0\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\u0026#34;\u0026gt; \u0026lt;modelVersion\u0026gt;4.0.0\u0026lt;/modelVersion\u0026gt; \u0026lt;parent\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-parent\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.4.5\u0026lt;/version\u0026gt; \u0026lt;relativePath/\u0026gt; \u0026lt;!-- lookup parent from repository --\u0026gt; \u0026lt;/parent\u0026gt; \u0026lt;groupId\u0026gt;com.itheima\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;reggie_take_out\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.0-SNAPSHOT\u0026lt;/version\u0026gt; \u0026lt;properties\u0026gt; \u0026lt;java.version\u0026gt;1.8\u0026lt;/java.version\u0026gt; \u0026lt;/properties\u0026gt; \u0026lt;dependencies\u0026gt; \u0026lt;!--é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡--\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.aliyun\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;aliyun-java-sdk-core\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.5.16\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.aliyun\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;aliyun-java-sdk-dysmsapi\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.1.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-test\u0026lt;/artifactId\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;scope\u0026gt;compile\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.baomidou\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mybatis-plus-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.4.2\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.18.20\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;fastjson\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.2.76\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;commons-lang\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;commons-lang\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.6\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt; \u0026lt;scope\u0026gt;runtime\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;druid-spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.1.23\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; \u0026lt;build\u0026gt; \u0026lt;plugins\u0026gt; \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-maven-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.4.5\u0026lt;/version\u0026gt; \u0026lt;/plugin\u0026gt; \u0026lt;/plugins\u0026gt; \u0026lt;/build\u0026gt; \u0026lt;/project\u0026gt; ymlæ–‡ä»¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 server: port: 8080 spring: application: # åº”ç”¨çš„åç§°ï¼Œå¯é€‰ name: reggie_take_out datasource: druid: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/reggie?serverTimezone=Asia/Shanghai\u0026amp;useUnicode=true\u0026amp;characterEncoding=utf-8\u0026amp;zeroDateTimeBehavior=convertToNull\u0026amp;useSSL=false\u0026amp;allowPublicKeyRetrieval=true username: root password: 123456 mybatis-plus: configuration: #åœ¨æ˜ å°„å®ä½“æˆ–è€…å±æ€§æ—¶ï¼Œå°†æ•°æ®åº“ä¸­è¡¨åå’Œå­—æ®µåä¸­çš„ä¸‹åˆ’çº¿å»æ‰ï¼ŒæŒ‰ç…§é©¼å³°å‘½åæ³•æ˜ å°„ map-underscore-to-camel-case: true log-impl: org.apache.ibatis.logging.stdout.StdOutImpl global-config: db-config: id-type: ASSIGN_ID reggie: path: D:\\ å°±é…ç½®äº†ä¸ªç«¯å£ï¼Œè¿æ¥æ± ï¼Œmybatisp\nå¯åŠ¨ç±» 1 2 3 4 5 6 7 8 9 10 @Slf4j @SpringBootApplication @ServletComponentScan @EnableTransactionManagement public class ReggieApplication { public static void main(String[] args) { SpringApplication.run(ReggieApplication.class,args); log.info(\u0026#34;é¡¹ç›®å¯åŠ¨æˆåŠŸ...\u0026#34;); } } @ServletComponentScan @ServletComponentScan æ˜¯ Spring Framework æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œå®ƒç”¨äºåœ¨ Spring Boot åº”ç”¨ä¸­è‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œ Servletã€Filter å’Œ Listener ç»„ä»¶ã€‚è¿™ä¸ªæ³¨è§£å¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„åœ¨ web.xml æ–‡ä»¶ä¸­é…ç½® Servletã€Filter å’Œ Listener çš„æ–¹å¼ï¼Œä½¿å¾—é…ç½®æ›´åŠ ç®€æ´å’Œçµæ´»ã€‚\nä½œç”¨\nåœ¨ Spring Boot åº”ç”¨çš„å¯åŠ¨ç±»ï¼ˆé€šå¸¸æ˜¯å¸¦æœ‰ @SpringBootApplication æ³¨è§£çš„ç±»ï¼‰ä¸Šä½¿ç”¨ @ServletComponentScan æ³¨è§£åï¼ŒSpring Boot ä¼šåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œæ‰€æœ‰å¸¦æœ‰ @WebServletï¼ˆæ§åˆ¶å™¨ï¼‰ã€@WebFilterï¼ˆè¿‡æ»¤å™¨ï¼‰ã€@WebListenerï¼ˆç›‘å¬å™¨ï¼‰æ³¨è§£çš„ç±»ã€‚è¿™äº›ç±»å°†ä½œä¸º Servletã€Filter å’Œ Listener ç»„ä»¶è¢«æ³¨å†Œåˆ° Servlet å®¹å™¨ä¸­ï¼Œä»è€Œæ— éœ€æ‰‹åŠ¨åœ¨ web.xml æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚\nä½¿ç”¨æ–¹å¼\nè¦åœ¨ Spring Boot åº”ç”¨ä¸­ä½¿ç”¨ @ServletComponentScan æ³¨è§£ï¼Œåªéœ€åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ è¯¥æ³¨è§£å³å¯ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 @SpringBootApplication @ServletComponentScan public class MyApplication { public static void main(String[] args) { SpringApplication.run(MyApplication.class, args); } } æ³¨æ„äº‹é¡¹\næ‰«æèŒƒå›´ï¼š@ServletComponentScan é»˜è®¤æ‰«æå¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…ä»¥åŠå­åŒ…ã€‚å¦‚æœéœ€è¦æ‰«æå…¶ä»–åŒ…ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® @ServletComponentScan æ³¨è§£çš„ basePackages æˆ– basePackageClasses å±æ€§æ¥æŒ‡å®šæ‰«æçš„åŒ…ã€‚ ç±»åçº¦å®šï¼šè™½ç„¶ Spring Boot ä¸å¼ºåˆ¶è¦æ±‚ Servletã€Filter å’Œ Listener ç±»çš„å‘½åå¿…é¡»éµå¾ªç‰¹å®šè§„åˆ™ï¼Œä½†æŒ‰ç…§æƒ¯ä¾‹ï¼Œè¿™äº›ç±»çš„åç§°é€šå¸¸ä¼šä»¥ Servletã€Filter æˆ– Listener ç»“å°¾ï¼Œä»¥ä¾¿äºè¯†åˆ«å’ŒåŒºåˆ†ã€‚ ä¾èµ–æ³¨å…¥ï¼šä½¿ç”¨ @WebServletã€@WebFilter å’Œ @WebListener æ³¨è§£çš„ç±»é€šå¸¸ä¸ç”± Spring å®¹å™¨ç®¡ç†ï¼Œå› æ­¤å®ƒä»¬æ— æ³•è‡ªåŠ¨æ³¨å…¥ Spring ç®¡ç†çš„ Beanã€‚å¦‚æœéœ€è¦åœ¨è¿™äº›ç»„ä»¶ä¸­ä½¿ç”¨ Spring çš„ä¾èµ–æ³¨å…¥åŠŸèƒ½ï¼Œå¯èƒ½éœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼ï¼ˆå¦‚ä½¿ç”¨ ServletContextListener æˆ– Spring çš„ ApplicationListenerï¼‰æ¥æ‰‹åŠ¨è®¾ç½®è¿™äº›ä¾èµ–ã€‚ æ€»ç»“\n@ServletComponentScan æ³¨è§£ä¸º Spring Boot åº”ç”¨æä¾›äº†ä¸€ç§ç®€æ´å’Œçµæ´»çš„æ–¹å¼æ¥é…ç½® Servletã€Filter å’Œ Listener ç»„ä»¶ã€‚é€šè¿‡ä½¿ç”¨è¯¥æ³¨è§£ï¼Œå¼€å‘è€…å¯ä»¥é¿å…æ‰‹åŠ¨åœ¨ web.xml æ–‡ä»¶ä¸­è¿›è¡Œç¹ççš„é…ç½®ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡å’Œåº”ç”¨çš„å¯ç»´æŠ¤æ€§ã€‚\n@EnableTransactionManagement æ˜¯ Spring Framework æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºå¯ç”¨å£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚å½“ä½ åœ¨ Spring åº”ç”¨ä¸­ä½¿ç”¨äº†è¿™ä¸ªæ³¨è§£åï¼ŒSpring å®¹å™¨ä¼šå¯»æ‰¾å¸¦æœ‰ @Transactional æ³¨è§£çš„ beanï¼Œå¹¶ä¸ºå®ƒä»¬åˆ›å»ºä»£ç†ï¼Œä»¥ä¾¿åœ¨æ–¹æ³•æ‰§è¡Œæ—¶ç®¡ç†äº‹åŠ¡ã€‚\n@EnableTransactionManagement å¯ç”¨äº‹åŠ¡ç®¡ç†ï¼š@EnableTransactionManagement æ³¨è§£å‘Šè¯‰ Spring å®¹å™¨ï¼Œåº”ç”¨å°†ä½¿ç”¨å£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡åœ¨æ–¹æ³•æˆ–ç±»ä¸Šä½¿ç”¨ @Transactional æ³¨è§£æ¥å£°æ˜äº‹åŠ¡çš„è¾¹ç•Œå’Œè§„åˆ™ã€‚ è‡ªåŠ¨ä»£ç†ï¼šSpring ä¼šè‡ªåŠ¨ä¸ºé‚£äº›å¸¦æœ‰ @Transactional æ³¨è§£çš„ bean åˆ›å»ºä»£ç†ã€‚è¿™äº›ä»£ç†ä¼šåœ¨æ–¹æ³•è°ƒç”¨å‰åæ‰§è¡Œå¿…è¦çš„äº‹åŠ¡ç®¡ç†é€»è¾‘ï¼Œå¦‚å¼€å¯äº‹åŠ¡ã€æäº¤äº‹åŠ¡æˆ–å›æ»šäº‹åŠ¡ã€‚ é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼šè™½ç„¶ @EnableTransactionManagement æœ¬èº«ä¸ç›´æ¥é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼Œä½†å®ƒä¼šè§¦å‘ Spring æŸ¥æ‰¾å¹¶æ³¨å†Œä¸€ä¸ªäº‹åŠ¡ç®¡ç†å™¨ beanã€‚é€šå¸¸ï¼Œä½ éœ€è¦é€šè¿‡ Java é…ç½®æˆ– XML é…ç½®æ¥å®šä¹‰ä¸€ä¸ª PlatformTransactionManager ç±»å‹çš„ beanã€‚ ä½¿ç”¨æ–¹å¼\nè¦åœ¨ Spring åº”ç”¨ä¸­ä½¿ç”¨ @EnableTransactionManagement æ³¨è§£ï¼Œä½ åªéœ€åœ¨é…ç½®ç±»ä¸Šæ·»åŠ è¯¥æ³¨è§£å³å¯ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 @Configuration @EnableTransactionManagement public class TransactionConfig { // é…ç½®äº‹åŠ¡ç®¡ç†å™¨ @Bean public PlatformTransactionManager transactionManager(EntityManagerFactory emf) { return new JpaTransactionManager(emf); } // å…¶ä»–é…ç½®... } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒTransactionConfig æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒä½¿ç”¨äº† @EnableTransactionManagement æ³¨è§£æ¥å¯ç”¨äº‹åŠ¡ç®¡ç†ï¼Œå¹¶é€šè¿‡ @Bean æ³¨è§£å®šä¹‰äº†ä¸€ä¸ª JpaTransactionManager ç±»å‹çš„ bean ä½œä¸ºäº‹åŠ¡ç®¡ç†å™¨ã€‚\næ³¨æ„äº‹é¡¹\näº‹åŠ¡ç®¡ç†å™¨ç±»å‹ï¼šä½ éœ€è¦æ ¹æ®ä½ çš„æŒä¹…åŒ–æŠ€æœ¯ï¼ˆå¦‚ JPAã€JDBCã€Hibernate ç­‰ï¼‰é€‰æ‹©é€‚å½“çš„äº‹åŠ¡ç®¡ç†å™¨ç±»å‹ã€‚ ä»£ç†ç±»å‹ï¼šSpring æ”¯æŒä¸¤ç§ä»£ç†ç±»å‹ï¼šJDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœç›®æ ‡ bean å®ç°äº†è‡³å°‘ä¸€ä¸ªæ¥å£ï¼ŒSpring å°†ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ã€‚å¦‚æœç›®æ ‡ bean æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼ŒSpring å°†ä½¿ç”¨ CGLIB ä»£ç†ã€‚ä½ å¯ä»¥é€šè¿‡ @EnableTransactionManagement æ³¨è§£çš„ proxyTargetClass å±æ€§æ¥æ˜¾å¼æŒ‡å®šä»£ç†ç±»å‹ã€‚ äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼šåœ¨ @Transactional æ³¨è§£ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€éš”ç¦»çº§åˆ«ã€è¶…æ—¶æ—¶é—´ç­‰å±æ€§æ¥æ§åˆ¶äº‹åŠ¡çš„è¡Œä¸ºã€‚ æ€»ç»“\n@EnableTransactionManagement æ³¨è§£æ˜¯ Spring æ¡†æ¶ä¸­ç”¨äºå¯ç”¨å£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„é‡è¦æ³¨è§£ã€‚é€šè¿‡ä½¿ç”¨è¯¥æ³¨è§£ï¼Œå¹¶ç»“åˆ @Transactional æ³¨è§£ï¼Œä½ å¯ä»¥è½»æ¾åœ°åœ¨ Spring åº”ç”¨ä¸­å®ç°äº‹åŠ¡ç®¡ç†ï¼Œä»è€Œæé«˜æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚\n@SpringBootApplication @SpringBootApplication æ³¨è§£æ˜¯ Spring Boot é¡¹ç›®çš„æ ¸å¿ƒæ³¨è§£ï¼Œå®ƒç»“åˆäº†å¤šä¸ªå…¶ä»– Spring æ¡†æ¶ä¸­çš„æ³¨è§£ï¼Œä»¥ç®€åŒ– Spring Boot åº”ç”¨çš„é…ç½®ã€‚è¿™ä¸ªæ³¨è§£ä¸»è¦ç”¨äº Spring Boot åº”ç”¨çš„ä¸»ç±»ä¸Šï¼Œä»¥å¿«é€Ÿå¯åŠ¨å¹¶é…ç½®åº”ç”¨ã€‚å…·ä½“æ¥è¯´ï¼Œ@SpringBootApplication æ³¨è§£æ‰§è¡Œäº†ä»¥ä¸‹å…³é”®æ“ä½œï¼š\nå®šä¹‰é…ç½®ç±»\nï¼š\n@SpringBootApplication å®é™…ä¸Šæ˜¯ @Configuration çš„ä¸€ä¸ªç‰¹æ®Šå½¢å¼ï¼Œç”¨äºå®šä¹‰é…ç½®ç±»ã€‚åœ¨ Spring ä¸­ï¼Œ@Configuration ç±»ä½¿ç”¨ @Bean æ³¨è§£æ¥å®šä¹‰å’Œåˆå§‹åŒ–å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡éšåä¼šè¢« Spring å®¹å™¨ç®¡ç†ã€‚ @SpringBootConfiguration ä¸ä»…å£°æ˜äº†å½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œè¿˜ä½¿å¾—è¯¥ç±»èƒ½å¤Ÿä½¿ç”¨ Spring Boot ç‰¹æœ‰çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½ã€‚ å¯ç”¨è‡ªåŠ¨é…ç½®\nï¼š\n@EnableAutoConfiguration æ³¨è§£å†…éƒ¨åŒ…å«äº† @AutoConfigurationPackageï¼Œè¿™ä¸ªæ³¨è§£çš„ä½œç”¨æ˜¯å¸®åŠ© Spring Boot æ‰¾åˆ°ä¸»é…ç½®ç±»æ‰€åœ¨çš„åŒ…ï¼Œè¿›è€Œæ‰¾åˆ°å½“å‰é¡¹ç›®ä¸­æœ‰å“ªäº›é…ç½®ç±»ï¼Œå¹¶å°†å®ƒä»¬è¿”å›ç»™ Spring å®¹å™¨ã€‚ @EnableAutoConfiguration æ³¨è§£è¿˜å€ŸåŠ© @Import(AutoConfigurationImportSelector.class) çš„æ”¯æŒï¼Œæ”¶é›†å’Œæ³¨å†Œç‰¹å®šåœºæ™¯ç›¸å…³çš„ bean å®šä¹‰ã€‚å®ƒä¼šè‡ªåŠ¨æ ¹æ®é¡¹ç›®ä¸­æ·»åŠ çš„ jar ä¾èµ–æ¥é…ç½® Spring åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ£€æµ‹åˆ° classpath ä¸­æœ‰ H2 æ•°æ®åº“é©±åŠ¨ï¼ŒSpring Boot å°±ä¼šè‡ªåŠ¨é…ç½®ä¸€ä¸ªåµŒå…¥å¼ H2 æ•°æ®åº“ã€‚ å¯ç”¨ç»„ä»¶æ‰«æ\nï¼š\n@ComponentScan æ³¨è§£ç”¨äºå¯ç”¨ç»„ä»¶æ‰«æã€‚å½“å®ƒè¢«ä½¿ç”¨æ—¶ï¼ŒSpring Boot ä¼šè‡ªåŠ¨æ‰«æå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶ï¼ˆå¦‚ä½¿ç”¨ @Componentã€@Serviceã€@Repositoryã€@Controller ç­‰æ³¨è§£çš„ç±»ï¼‰ï¼Œå¹¶å°†è¿™äº›ç»„ä»¶æ³¨å†Œä¸º Spring åº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„ beanã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¼€å‘è€…æ— éœ€æ˜¾å¼åœ°åœ¨é…ç½®ç±»ä¸­å®šä¹‰æ¯ä¸€ä¸ª beanï¼ŒSpring Boot ä¼šè‡ªåŠ¨å‘ç°å¹¶ç®¡ç†è¿™äº› beanã€‚ å…ƒæ³¨è§£åŠŸèƒ½\nï¼š\n@SpringBootApplication è¿˜ä½¿ç”¨äº† @Documentedã€@Inheritedã€@Retention(RetentionPolicy.RUNTIME) å’Œ @Target(ElementType.TYPE) ç­‰å…ƒæ³¨è§£ï¼Œè¿™äº›æ³¨è§£æä¾›äº†å…³äº @SpringBootApplication æ³¨è§£æœ¬èº«çš„é¢å¤–ä¿¡æ¯ï¼Œå¦‚æ–‡æ¡£è®°å½•ã€ç»§æ‰¿è¡Œä¸ºã€ä¿ç•™ç­–ç•¥å’Œé€‚ç”¨ç›®æ ‡ç­‰ã€‚ å…è®¸è‡ªå®šä¹‰é…ç½®\nï¼š\n@SpringBootApplication æ³¨è§£è¿˜å…è®¸å¼€å‘è€…é€šè¿‡å…¶å±æ€§è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ exclude å±æ€§å¯ä»¥æ’é™¤ç‰¹å®šçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œä»¥é¿å…ä¸éœ€è¦çš„è‡ªåŠ¨é…ç½®ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œ@SpringBootApplication æ³¨è§£é€šè¿‡ç»“åˆå¤šä¸ª Spring æ¡†æ¶çš„æ³¨è§£ï¼Œç®€åŒ–äº† Spring Boot åº”ç”¨çš„é…ç½®è¿‡ç¨‹ã€‚å®ƒä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿåœ°å¯åŠ¨å¹¶è¿è¡Œä¸€ä¸ª Spring Boot åº”ç”¨ï¼Œè€Œæ— éœ€è¿›è¡Œå¤§é‡çš„æ‰‹åŠ¨é…ç½®ã€‚åœ¨ä½¿ç”¨ @SpringBootApplication æ³¨è§£æ—¶ï¼Œä¸»ç±»é€šå¸¸æ”¾åœ¨æ ¹åŒ…åä¸‹ï¼Œä»¥ç¡®ä¿èƒ½å¤Ÿæ‰«æåˆ°æ‰€æœ‰çš„ç»„ä»¶ã€‚\nWebMvcConfig å°†æ–‡ä»¶å’Œè·¯å¾„è¿›è¡Œäº†æ˜ å°„å¤„ç†ï¼Œå¹¶ä¸”æ‰©å±•äº†æ¶ˆæ¯è½¬æ¢å™¨ã€‚\nåˆ©ç”¨@Configurationæ³¨è§£ï¼Œå°†å…¶è¢«Spring Bootè‡ªåŠ¨æ‰«æå¹¶åŠ è½½åˆ°å®¹å™¨ä¸­ï¼Œä½†æ˜¯è¿™ä¸€è¿‡ç¨‹éœ€è¦æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœé…ç½®ç±»ä¸åœ¨é»˜è®¤æ‰«æçš„åŒ…è·¯å¾„ä¸‹ï¼Œå¯ä»¥é€šè¿‡åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @ComponentScanæ³¨è§£æ¥æŒ‡å®šé¢å¤–çš„æ‰«æè·¯å¾„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 @Slf4j @Configuration public class WebMvcConfig extends WebMvcConfigurationSupport { /** * è®¾ç½®é™æ€èµ„æºæ˜ å°„ * @param registry */ @Override protected void addResourceHandlers(ResourceHandlerRegistry registry) { log.info(\u0026#34;å¼€å§‹è¿›è¡Œé™æ€èµ„æºæ˜ å°„...\u0026#34;); registry.addResourceHandler(\u0026#34;/backend/**\u0026#34;).addResourceLocations(\u0026#34;classpath:/backend/\u0026#34;); registry.addResourceHandler(\u0026#34;/front/**\u0026#34;).addResourceLocations(\u0026#34;classpath:/front/\u0026#34;); } /** * æ‰©å±•mvcæ¡†æ¶çš„æ¶ˆæ¯è½¬æ¢å™¨ * @param converters */ @Override protected void extendMessageConverters(List\u0026lt;HttpMessageConverter\u0026lt;?\u0026gt;\u0026gt; converters) { log.info(\u0026#34;æ‰©å±•æ¶ˆæ¯è½¬æ¢å™¨...\u0026#34;); //åˆ›å»ºæ¶ˆæ¯è½¬æ¢å™¨å¯¹è±¡ MappingJackson2HttpMessageConverter messageConverter = new MappingJackson2HttpMessageConverter(); //è®¾ç½®å¯¹è±¡è½¬æ¢å™¨ï¼Œåº•å±‚ä½¿ç”¨Jacksonå°†Javaå¯¹è±¡è½¬ä¸ºjson messageConverter.setObjectMapper(new JacksonObjectMapper()); //å°†ä¸Šé¢çš„æ¶ˆæ¯è½¬æ¢å™¨å¯¹è±¡è¿½åŠ åˆ°mvcæ¡†æ¶çš„è½¬æ¢å™¨é›†åˆä¸­ converters.add(0,messageConverter); } } WebMvcConfigurationSupport åœ¨Spring MVCæˆ–Spring Boot MVCé¡¹ç›®ä¸­ï¼Œé€‰æ‹©ç»§æ‰¿WebMvcConfigurationSupportç±»é€šå¸¸æ˜¯ä¸ºäº†å®ç°è‡ªå®šä¹‰çš„Web MVCé…ç½®ã€‚è¿™ä¸ªç±»æä¾›äº†è®¸å¤šå¯é‡å†™çš„æ–¹æ³•ï¼Œå…è®¸å¼€å‘è€…æ ¹æ®éœ€è¦å¯¹Spring MVCçš„é»˜è®¤è¡Œä¸ºè¿›è¡Œå®šåˆ¶ã€‚ä»¥ä¸‹æ˜¯å…³äºç»§æ‰¿WebMvcConfigurationSupportç±»çš„è¯¦ç»†è§£ç­”ï¼š\nä¸ºä»€ä¹ˆè¦ç»§æ‰¿WebMvcConfigurationSupportç±»ï¼Ÿ\nè‡ªå®šä¹‰é…ç½®ï¼šé€šè¿‡ç»§æ‰¿WebMvcConfigurationSupportç±»ï¼Œå¼€å‘è€…å¯ä»¥é‡å†™å…¶ä¸­çš„æ–¹æ³•æ¥å®ç°è‡ªå®šä¹‰çš„Web MVCé…ç½®ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ã€æ¶ˆæ¯è½¬æ¢å™¨ã€è§†å›¾è§£æå™¨ç­‰ã€‚ è¦†ç›–é»˜è®¤é…ç½®ï¼šåœ¨Spring Bootä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨WebMvcAutoConfigurationç±»è¿›è¡Œè‡ªåŠ¨é…ç½®ã€‚ç„¶è€Œï¼Œå½“å¼€å‘è€…ç»§æ‰¿WebMvcConfigurationSupportç±»å¹¶å®ç°è‡ªå®šä¹‰é…ç½®æ—¶ï¼Œè¿™ç§è‡ªåŠ¨é…ç½®ä¼šè¢«ç¦ç”¨ã€‚è¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥å®Œå…¨æ§åˆ¶Web MVCçš„é…ç½®ï¼Œè€Œæ— éœ€å—åˆ°Spring Booté»˜è®¤é…ç½®çš„é™åˆ¶ã€‚ WebMvcConfigurationSupportç±»çš„ä½œç”¨\næä¾›åŸºç¡€é…ç½®ï¼šWebMvcConfigurationSupportç±»æ˜¯Spring MVCé…ç½®çš„åŸºç¡€ç±»ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—ä¸Web MVCç›¸å…³çš„é…ç½®æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•åŒ…æ‹¬æ·»åŠ æ‹¦æˆªå™¨ã€é…ç½®æ¶ˆæ¯è½¬æ¢å™¨ã€è®¾ç½®è§†å›¾è§£æå™¨ç­‰ã€‚ æ”¯æŒè‡ªå®šä¹‰æ‰©å±•ï¼šé€šè¿‡é‡å†™WebMvcConfigurationSupportç±»ä¸­çš„æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰æ‰©å±•ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ·»åŠ é¢å¤–çš„æ‹¦æˆªå™¨æ¥å¤„ç†ç‰¹å®šçš„è¯·æ±‚ï¼Œæˆ–è€…é…ç½®è‡ªå®šä¹‰çš„æ¶ˆæ¯è½¬æ¢å™¨æ¥å¤„ç†ä¸åŒç±»å‹çš„HTTPè¯·æ±‚å’Œå“åº”ã€‚ å¦‚ä½•ä½¿ç”¨WebMvcConfigurationSupportç±»ï¼Ÿ\nåˆ›å»ºé…ç½®ç±»ï¼šé¦–å…ˆï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®ç±»ï¼Œå¹¶ä½¿å…¶ç»§æ‰¿WebMvcConfigurationSupportç±»ã€‚ é‡å†™æ–¹æ³•ï¼šåœ¨é…ç½®ç±»ä¸­ï¼Œæ ¹æ®éœ€è¦é‡å†™WebMvcConfigurationSupportç±»ä¸­çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¸Œæœ›æ·»åŠ è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ï¼Œå¯ä»¥é‡å†™addInterceptorsæ–¹æ³•ã€‚ æ·»åŠ æ³¨è§£ï¼šåœ¨é…ç½®ç±»ä¸Šæ·»åŠ @Configurationæ³¨è§£ï¼Œä»¥å°†å…¶æ ‡è®°ä¸ºSpringçš„é…ç½®ç±»ã€‚æ­¤å¤–ï¼Œç”±äºWebMvcConfigurationSupportç±»æœ¬èº«æ²¡æœ‰è¢«æ‰“ä¸Š@Configurationæ³¨è§£ï¼Œå› æ­¤éœ€è¦åœ¨è‡ªå®šä¹‰çš„é…ç½®ç±»ä¸Šæ˜¾å¼æ·»åŠ è¯¥æ³¨è§£ã€‚ å¯åŠ¨åº”ç”¨ï¼šå®Œæˆé…ç½®åï¼Œå¯åŠ¨Spring Bootåº”ç”¨ã€‚æ­¤æ—¶ï¼Œè‡ªå®šä¹‰çš„Web MVCé…ç½®å°†ç”Ÿæ•ˆï¼Œå¹¶è¦†ç›–Spring Bootçš„é»˜è®¤é…ç½®ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦é€‰æ‹©äº†ç»§æ‰¿WebMvcConfigurationSupportç±»æ¥å®ç°è‡ªå®šä¹‰é…ç½®ï¼Œå°±æ„å‘³ç€æ”¾å¼ƒäº†Spring Bootæä¾›çš„Web MVCè‡ªåŠ¨é…ç½®ã€‚å› æ­¤ï¼Œåœ¨é‡å†™æ–¹æ³•æ—¶éœ€è¦è°¨æ…è€ƒè™‘ï¼Œç¡®ä¿ä¸ä¼šå¼•å…¥ä¸å¿…è¦çš„å¤æ‚æ€§æˆ–å½±å“åº”ç”¨çš„æ€§èƒ½ã€‚å¦‚æœåªéœ€è¦å¯¹é»˜è®¤é…ç½®è¿›è¡Œç®€å•çš„ä¿®æ”¹æˆ–æ‰©å±•ï¼Œå»ºè®®ä½¿ç”¨å®ç°WebMvcConfigureræ¥å£çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å¯ä»¥åœ¨ä¿ç•™Spring Bootè‡ªåŠ¨é…ç½®çš„åŸºç¡€ä¸Šæ·»åŠ è‡ªå®šä¹‰é…ç½®ã€‚\n@Configuration åœ¨Spring Booté¡¹ç›®ä¸­ï¼Œå¸¦æœ‰@Configurationæ³¨è§£çš„ç±»é€šå¸¸ä¼šè¢«Spring Bootè‡ªåŠ¨æ‰«æå¹¶åŠ è½½åˆ°å®¹å™¨ä¸­ï¼Œä½†è¿™ä¸€è¿‡ç¨‹è¿˜éœ€æ»¡è¶³ä¸€äº›åŸºæœ¬æ¡ä»¶ã€‚ä»¥ä¸‹æ˜¯å¯¹è¿™ä¸€é—®é¢˜çš„è¯¦ç»†è§£ç­”ï¼š\nåŸºæœ¬æ¡ä»¶\næ³¨è§£çš„ä½¿ç”¨ï¼šç±»ä¸Šå¿…é¡»æ˜ç¡®æ ‡æ³¨@Configurationæ³¨è§£ï¼Œä»¥å£°æ˜è¯¥ç±»ä¸ºé…ç½®ç±»ã€‚ åŒ…æ‰«æï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Bootä¼šä»å¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…å¼€å§‹æ‰«æå¸¦æœ‰@Componentã€@Serviceã€@Repositoryã€@Controllerä»¥åŠ@Configurationç­‰æ³¨è§£çš„ç±»ã€‚å› æ­¤ï¼Œå¦‚æœé…ç½®ç±»ä½äºè¿™äº›é»˜è®¤æ‰«æçš„åŒ…è·¯å¾„ä¸‹ï¼Œåˆ™æ— éœ€é¢å¤–æ“ä½œã€‚ éæŠ½è±¡ç±»ï¼šå¸¦æœ‰@Configurationæ³¨è§£çš„ç±»å¿…é¡»æ˜¯éæŠ½è±¡çš„ï¼Œå› ä¸ºSpringéœ€è¦å®ä¾‹åŒ–è¿™äº›ç±»ä»¥åˆ›å»ºBeanã€‚ é¢å¤–æ“ä½œï¼ˆå¦‚æœ‰å¿…è¦ï¼‰\næŒ‡å®šæ‰«æè·¯å¾„ï¼šå¦‚æœé…ç½®ç±»ä¸åœ¨é»˜è®¤æ‰«æçš„åŒ…è·¯å¾„ä¸‹ï¼Œå¯ä»¥é€šè¿‡åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @ComponentScanæ³¨è§£æ¥æŒ‡å®šé¢å¤–çš„æ‰«æè·¯å¾„ã€‚ä¾‹å¦‚ï¼š 1 2 3 4 5 6 7 @SpringBootApplication @ComponentScan(basePackages = {\u0026#34;com.example.config\u0026#34;, \u0026#34;com.another.package\u0026#34;}) public class MyApplication { public static void main(String[] args) { SpringApplication.run(MyApplication.class, args); } } å¯¼å…¥é…ç½®ç±»ï¼šå¦‚æœé…ç½®ç±»ä½äºä¸åŒçš„æ¨¡å—æˆ–é¡¹ç›®ä¸­ï¼Œå¹¶ä¸”ä¸å¸Œæœ›æˆ–ä¸èƒ½é€šè¿‡åŒ…æ‰«ææ¥åŠ è½½ï¼Œå¯ä»¥ä½¿ç”¨@Importæ³¨è§£åœ¨å¯åŠ¨ç±»æˆ–å¦ä¸€ä¸ªé…ç½®ç±»ä¸­å¯¼å…¥è¿™äº›é…ç½®ç±»ã€‚ä¾‹å¦‚ï¼š 1 2 3 4 5 6 7 @SpringBootApplication @Import(ExternalConfig.class) public class MyApplication { public static void main(String[] args) { SpringApplication.run(MyApplication.class, args); } } å…¶ä¸­ï¼ŒExternalConfigæ˜¯ä¸€ä¸ªä½äºä¸åŒæ¨¡å—æˆ–é¡¹ç›®ä¸­çš„é…ç½®ç±»ã€‚\nå¯ç”¨ç‰¹å®šé…ç½®ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦é€šè¿‡@Enableç³»åˆ—æ³¨è§£æ¥å¯ç”¨ç‰¹å®šçš„é…ç½®æˆ–åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œ@EnableWebMvcç”¨äºå¯ç”¨Spring MVCé…ç½®ï¼Œ@EnableTransactionManagementç”¨äºå¯ç”¨å£°æ˜å¼äº‹åŠ¡ç®¡ç†ç­‰ã€‚è¿™äº›æ³¨è§£é€šå¸¸ä¸ç‰¹å®šçš„é…ç½®ç±»ç»“åˆä½¿ç”¨ã€‚ æ€»ç»“\né€šå¸¸æƒ…å†µä¸‹ï¼Œåªè¦æ»¡è¶³åŸºæœ¬æ¡ä»¶ï¼ˆæ³¨è§£çš„ä½¿ç”¨ã€åŒ…æ‰«æã€éæŠ½è±¡ç±»ï¼‰ï¼Œå¸¦æœ‰@Configurationæ³¨è§£çš„ç±»å°±ä¼šè¢«Spring Bootè‡ªåŠ¨æ‰«æå¹¶åŠ è½½åˆ°å®¹å™¨ä¸­ã€‚å¦‚æœé…ç½®ç±»ä½äºéé»˜è®¤æ‰«æè·¯å¾„ä¸‹æˆ–éœ€è¦è·¨æ¨¡å—/é¡¹ç›®å¯¼å…¥ï¼Œåˆ™éœ€è¦è¿›è¡Œé¢å¤–çš„æ“ä½œæ¥æŒ‡å®šæ‰«æè·¯å¾„æˆ–å¯¼å…¥é…ç½®ç±»ã€‚\næ£€æŸ¥æ˜¯å¦ç™»å½•çš„è¿‡æ»¤å™¨ å…¶å®æ­¤å¤„å¯ä»¥åˆ©ç”¨TOKENã€JWTï¼Œå¯ä»¥å‚è€ƒé¢è¯•ç¯‡æŸ¥çœ‹ã€‚\nåˆ©ç”¨@WebFilterå°†ç±»æŒ‡å®šä¸ºè¿‡æ»¤å™¨ï¼Œå¹¶ä¸”å·²ç»å¯¹å¯åŠ¨ç±»è¿›è¡Œé…ç½®ï¼Œå¯¹å¸¦æœ‰æ­¤æ³¨è§£çš„ç±»è¿›è¡Œæ‰«æäº†ã€‚\né‡å†™doFilteræ–¹æ³•ï¼Œå¯¹äºå°†å‚æ•°è¿›è¡Œå¼ºè½¬äº†ï¼š\nJavaçš„Servletè¿‡æ»¤å™¨ï¼ˆFilterï¼‰çš„doFilteræ–¹æ³•ä¸­ï¼Œä¼ å…¥çš„ServletRequestå’ŒServletResponseå¯¹è±¡é€šå¸¸æ˜¯HttpServletRequestå’ŒHttpServletResponseçš„çˆ¶ç±»å®ä¾‹ï¼Œä½†å®é™…ä¸Šåœ¨Webåº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬é€šå¸¸å¤„ç†çš„æ˜¯HTTPè¯·æ±‚å’Œå“åº”ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æ›´å…³å¿ƒè¿™äº›å¯¹è±¡çš„HTTPç‰¹å®šå±æ€§å’Œæ–¹æ³•ã€‚\nå…·ä½“æ¥è¯´ï¼Œå½“ä½ æƒ³è¦è®¿é—®è¯·æ±‚ä¸­çš„HTTPå¤´éƒ¨ã€å‚æ•°ã€ä¼šè¯ï¼ˆsessionï¼‰ç­‰ä¿¡æ¯ï¼Œæˆ–è€…æƒ³è¦æ§åˆ¶HTTPå“åº”çš„çŠ¶æ€ç ã€è®¾ç½®å¤´éƒ¨ã€å‘é€å†…å®¹ç­‰æ—¶ï¼Œä½ ä¼šéœ€è¦ä½¿ç”¨HttpServletRequestå’ŒHttpServletResponseæ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚\nç”±äºJavaæ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œä½ ä¸èƒ½ç›´æ¥åœ¨ServletRequestæˆ–ServletResponseå¯¹è±¡ä¸Šè°ƒç”¨è¿™äº›æ¥å£ä¸­çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰è¿™äº›æ–¹æ³•ï¼ˆè¿™äº›æ–¹æ³•åªåœ¨HttpServletRequestå’ŒHttpServletResponseæ¥å£ä¸­å®šä¹‰ï¼‰ã€‚å› æ­¤ï¼Œä½ éœ€è¦å°†ServletRequestå’ŒServletResponseå¯¹è±¡å¼ºåˆ¶è½¬æ¢ï¼ˆå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæˆ–ç§°ä¸ºâ€œå‘ä¸‹è½¬å‹â€ï¼‰ä¸ºHttpServletRequestå’ŒHttpServletResponseï¼Œä»¥ä¾¿èƒ½å¤Ÿè®¿é—®å’Œä½¿ç”¨è¿™äº›HTTPç‰¹å®šçš„æ–¹æ³•å’Œå±æ€§ã€‚\né€šè¿‡è·å–äº†è®¿é—®çš„è·¯å¾„ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œæ‹¦æˆªæˆ–è€…æ”¾è¡Œã€‚\nåˆ©ç”¨request.getRequestURI();è·å–åˆ°è¯·æ±‚çš„uriï¼Œå®šä¹‰ä¸€äº›ä¸éœ€è¦å¤„ç†çš„è·¯å¾„ã€‚å¦‚æœè·¯å¾„éœ€è¦è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•äº†ï¼Œåˆ¤æ–­request.getSession().getAttribute(\u0026ldquo;employee\u0026rdquo;) != nullï¼Œçœ‹sessionä¸­æ˜¯å¦æœ‰\u0026quot;employee\u0026quot;çš„å±æ€§ï¼Œå› ä¸ºå½“æ—¶ç™»å½•çš„æ—¶å€™ï¼Œå¦‚æœæˆåŠŸç™»å½•äº†çš„è¯ï¼Œå·²ç»å°†ç›¸åº”çš„ä¿¡æ¯å­˜å…¥äº†sessionå½“ä¸­äº†ï¼Œrequest.getSession().setAttribute(\u0026ldquo;employee\u0026rdquo;,emp.getId());\nå¦‚æœæˆåŠŸç™»å½•äº†çš„è¯åˆ©ç”¨filterChain.doFilter(request,response);å°†è¯·æ±‚æ”¾è¡Œã€‚é€€å‡ºç™»å½•çš„æ—¶å€™ä¼šrequest.getSession().removeAttribute(\u0026ldquo;employee\u0026rdquo;);ã€‚\nå¦‚æœæ²¡æœ‰ç™»å½•å°±ä¼šè¿”å›response.getWriter().write(JSON.toJSONString(R.error(\u0026ldquo;NOTLOGIN\u0026rdquo;)));ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 /** * æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»å®Œæˆç™»å½• */ @WebFilter(filterName = \u0026#34;loginCheckFilter\u0026#34;,urlPatterns = \u0026#34;/*\u0026#34;) @Slf4j public class LoginCheckFilter implements Filter{ //è·¯å¾„åŒ¹é…å™¨ï¼Œæ”¯æŒé€šé…ç¬¦ public static final AntPathMatcher PATH_MATCHER = new AntPathMatcher(); @Override public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException { HttpServletRequest request = (HttpServletRequest) servletRequest; HttpServletResponse response = (HttpServletResponse) servletResponse; //1ã€è·å–æœ¬æ¬¡è¯·æ±‚çš„URI String requestURI = request.getRequestURI();// /backend/index.html log.info(\u0026#34;æ‹¦æˆªåˆ°è¯·æ±‚ï¼š{}\u0026#34;,requestURI); //å®šä¹‰ä¸éœ€è¦å¤„ç†çš„è¯·æ±‚è·¯å¾„ String[] urls = new String[]{ \u0026#34;/employee/login\u0026#34;, \u0026#34;/employee/logout\u0026#34;, \u0026#34;/backend/**\u0026#34;, \u0026#34;/front/**\u0026#34;, \u0026#34;/common/**\u0026#34;, \u0026#34;/user/sendMsg\u0026#34;, \u0026#34;/user/login\u0026#34; }; //2ã€åˆ¤æ–­æœ¬æ¬¡è¯·æ±‚æ˜¯å¦éœ€è¦å¤„ç† boolean check = check(urls, requestURI); //3ã€å¦‚æœä¸éœ€è¦å¤„ç†ï¼Œåˆ™ç›´æ¥æ”¾è¡Œ if(check){ log.info(\u0026#34;æœ¬æ¬¡è¯·æ±‚{}ä¸éœ€è¦å¤„ç†\u0026#34;,requestURI); filterChain.doFilter(request,response); return; } //4-1ã€åˆ¤æ–­ç™»å½•çŠ¶æ€ï¼Œå¦‚æœå·²ç™»å½•ï¼Œåˆ™ç›´æ¥æ”¾è¡Œ if(request.getSession().getAttribute(\u0026#34;employee\u0026#34;) != null){ log.info(\u0026#34;ç”¨æˆ·å·²ç™»å½•ï¼Œç”¨æˆ·idä¸ºï¼š{}\u0026#34;,request.getSession().getAttribute(\u0026#34;employee\u0026#34;)); Long empId = (Long) request.getSession().getAttribute(\u0026#34;employee\u0026#34;); BaseContext.setCurrentId(empId); filterChain.doFilter(request,response); return; } //4-2ã€åˆ¤æ–­ç™»å½•çŠ¶æ€ï¼Œå¦‚æœå·²ç™»å½•ï¼Œåˆ™ç›´æ¥æ”¾è¡Œ if(request.getSession().getAttribute(\u0026#34;user\u0026#34;) != null){ log.info(\u0026#34;ç”¨æˆ·å·²ç™»å½•ï¼Œç”¨æˆ·idä¸ºï¼š{}\u0026#34;,request.getSession().getAttribute(\u0026#34;user\u0026#34;)); Long userId = (Long) request.getSession().getAttribute(\u0026#34;user\u0026#34;); BaseContext.setCurrentId(userId); filterChain.doFilter(request,response); return; } log.info(\u0026#34;ç”¨æˆ·æœªç™»å½•\u0026#34;); //5ã€å¦‚æœæœªç™»å½•åˆ™è¿”å›æœªç™»å½•ç»“æœï¼Œé€šè¿‡è¾“å‡ºæµæ–¹å¼å‘å®¢æˆ·ç«¯é¡µé¢å“åº”æ•°æ® response.getWriter().write(JSON.toJSONString(R.error(\u0026#34;NOTLOGIN\u0026#34;))); return; } /** * è·¯å¾„åŒ¹é…ï¼Œæ£€æŸ¥æœ¬æ¬¡è¯·æ±‚æ˜¯å¦éœ€è¦æ”¾è¡Œ * @param urls * @param requestURI * @return */ public boolean check(String[] urls,String requestURI){ for (String url : urls) { boolean match = PATH_MATCHER.match(url, requestURI); if(match){ return true; } } return false; } } AntPathMatcher AntPathMatcher æ˜¯ Spring æ¡†æ¶ä¸­ç”¨äºè·¯å¾„åŒ¹é…çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œå®ƒåŸºäº Apache Ant çš„è·¯å¾„æ¨¡å¼ï¼Œæä¾›äº†ä¸€å¥—å¼ºå¤§çš„è·¯å¾„åŒ¹é…æœºåˆ¶ã€‚ä»¥ä¸‹æ˜¯ AntPathMatcher çš„ä¸»è¦ä½¿ç”¨æ–¹æ³•å’Œåœºæ™¯ï¼š\nä½¿ç”¨æ–¹æ³•\nåˆ›å»º AntPathMatcher å¯¹è±¡ é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ª AntPathMatcher å¯¹è±¡ï¼š\n1 2 3 javaå¤åˆ¶ä»£ç  AntPathMatcher matcher = new AntPathMatcher(); è·¯å¾„åŒ¹é… ä½¿ç”¨ match(String pattern, String path) æ–¹æ³•æ¥æ£€æŸ¥ä¸€ä¸ªè·¯å¾„æ˜¯å¦ä¸æŒ‡å®šçš„æ¨¡å¼ç›¸åŒ¹é…ï¼š\n1 2 3 javaå¤åˆ¶ä»£ç  boolean isMatch = matcher.match(pattern, path); å…¶ä¸­ pattern æ˜¯ä¸€ä¸ªåŒ…å« Ant é£æ ¼åŒ¹é…æ¨¡å¼çš„å­—ç¬¦ä¸²ï¼Œpath æ˜¯è¦åŒ¹é…çš„è·¯å¾„å­—ç¬¦ä¸²ã€‚\næå–è·¯å¾„å˜é‡ å¦‚æœä½ ä½¿ç”¨äº†è·¯å¾„å˜é‡ï¼ˆå¦‚ /user/{id}/infoï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ extractPathWithinPattern(String pattern, String path) æˆ– extractUriTemplateVariables(String pattern, String path) æ–¹æ³•æ¥æå–è¿™äº›å˜é‡ï¼š\n1 2 String variable = matcher.extractPathWithinPattern(pattern, path); // æå–è·¯å¾„ç‰‡æ®µï¼Œä¸åŒ…æ‹¬å˜é‡å Map\u0026lt;String, String\u0026gt; variables = matcher.extractUriTemplateVariables(pattern, path); // æå–è·¯å¾„ä¸­çš„å˜é‡å¹¶æ”¾å…¥ Map ä½¿ç”¨åœºæ™¯\nURL æ˜ å°„ åœ¨ Spring MVC ä¸­ï¼ŒAntPathMatcher å¸¸ç”¨äºå®šä¹‰ URL æ˜ å°„è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ @GetMapping(\u0026quot;/users/{id}\u0026quot;) æ¥åŒ¹é… /users/123 è¿™æ ·çš„ URLï¼Œå…¶ä¸­ {id} æ˜¯ä¸€ä¸ªè·¯å¾„å˜é‡ã€‚ å®‰å…¨æ§åˆ¶ åœ¨å®‰å…¨æ§åˆ¶åœºæ™¯ä¸­ï¼Œä½ å¯èƒ½éœ€è¦è¿‡æ»¤æ‰æŸäº›è¯·æ±‚ URLã€‚ä½¿ç”¨ AntPathMatcherï¼Œä½ å¯ä»¥è½»æ¾å®šä¹‰éœ€è¦è¿‡æ»¤çš„æ¨¡å¼ï¼Œå¹¶æ£€æŸ¥è¯·æ±‚ URL æ˜¯å¦ä¸ä¹‹åŒ¹é…ã€‚ è·¯ç”±å’Œè½¬å‘ åœ¨ API ç½‘å…³æˆ–è·¯ç”±æœåŠ¡ä¸­ï¼ŒAntPathMatcher å¯ä»¥ç”¨äºåŒ¹é…ä¼ å…¥çš„è¯·æ±‚ URLï¼Œå¹¶æ ¹æ®åŒ¹é…ç»“æœå†³å®šå°†å…¶è·¯ç”±åˆ°å“ªä¸ªåç«¯æœåŠ¡ã€‚ æ—¥å¿—è®°å½• ä½ å¯ä»¥ä½¿ç”¨ AntPathMatcher æ¥è¿‡æ»¤å‡ºä¸éœ€è¦è®°å½•æ—¥å¿—çš„è¯·æ±‚ URLï¼Œæˆ–è€…ä¸ºä¸åŒç±»å‹çš„è¯·æ±‚ URL è®¾ç½®ä¸åŒçš„æ—¥å¿—çº§åˆ«ã€‚ æ–‡ä»¶è®¿é—®æ§åˆ¶ å¦‚æœä½ éœ€è¦åŸºäºè·¯å¾„æ¨¡å¼æ¥æ§åˆ¶å¯¹æ–‡ä»¶çš„è®¿é—®æƒé™ï¼ŒAntPathMatcher å¯ä»¥å¸®åŠ©ä½ å®ç°è¿™ä¸€åŠŸèƒ½ã€‚ ç‰¹æ€§\né€šé…ç¬¦ï¼šAntPathMatcher æ”¯æŒä¸¤ç§é€šé…ç¬¦ï¼š? è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œ* è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚ å˜é‡ç»‘å®šï¼šä½ å¯ä»¥åœ¨æ¨¡å¼ä¸­ä½¿ç”¨ {variableName} æ¥å®šä¹‰è·¯å¾„å˜é‡ï¼Œå¹¶ä½¿ç”¨ extractUriTemplateVariables æ–¹æ³•æå–è¿™äº›å˜é‡ã€‚ å¤šé‡æ˜ å°„ï¼šä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªåŒ…å«å¤šä¸ªæ¨¡å¼çš„æ•°ç»„ï¼Œå¹¶ä½¿ç”¨ AntPathMatcher ä¸€æ¬¡æ€§æ£€æŸ¥å¤šä¸ªæ¨¡å¼æ˜¯å¦ä¸ç»™å®šè·¯å¾„åŒ¹é…ã€‚ æ€»ç»“\nAntPathMatcher æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è·¯å¾„åŒ¹é…å·¥å…·ï¼Œå®ƒåŸºäº Apache Ant çš„è·¯å¾„æ¨¡å¼ï¼Œæä¾›äº†çµæ´»ä¸”æ˜“äºä½¿ç”¨çš„è·¯å¾„åŒ¹é…æœºåˆ¶ã€‚åœ¨ Spring æ¡†æ¶å’Œå…¶ä»– Java Web åº”ç”¨ç¨‹åºä¸­ï¼Œå®ƒè¢«å¹¿æ³›ç”¨äº URL æ˜ å°„ã€å®‰å…¨æ§åˆ¶ã€è·¯ç”±è½¬å‘ç­‰åœºæ™¯ã€‚\nThreadLocal ä½¿ç”¨äº†ä¸€ä¸ªå·¥å…·ç±»å¯¹å®ƒè¿›è¡Œäº†å°è£…ï¼Œä½¿å…¶èƒ½æ›´æ–¹ä¾¿ä½¿ç”¨ã€‚æ­¤å¤„ç”¨å®ƒçš„ä½œç”¨å°±æ˜¯å¯ä»¥åšåˆ°è‡ªåŠ¨å¡«å……å½“å‰ç™»å½•çš„ç”¨æˆ·åï¼Œå› ä¸ºæ­¤æ—¶æ— æ³•è·å–åˆ°HttpServletRequestæˆ–è€…sessionï¼Œå› æ­¤å°±å¹¶æ²¡æœ‰å¾ˆå¥½çš„æ–¹æ³•è·å–ï¼Œå°±ä½¿ç”¨ThreadLocalæ¥å®ç°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 public class BaseContext { private static ThreadLocal\u0026lt;Long\u0026gt; threadLocal = new ThreadLocal\u0026lt;\u0026gt;(); /** * è®¾ç½®å€¼ * @param id */ public static void setCurrentId(Long id){ threadLocal.set(id); } /** * è·å–å€¼ * @return */ public static Long getCurrentId(){ return threadLocal.get(); } } 1 2 3 4 5 6 7 8 9 if(request.getSession().getAttribute(\u0026#34;employee\u0026#34;) != null){ log.info(\u0026#34;ç”¨æˆ·å·²ç™»å½•ï¼Œç”¨æˆ·idä¸ºï¼š{}\u0026#34;,request.getSession().getAttribute(\u0026#34;employee\u0026#34;)); Long empId = (Long) request.getSession().getAttribute(\u0026#34;employee\u0026#34;); BaseContext.setCurrentId(empId); filterChain.doFilter(request,response); return; } ThreadLocalçš„è¯¦ç»†ä»‹ç»å’Œä½¿ç”¨\nä¸€ã€ThreadLocalçš„è¯¦ç»†ä»‹ç»\nThreadLocalæ˜¯Javaå¹¶å‘åŒ…ï¼ˆjava.util.concurrentï¼‰ä¸­æä¾›çš„ä¸€ä¸ªç±»ï¼Œç”¨äºè§£å†³å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å˜é‡å…±äº«æ‰€å¸¦æ¥çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚å…¶ä¸»è¦ä½œç”¨æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œä½¿å¾—æ¯ä¸ªçº¿ç¨‹åœ¨è®¿é—®ThreadLocalæ—¶è·å–åˆ°çš„éƒ½æ˜¯è‡ªå·±çš„ç§æœ‰å˜é‡ï¼Œè€Œä¸æ˜¯å…±äº«çš„åŒä¸€ä¸ªå˜é‡ã€‚è¿™æ ·ï¼ŒThreadLocalèƒ½å¤Ÿéš”ç¦»çº¿ç¨‹é—´çš„æ•°æ®å…±äº«ï¼Œæä¾›çº¿ç¨‹çº§åˆ«çš„æ•°æ®å­˜å‚¨ã€‚\nå®šä¹‰ä¸ç‰¹ç‚¹ ThreadLocalç±»æä¾›äº†ä¸€ç§çº¿ç¨‹å±€éƒ¨å˜é‡çš„æœºåˆ¶ï¼Œä½¿å¾—æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œè€Œä¸ä¼šå½±å“åˆ°å…¶ä»–çº¿ç¨‹çš„å˜é‡å‰¯æœ¬ã€‚ æ¯ä¸ªçº¿ç¨‹åœ¨è®¿é—®ThreadLocalå˜é‡æ—¶ï¼Œéƒ½ä¼šè·å–åˆ°å±äºè‡ªå·±çš„ã€ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ã€‚ åº”ç”¨åœºæ™¯ çº¿ç¨‹ä¸Šä¸‹æ–‡ä¿¡æ¯ä¼ é€’ï¼šä¾‹å¦‚åœ¨webåº”ç”¨ä¸­ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œéœ€è¦åœ¨ä¸åŒçš„è¿‡æ»¤å™¨ã€å¤„ç†å™¨é“¾è·¯ä¸­ä¼ é€’ç”¨æˆ·ä¼šè¯ä¿¡æ¯ï¼Œæ­¤æ—¶å¯ä»¥å°†è¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨ThreadLocalä¸­ã€‚ é¿å…åŒæ­¥å¼€é”€ï¼šå¯¹äºé‚£äº›åªéœ€è¦åœ¨å•ä¸ªçº¿ç¨‹å†…ä¿æŒçŠ¶æ€ï¼Œä¸éœ€è¦çº¿ç¨‹é—´å…±äº«çš„æ•°æ®ï¼Œä½¿ç”¨ThreadLocalå¯ä»¥é¿å…ä½¿ç”¨é”å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚ æ•°æ®åº“è¿æ¥ã€äº‹åŠ¡ç®¡ç†ï¼šåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„æ•°æ®åº“è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨ThreadLocalå­˜å‚¨å½“å‰çº¿ç¨‹çš„æ•°æ®åº“è¿æ¥å¯¹è±¡ï¼Œä»¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚ æ ¸å¿ƒæ–¹æ³• set(T value)ï¼šè®¾ç½®å½“å‰çº¿ç¨‹çš„å˜é‡å‰¯æœ¬å€¼ã€‚ get()ï¼šè·å–å½“å‰çº¿ç¨‹æ‰€å¯¹åº”çš„å˜é‡å‰¯æœ¬çš„å€¼ï¼Œå¦‚æœæ­¤çº¿ç¨‹ä»æœªè®¾ç½®è¿‡å€¼ï¼Œé‚£ä¹ˆè¿”å›nullæˆ–è€…åˆå§‹å€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚ remove()ï¼šåˆ é™¤å½“å‰çº¿ç¨‹ä¿å­˜çš„å˜é‡å‰¯æœ¬ï¼Œå¦‚æœä¸ä¸»åŠ¨æ¸…ç†ï¼Œå¯èƒ½ä¼šé€ æˆå†…å­˜æ³„éœ²ã€‚ å†…å­˜æ³„éœ²é—®é¢˜ å½“çº¿ç¨‹ç»“æŸç”Ÿå‘½å‘¨æœŸåï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼è°ƒç”¨remove()æ–¹æ³•ï¼Œå­˜å‚¨åœ¨çº¿ç¨‹æœ¬åœ°å˜é‡è¡¨ä¸­çš„ThreadLocalå˜é‡å‰¯æœ¬ä¸ä¼šè‡ªåŠ¨åˆ é™¤ï¼Œè¿™å¯èƒ½å¯¼è‡´å®ƒä»¬æ— æ³•è¢«åƒåœ¾å›æ”¶ï¼Œå°¤å…¶æ˜¯åœ¨çº¿ç¨‹æ± åœºæ™¯ä¸­ï¼Œå¦‚æœçº¿ç¨‹ä¼šè¢«å¤ç”¨ï¼Œè¿™ä¸ªé—®é¢˜æ›´ä¸ºçªå‡ºã€‚ çº¿ç¨‹å®‰å…¨çš„è¯¯è§£ è™½ç„¶ThreadLocalä¿è¯äº†æ¯ä¸ªçº¿ç¨‹åªèƒ½è®¿é—®è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œä½†æ˜¯å®ƒå¹¶ä¸èƒ½ä¿è¯å˜é‡å‰¯æœ¬æœ¬èº«çš„çº¿ç¨‹å®‰å…¨æ€§ã€‚å³å¦‚æœå­˜æ”¾åœ¨ThreadLocalä¸­çš„å¯¹è±¡ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šä¸ªçº¿ç¨‹é€šè¿‡å„è‡ªçš„ThreadLocalè®¿é—®ç›¸åŒçš„éçº¿ç¨‹å®‰å…¨å¯¹è±¡æ—¶ï¼Œè¿˜éœ€è¦é‡‡å–é¢å¤–çš„åŒæ­¥æªæ–½ã€‚ äºŒã€ThreadLocalçš„ä½¿ç”¨\nåŸºæœ¬ç”¨æ³• åˆ›å»ºä¸€ä¸ªThreadLocalå˜é‡ã€‚ åœ¨æ¯ä¸ªçº¿ç¨‹å†…éƒ¨ï¼Œä½¿ç”¨set(T value)æ–¹æ³•ç»™å½“å‰çº¿ç¨‹è®¾ç½®ä¸€ä¸ªæœ¬åœ°å˜é‡çš„å€¼ã€‚ åœ¨éœ€è¦çš„æ—¶å€™ï¼Œä½¿ç”¨get()æ–¹æ³•æ¥è·å–å½“å‰çº¿ç¨‹å…³è”çš„æœ¬åœ°å˜é‡çš„å€¼ã€‚ ä½¿ç”¨å®Œæ¯•åï¼Œè°ƒç”¨remove()æ–¹æ³•æ¸…é™¤å½“å‰çº¿ç¨‹çš„ThreadLocalå˜é‡ã€‚ ä»£ç ç¤ºä¾‹ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºäº†ThreadLocalçš„åŸºæœ¬ç”¨æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 import java.lang.ThreadLocal; public class ThreadLocalExample { // å®šä¹‰ä¸€ä¸ªThreadLocalå˜é‡ï¼Œè¿™é‡Œå­˜å‚¨çš„æ˜¯Stringç±»å‹ public static final ThreadLocal\u0026lt;String\u0026gt; threadLocal = new ThreadLocal\u0026lt;\u0026gt;(); public static void main(String[] args) { // åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹å¹¶å¯åŠ¨ new Thread(() -\u0026gt; { // è®¾ç½®å½“å‰çº¿ç¨‹çš„ThreadLocalå˜é‡ threadLocal.set(\u0026#34;Thread A\u0026#34;); System.out.println(\u0026#34;In Thread A: \u0026#34; + threadLocal.get()); }).start(); new Thread(() -\u0026gt; { // è®¾ç½®å½“å‰çº¿ç¨‹çš„ThreadLocalå˜é‡ï¼Œä¸å½±å“å…¶ä»–çº¿ç¨‹ threadLocal.set(\u0026#34;Thread B\u0026#34;); System.out.println(\u0026#34;In Thread B: \u0026#34; + threadLocal.get()); // æ¸…ç†æœ¬çº¿ç¨‹çš„ThreadLocalå˜é‡ threadLocal.remove(); // æ­¤æ—¶å°è¯•è·å–å·²ç»ç§»é™¤çš„ThreadLocalå˜é‡ï¼Œåº”è¯¥è¿”å›null System.out.println(\u0026#34;After remove in Thread B: \u0026#34; + threadLocal.get()); }).start(); } } åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªThreadLocal\u0026lt;String\u0026gt;ç±»å‹çš„é™æ€å˜é‡threadLocalã€‚åœ¨æ¯ä¸ªçº¿ç¨‹å†…éƒ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨set(String value)æ–¹æ³•ç»™å½“å‰çº¿ç¨‹è®¾ç½®äº†ä¸€ä¸ªæœ¬åœ°å˜é‡çš„å€¼ã€‚åŒæ ·åœ¨æ¯ä¸ªçº¿ç¨‹å†…éƒ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨get()æ–¹æ³•æ¥è·å–å½“å‰çº¿ç¨‹å…³è”çš„æœ¬åœ°å˜é‡çš„å€¼ã€‚æ³¨æ„ï¼Œæ¯ä¸ªçº¿ç¨‹åªèƒ½è·å–åˆ°è‡ªå·±è®¾ç½®çš„é‚£ä¸ªå€¼ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šå¹²æ‰°ã€‚åœ¨ç¬¬äºŒä¸ªçº¿ç¨‹é‡Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨remove()æ–¹æ³•æ¸…é™¤å½“å‰çº¿ç¨‹çš„ThreadLocalå˜é‡ã€‚\næ³¨æ„äº‹é¡¹ åœ¨ä½¿ç”¨å®ŒThreadLocalå¯¹è±¡åï¼Œåœ¨finallyä¸­è°ƒç”¨ThreadLocalå¯¹è±¡çš„remove()æ–¹æ³•ï¼Œä»¥é¿å…å†…å­˜æ³„éœ²ã€‚ ä¸è¦è¿‡åº¦ä½¿ç”¨ThreadLocalï¼Œä»¥å…ä»£ç é€»è¾‘å˜å¾—å¤æ‚ï¼Œå¢åŠ ç»´æŠ¤éš¾åº¦ã€‚ å½“çº¿ç¨‹é—´æœ¬æ¥å°±éœ€è¦å…±äº«æ•°æ®æ—¶ï¼Œä¸åº”è¯¥æ»¥ç”¨ThreadLocalé¿å…æ•°æ®äº¤æ¢ã€‚ æ€»ä¹‹ï¼ŒThreadLocalæ˜¯ä¸€ä¸ªåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹éå¸¸æœ‰ç”¨çš„å·¥å…·ç±»ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¹¶æä¾›çº¿ç¨‹çº§åˆ«çš„æ•°æ®å­˜å‚¨ã€‚ä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„å†…å­˜æ³„éœ²é—®é¢˜å’Œçº¿ç¨‹å®‰å…¨çš„è¯¯è§£ç­‰é£é™©ã€‚\nMybatisPçš„è‡ªåŠ¨å¡«å……åŠŸèƒ½ æœ‰æ—¶å€™æœ‰ä¸€äº›æ•°æ®å¦‚æœå‰ç«¯å¹¶ä¸ä¼šä¼ è¿‡æ¥ï¼Œå¹¶ä¸”åç«¯å­˜å…¥æ•°æ®åº“çš„æ—¶å€™è¿˜éœ€è¦ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨è‡ªåŠ¨å¡«å……åŠŸèƒ½æ¥å®ç°äº†ã€‚\nä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 @Data public class SetmealDish implements Serializable { private static final long serialVersionUID = 1L; private Long id; //å¥—é¤id private Long setmealId; //èœå“id private Long dishId; //èœå“åç§° ï¼ˆå†—ä½™å­—æ®µï¼‰ private String name; //èœå“åŸä»· private BigDecimal price; //ä»½æ•° private Integer copies; //æ’åº private Integer sort; @TableField(fill = FieldFill.INSERT) private LocalDateTime createTime; @TableField(fill = FieldFill.INSERT_UPDATE) private LocalDateTime updateTime; @TableField(fill = FieldFill.INSERT) private Long createUser; @TableField(fill = FieldFill.INSERT_UPDATE) private Long updateUser; //æ˜¯å¦åˆ é™¤ private Integer isDeleted; } @TableField å†™åˆ°éœ€è¦è‡ªåŠ¨å¡«å……çš„å±æ€§ä¸Šé¢ï¼Œå¹¶ä¸”éœ€è¦æŒ‡å®šfillçš„å±æ€§\næœ‰ä¸€ä¸‹å‡ ç§ç±»å‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 public enum FieldFill { /** * é»˜è®¤ä¸å¤„ç† */ DEFAULT, /** * æ’å…¥æ—¶å¡«å……å­—æ®µ */ INSERT, /** * æ›´æ–°æ—¶å¡«å……å­—æ®µ */ UPDATE, /** * æ’å…¥å’Œæ›´æ–°æ—¶å¡«å……å­—æ®µ */ INSERT_UPDATE } MetaObjectHandler æ¥ç€è¿˜éœ€è¦å¯¹éœ€è¦å¯¹è‡ªåŠ¨å¡«å……è¿›è¡Œé…ç½®ï¼Œä¾‹å¦‚æ’å…¥å’Œæ›´æ–°æ—¶å€™åˆ†åˆ«æ€æ ·è¿›è¡Œé…ç½®\n1.å®ç°MetaObjectHandler\n2.ç±»ä¸Šé¢åŠ @Componentæ³¨è§£ï¼Œå°†å…¶çº³å…¥springå®¹å™¨ç®¡ç†\n3.é‡å†™insertFillå’ŒupdateFillæ–¹æ³•ï¼Œåˆ©ç”¨metaObject.setValue()å¯¹ç›¸åº”çš„å±æ€§è¿›è¡Œèµ‹å€¼ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 @Component @Slf4j public class MyMetaObjecthandler implements MetaObjectHandler { /** * æ’å…¥æ“ä½œï¼Œè‡ªåŠ¨å¡«å…… * @param metaObject */ @Override public void insertFill(MetaObject metaObject) { log.info(\u0026#34;å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……[insert]...\u0026#34;); log.info(metaObject.toString()); metaObject.setValue(\u0026#34;createTime\u0026#34;, LocalDateTime.now()); metaObject.setValue(\u0026#34;updateTime\u0026#34;,LocalDateTime.now()); metaObject.setValue(\u0026#34;createUser\u0026#34;,BaseContext.getCurrentId()); metaObject.setValue(\u0026#34;updateUser\u0026#34;,BaseContext.getCurrentId()); } /** * æ›´æ–°æ“ä½œï¼Œè‡ªåŠ¨å¡«å…… * @param metaObject */ @Override public void updateFill(MetaObject metaObject) { log.info(\u0026#34;å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……[update]...\u0026#34;); log.info(metaObject.toString()); long id = Thread.currentThread().getId(); log.info(\u0026#34;çº¿ç¨‹idä¸ºï¼š{}\u0026#34;,id); metaObject.setValue(\u0026#34;updateTime\u0026#34;,LocalDateTime.now()); metaObject.setValue(\u0026#34;updateUser\u0026#34;,BaseContext.getCurrentId()); } } RESTFulé£æ ¼ä»¥åŠæ¥æ”¶è¯·æ±‚çš„æ–¹æ³• RESTFulï¼Œå³RESTfulï¼Œæ˜¯ä¸€ç§é¢å‘èµ„æºçš„è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå®ƒæ˜¯Representational State Transferï¼ˆè¡¨ç¤ºçŠ¶æ€è½¬ç§»ï¼‰çš„ç¼©å†™ã€‚ä»¥ä¸‹æ˜¯å¯¹RESTfulé£æ ¼çš„è¯¦ç»†ä»‹ç»ï¼š\nä¸€ã€è®¾è®¡ç›®æ ‡\nRESTfulé£æ ¼çš„è®¾è®¡ç›®æ ‡æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°ç»Ÿä¸€çš„æ¥å£å’Œäº¤äº’æ–¹å¼ï¼Œä»¥æé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\näºŒã€æ ¸å¿ƒç‰¹ç‚¹\nèµ„æºå¯¼å‘ï¼šRESTfulæ¶æ„å°†æ•´ä¸ªç³»ç»Ÿçœ‹ä½œä¸€ç»„èµ„æºçš„é›†åˆï¼Œæ¯ä¸ªèµ„æºéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰ã€‚å®¢æˆ·ç«¯é€šè¿‡URIæ¥è®¿é—®èµ„æºï¼ŒæœåŠ¡å™¨é€šè¿‡HTTPæ–¹æ³•æ¥æ“ä½œèµ„æºã€‚ ç»Ÿä¸€æ¥å£ï¼šRESTfulæ¶æ„å®šä¹‰äº†ä¸€ç»„ç»Ÿä¸€çš„æ¥å£ï¼ŒåŒ…æ‹¬HTTPæ–¹æ³•ï¼ˆå¦‚GETã€POSTã€PUTã€DELETEç­‰ï¼‰ã€URIå’ŒHTTPçŠ¶æ€ç ç­‰ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡åªéœ€è¦éµå¾ªè¿™äº›æ¥å£ï¼Œå°±å¯ä»¥å®ç°ç³»ç»Ÿçš„äº¤äº’ã€‚ æ— çŠ¶æ€ï¼šRESTfulæ¶æ„æ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨ä¸éœ€è¦ç»´æŠ¤å®¢æˆ·ç«¯çš„çŠ¶æ€ä¿¡æ¯ã€‚è¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿçš„å¯ä¼¸ç¼©æ€§å’Œå¯é æ€§ã€‚ å¯ç¼“å­˜æ€§ï¼šRESTfulæ¶æ„æ”¯æŒç¼“å­˜æœºåˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ç¼“å­˜æ¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œå¯é æ€§ã€‚ ä¸‰ã€HTTPæ–¹æ³•\nåœ¨RESTfulé£æ ¼ä¸­ï¼Œå¸¸è§çš„HTTPæ–¹æ³•åŒ…æ‹¬ï¼š\nGETï¼šç”¨äºè·å–èµ„æºã€‚ POSTï¼šç”¨äºåˆ›å»ºèµ„æºï¼ˆåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ›´æ–°èµ„æºï¼‰ã€‚ PUTï¼šç”¨äºæ›´æ–°æœåŠ¡ç«¯çš„èµ„æºçš„å…¨éƒ¨ä¿¡æ¯ã€‚ DELETEï¼šç”¨äºåˆ é™¤æœåŠ¡ç«¯çš„èµ„æºã€‚ æ­¤å¤–ï¼Œè¿˜æœ‰PATCHæ–¹æ³•ï¼Œå®ƒç”¨äºæ›´æ–°æœåŠ¡ç«¯çš„èµ„æºçš„éƒ¨åˆ†ä¿¡æ¯ã€‚\nå››ã€èµ„æºçš„è¡¨ç°å½¢å¼\nåœ¨RESTfulæ¶æ„ä¸­ï¼Œèµ„æºçš„è¡¨ç°å½¢å¼é€šå¸¸æ˜¯XMLæˆ–HTMLã€‚å®¢æˆ·ç«¯é€šè¿‡æ“ä½œèµ„æºçš„è¡¨ç°å½¢å¼æ¥æ“ä½œèµ„æºã€‚\näº”ã€è®¾è®¡åŸåˆ™\nä½¿ç”¨åè¯è€Œä¸æ˜¯åŠ¨è¯ï¼šåœ¨å®šä¹‰URIæ—¶ï¼Œåº”ä½¿ç”¨åè¯æ¥è¡¨ç¤ºèµ„æºï¼Œè€Œä¸æ˜¯åŠ¨è¯ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨â€œ/usersâ€æ¥è¡¨ç¤ºç”¨æˆ·èµ„æºï¼Œè€Œä¸æ˜¯â€œ/getAllUsersâ€ã€‚ GETæ–¹æ³•å’ŒæŸ¥è¯¢å‚æ•°ä¸åº”æ¶‰åŠçŠ¶æ€æ”¹å˜ï¼šåº”ä½¿ç”¨PUTã€POSTå’ŒDELETEæ–¹æ³•æ¥æ”¹å˜çŠ¶æ€ï¼Œè€Œä¸æ˜¯GETæ–¹æ³•ã€‚åŒæ—¶ï¼ŒæŸ¥è¯¢å‚æ•°åº”ä»…ç”¨äºè¿‡æ»¤å’Œæ’åºèµ„æºï¼Œè€Œä¸åº”æ”¹å˜èµ„æºçš„çŠ¶æ€ã€‚ ä¿æŒURIçš„ç®€æ´å’Œä¸€è‡´æ€§ï¼šURIåº”ç®€æ´æ˜äº†ï¼Œæ˜“äºç†è§£å’Œè®°å¿†ã€‚åŒæ—¶ï¼Œåº”ä¿æŒURIçš„ä¸€è‡´æ€§ï¼Œä»¥ä¾¿äºå®¢æˆ·ç«¯æ­£ç¡®åœ°è®¿é—®å’Œæ“ä½œèµ„æºã€‚ ä½¿ç”¨HTTPå¤´å£°æ˜åºåˆ—åŒ–æ ¼å¼ï¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´é€šä¿¡æ—¶ï¼Œåº”ä½¿ç”¨HTTPå¤´æ¥å£°æ˜åºåˆ—åŒ–æ ¼å¼ï¼Œä»¥ç¡®ä¿åŒæ–¹éƒ½èƒ½æ­£ç¡®åœ°è§£æå’Œå¤„ç†æ•°æ®ã€‚ å…­ã€ä¼˜åŠ¿\nç®€åŒ–å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„äº¤äº’ï¼šé€šè¿‡å®šä¹‰ä¸€ç»„ç»Ÿä¸€çš„æ¥å£å’Œäº¤äº’æ–¹å¼ï¼ŒRESTfulé£æ ¼å¯ä»¥ç®€åŒ–å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„äº¤äº’è¿‡ç¨‹ï¼Œé™ä½é€šä¿¡çš„å¤æ‚æ€§ã€‚ æé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œå¯é æ€§ï¼šç”±äºRESTfulé£æ ¼æ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå› æ­¤å¯ä»¥æé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œå¯é æ€§ã€‚åŒæ—¶ï¼Œæ”¯æŒç¼“å­˜æœºåˆ¶ä¹Ÿå¯ä»¥è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚ æ˜“äºå®ç°å’Œç»´æŠ¤ï¼šRESTfulé£æ ¼åŸºäºHTTPåè®®çš„å„ç§ç‰¹æ€§æ¥å®ç°èµ„æºçš„æ ‡è¯†ã€çŠ¶æ€çš„è½¬ç§»ã€ç¼“å­˜ã€å®‰å…¨æ€§ç­‰åŠŸèƒ½ï¼Œå› æ­¤æ˜“äºå®ç°å’Œç»´æŠ¤ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒRESTfulé£æ ¼æ˜¯ä¸€ç§åŸºäºHTTPåè®®çš„é¢å‘èµ„æºçš„è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå®ƒé€šè¿‡å®šä¹‰ä¸€ç»„ç»Ÿä¸€çš„æ¥å£å’Œäº¤äº’æ–¹å¼ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”éµå¾ªRESTfulé£æ ¼çš„è®¾è®¡åŸåˆ™å’Œè®¾è®¡è§„èŒƒï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œé«˜æ•ˆæ€§ã€‚\nåç«¯æ¥æ”¶æ•°æ®çš„æ–¹æ³• Java Webå¼€å‘ä¸­ï¼Œå‰ç«¯æ•°æ®å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä¼ è¾“åˆ°åç«¯ï¼Œå¹¶ä¸”åç«¯ä¼šç›¸åº”åœ°è§£æè¿™äº›è¯·æ±‚ä»¥è·å–æ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ•°æ®ä¼ è¾“æ–¹å¼ä»¥åŠåç«¯å¦‚ä½•æ¥æ”¶è¿™äº›æ•°æ®çš„æƒ…å†µï¼š\n1. é€šè¿‡URLæŸ¥è¯¢å‚æ•°ä¼ è¾“\næ–¹å¼ï¼šå‰ç«¯å°†æ•°æ®ä½œä¸ºæŸ¥è¯¢å‚æ•°é™„åŠ åˆ°URLçš„æœ«å°¾ã€‚\nç¤ºä¾‹ï¼šhttp://example.com/resource?param1=value1\u0026amp;param2=value2\næ¥æ”¶ï¼šåœ¨åç«¯ï¼Œä½ å¯ä»¥ä½¿ç”¨@RequestParamæ³¨è§£æ¥æ¥æ”¶è¿™äº›å‚æ•°ã€‚\n1 2 3 4 @GetMapping(\u0026#34;/resource\u0026#34;) public ResponseEntity\u0026lt;?\u0026gt; getResource(@RequestParam String param1, @RequestParam String param2) { // å¤„ç†å‚æ•° } 2. é€šè¿‡URLè·¯å¾„å˜é‡ä¼ è¾“\næ–¹å¼ï¼šå‰ç«¯å°†æ•°æ®åµŒå…¥åˆ°URLçš„è·¯å¾„ä¸­ã€‚\nç¤ºä¾‹ï¼šhttp://example.com/resource/123/name\næ¥æ”¶ï¼šåœ¨åç«¯ï¼Œä½ å¯ä»¥ä½¿ç”¨@PathVariableæ³¨è§£æ¥æ¥æ”¶è¿™äº›è·¯å¾„å˜é‡ã€‚\n1 2 3 4 @GetMapping(\u0026#34;/resource/{id}/{name}\u0026#34;) public ResponseEntity\u0026lt;?\u0026gt; getResource(@PathVariable Long id, @PathVariable String name) { // å¤„ç†è·¯å¾„å˜é‡ } 3. é€šè¿‡è¡¨å•æ•°æ®ï¼ˆPOSTè¯·æ±‚ï¼‰ä¼ è¾“\næ–¹å¼ï¼šå‰ç«¯é€šè¿‡HTMLè¡¨å•æˆ–AJAXå‘é€POSTè¯·æ±‚ï¼Œæ•°æ®åœ¨è¯·æ±‚ä½“ä¸­ä½œä¸ºè¡¨å•å­—æ®µä¼ è¾“ã€‚\næ¥æ”¶ï¼šåœ¨åç«¯ï¼Œä½ å¯ä»¥ä½¿ç”¨@ModelAttributeæˆ–@RequestBodyï¼ˆå¦‚æœæ•°æ®æ˜¯JSONæˆ–XMLæ ¼å¼ï¼‰æ¥æ¥æ”¶è¿™äº›æ•°æ®ã€‚å¯¹äºç®€å•çš„è¡¨å•æ•°æ®ï¼Œ@ModelAttributeæ›´å¸¸ç”¨ï¼›å¯¹äºå¤æ‚çš„JSONæˆ–XMLæ•°æ®ï¼Œ@RequestBodyæ›´åˆé€‚ã€‚\n1 2 3 4 5 6 7 8 9 10 11 // ä½¿ç”¨@ModelAttributeæ¥æ”¶ç®€å•çš„è¡¨å•æ•°æ® @PostMapping(\u0026#34;/form\u0026#34;) public ResponseEntity\u0026lt;?\u0026gt; handleFormSubmit(@ModelAttribute FormData formData) { // å¤„ç†è¡¨å•æ•°æ® } // ä½¿ç”¨@RequestBodyæ¥æ”¶JSONæ•°æ® @PostMapping(\u0026#34;/json\u0026#34;) public ResponseEntity\u0026lt;?\u0026gt; handleJsonSubmit(@RequestBody JsonData jsonData) { // å¤„ç†JSONæ•°æ® } 4. é€šè¿‡è¯·æ±‚ä½“ï¼ˆéè¡¨å•æ•°æ®ï¼‰ä¼ è¾“\næ–¹å¼ï¼šå‰ç«¯å‘é€POSTæˆ–PUTè¯·æ±‚ï¼Œæ•°æ®ä½œä¸ºè¯·æ±‚ä½“çš„å†…å®¹ï¼ˆé€šå¸¸æ˜¯JSONã€XMLæˆ–å…¶ä»–æ ¼å¼ï¼‰ä¼ è¾“ã€‚\næ¥æ”¶ï¼šåœ¨åç«¯ï¼Œä½ é€šå¸¸ä½¿ç”¨@RequestBodyæ³¨è§£æ¥æ¥æ”¶è¿™äº›æ•°æ®ï¼Œå¹¶å°†å…¶ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚\n1 2 3 4 @PostMapping(\u0026#34;/data\u0026#34;) public ResponseEntity\u0026lt;?\u0026gt; handleDataSubmit(@RequestBody DataObject dataObject) { // å¤„ç†æ•°æ®å¯¹è±¡ } 5. é€šè¿‡è¯·æ±‚å¤´ä¼ è¾“\næ–¹å¼ï¼šå‰ç«¯å°†æ•°æ®ä½œä¸ºHTTPè¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†å‘é€ã€‚\næ¥æ”¶ï¼šåœ¨åç«¯ï¼Œä½ å¯ä»¥é€šè¿‡@RequestHeaderæ³¨è§£æ¥æ¥æ”¶è¿™äº›è¯·æ±‚å¤´ã€‚\n1 2 3 4 @GetMapping(\u0026#34;/header\u0026#34;) public ResponseEntity\u0026lt;?\u0026gt; getResourceByHeader(@RequestHeader String customHeader) { // å¤„ç†è¯·æ±‚å¤´ } 6. é€šè¿‡æ–‡ä»¶ä¸Šä¼ ä¼ è¾“\næ–¹å¼ï¼šå‰ç«¯é€šè¿‡HTMLè¡¨å•æˆ–AJAXå‘é€æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ï¼Œæ•°æ®ä½œä¸ºæ–‡ä»¶å†…å®¹ä¼ è¾“ã€‚\næ¥æ”¶ï¼šåœ¨åç«¯ï¼Œä½ å¯ä»¥ä½¿ç”¨@RequestParam(\u0026quot;file\u0026quot;) MultipartFile fileæ¥æ¥æ”¶ä¸Šä¼ çš„æ–‡ä»¶ã€‚\n1 2 3 4 @PostMapping(\u0026#34;/upload\u0026#34;) public ResponseEntity\u0026lt;?\u0026gt; handleFileUpload(@RequestParam(\u0026#34;file\u0026#34;) MultipartFile file) { // å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶ } æ€»ç»“\næŸ¥è¯¢å‚æ•°ï¼šé€‚ç”¨äºGETè¯·æ±‚ï¼Œæ•°æ®é‡å°‘ä¸”ç®€å•ã€‚ è·¯å¾„å˜é‡ï¼šé€‚ç”¨äºGETè¯·æ±‚ï¼Œç”¨äºæ ‡è¯†èµ„æºIDæˆ–åç§°ç­‰ã€‚ è¡¨å•æ•°æ®ï¼šé€‚ç”¨äºPOSTè¯·æ±‚ï¼Œæ•°æ®ä½œä¸ºè¡¨å•å­—æ®µä¼ è¾“ã€‚ è¯·æ±‚ä½“ï¼šé€‚ç”¨äºPOSTæˆ–PUTè¯·æ±‚ï¼Œæ•°æ®ä½œä¸ºè¯·æ±‚ä½“å†…å®¹ä¼ è¾“ï¼Œå¯ä»¥æ˜¯JSONã€XMLç­‰æ ¼å¼ã€‚ è¯·æ±‚å¤´ï¼šé€‚ç”¨äºæ‰€æœ‰ç±»å‹çš„è¯·æ±‚ï¼Œæ•°æ®ä½œä¸ºHTTPè¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†ä¼ è¾“ã€‚ æ–‡ä»¶ä¸Šä¼ ï¼šé€‚ç”¨äºPOSTè¯·æ±‚ï¼Œæ•°æ®ä½œä¸ºæ–‡ä»¶å†…å®¹ä¼ è¾“ã€‚ æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„æ•°æ®ä¼ è¾“æ–¹å¼å’Œæ¥æ”¶æ–¹æ³•ã€‚\næ ¹æ®ä½ æä¾›çš„ä¿¡æ¯ï¼Œè¿™é‡Œæ˜¯æ¯ç§æ•°æ®ä¼ è¾“æ–¹å¼å¯¹åº”çš„å‰ç«¯è¯·æ±‚ç¤ºä¾‹ï¼š\né€šè¿‡URLæŸ¥è¯¢å‚æ•°ä¼ è¾“\nå‰ç«¯è¯·æ±‚ç¤ºä¾‹ï¼šä½¿ç”¨JavaScriptçš„fetchå‡½æ•°æˆ–è€…XMLHttpRequestæ¥å‘é€GETè¯·æ±‚ï¼Œå¹¶å°†æŸ¥è¯¢å‚æ•°é™„åŠ åˆ°URLçš„æœ«å°¾ã€‚ ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 fetch(\u0026#39;http://example.com/resource?param1=value1\u0026amp;param2=value2\u0026#39;) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; console.log(data)) .catch(error =\u0026gt; console.error(\u0026#39;Error:\u0026#39;, error)); é€šè¿‡URLè·¯å¾„å˜é‡ä¼ è¾“\nå‰ç«¯è¯·æ±‚ç¤ºä¾‹ï¼šä½¿ç”¨JavaScriptçš„fetchå‡½æ•°æˆ–è€…XMLHttpRequestæ¥å‘é€GETè¯·æ±‚ï¼Œå¹¶å°†æ•°æ®åµŒå…¥åˆ°URLçš„è·¯å¾„ä¸­ã€‚ ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 fetch(\u0026#39;http://example.com/resource/123/name\u0026#39;) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; console.log(data)) .catch(error =\u0026gt; console.error(\u0026#39;Error:\u0026#39;, error)); é€šè¿‡è¡¨å•æ•°æ®ï¼ˆPOSTè¯·æ±‚ï¼‰ä¼ è¾“\nå‰ç«¯è¯·æ±‚ç¤ºä¾‹ï¼šä½¿ç”¨è¡¨å•æˆ–è€…AJAXå‘é€POSTè¯·æ±‚ï¼Œæ•°æ®åœ¨è¯·æ±‚ä½“ä¸­ä½œä¸ºè¡¨å•å­—æ®µä¼ è¾“ã€‚ ç¤ºä¾‹ä»£ç ï¼ˆä½¿ç”¨Fetch APIï¼‰ï¼š 1 2 3 4 5 6 7 8 9 10 11 const formData = new FormData(); formData.append(\u0026#39;param1\u0026#39;, \u0026#39;value1\u0026#39;); formData.append(\u0026#39;param2\u0026#39;, \u0026#39;value2\u0026#39;); fetch(\u0026#39;http://example.com/form\u0026#39;, { method: \u0026#39;POST\u0026#39;, body: formData }) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; console.log(data)) .catch(error =\u0026gt; console.error(\u0026#39;Error:\u0026#39;, error)); é€šè¿‡è¯·æ±‚ä½“ï¼ˆéè¡¨å•æ•°æ®ï¼‰ä¼ è¾“\nå‰ç«¯è¯·æ±‚ç¤ºä¾‹ï¼šå‘é€POSTæˆ–PUTè¯·æ±‚ï¼Œæ•°æ®ä½œä¸ºè¯·æ±‚ä½“çš„å†…å®¹ï¼ˆé€šå¸¸æ˜¯JSONã€XMLæˆ–å…¶ä»–æ ¼å¼ï¼‰ä¼ è¾“ã€‚ ç¤ºä¾‹ä»£ç ï¼ˆä½¿ç”¨Fetch APIå‘é€JSONæ•°æ®ï¼‰ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 const data = { key1: \u0026#39;value1\u0026#39;, key2: \u0026#39;value2\u0026#39; }; fetch(\u0026#39;http://example.com/data\u0026#39;, { method: \u0026#39;POST\u0026#39;, headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, }, body: JSON.stringify(data), }) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; console.log(data)) .catch(error =\u0026gt; console.error(\u0026#39;Error:\u0026#39;, error)); é€šè¿‡è¯·æ±‚å¤´ä¼ è¾“\nå‰ç«¯è¯·æ±‚ç¤ºä¾‹ï¼šå°†æ•°æ®ä½œä¸ºHTTPè¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†å‘é€ã€‚ ç¤ºä¾‹ä»£ç ï¼ˆä½¿ç”¨Fetch APIï¼‰ï¼š 1 2 3 4 5 6 7 8 9 fetch(\u0026#39;http://example.com/header\u0026#39;, { method: \u0026#39;GET\u0026#39;, headers: { \u0026#39;Custom-Header\u0026#39;: \u0026#39;value\u0026#39; } }) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; console.log(data)) .catch(error =\u0026gt; console.error(\u0026#39;Error:\u0026#39;, error)); é€šè¿‡æ–‡ä»¶ä¸Šä¼ ä¼ è¾“\nå‰ç«¯è¯·æ±‚ç¤ºä¾‹ï¼šé€šè¿‡HTMLè¡¨å•æˆ–AJAXå‘é€æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ï¼Œæ•°æ®ä½œä¸ºæ–‡ä»¶å†…å®¹ä¼ è¾“ã€‚ ç¤ºä¾‹ä»£ç ï¼ˆä½¿ç”¨Fetch APIä¸Šä¼ æ–‡ä»¶ï¼‰ï¼š 1 2 3 4 5 6 7 8 9 10 11 const formData = new FormData(); const fileInput = document.querySelector(\u0026#39;input[type=\u0026#34;file\u0026#34;]\u0026#39;); formData.append(\u0026#39;file\u0026#39;, fileInput.files[0]); fetch(\u0026#39;http://example.com/upload\u0026#39;, { method: \u0026#39;POST\u0026#39;, body: formData }) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; console.log(data)) .catch(error =\u0026gt; console.error(\u0026#39;Error:\u0026#39;, error)); è¿™äº›ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨JavaScriptçš„Fetch APIæ¥å‘é€ä¸åŒç±»å‹çš„è¯·æ±‚ã€‚å¯¹äºHTMLè¡¨å•ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨è¡¨å•æ ‡ç­¾ä¸­è®¾ç½®actionå’Œmethodå±æ€§ï¼Œå¹¶é€šè¿‡æµè§ˆå™¨çš„åŸç”Ÿè¡¨å•æäº¤åŠŸèƒ½æ¥å‘é€è¯·æ±‚ã€‚\nRç±» ä¸ºäº†æ–¹ä¾¿å‰åç«¯æ•°æ®çš„ä¼ è¾“è€Œå¼•å‡ºçš„ç±»ï¼Œå®ƒå¯ä»¥å®šä¹‰ä¸€äº›èƒ½å¤Ÿå°†å‰ç«¯éœ€è¦çš„ä¿¡æ¯å“åº”è¿‡å»çš„å±æ€§ï¼Œä»è€Œè¾¾åˆ°æ–¹æ¯”é‚£ä¼ è¾“çš„ç›®çš„ã€‚\nå¯¹æ­¤å¤„ç±»çš„è§£æã€‚å®ƒä¸€ä¸ªéå¸¸å¥½çš„ç‚¹å°±æ˜¯åˆ©ç”¨äº†æ³›å‹ï¼Œå¯ä»¥æ¥æ”¶å„ç§ç±»å‹çš„å˜é‡ã€‚\nèµ·åˆå°±åœ¨ç±»é¦–éƒ¨å®šä¹‰ä¸ºclass Rï¼Œå¥½åƒä¹Ÿå¯ä»¥å®šä¹‰å¤šä¸ªæ³›å‹ã€‚é‚£ä¹ˆå°±å¯ä»¥å»å®šä¹‰æ³›å‹æ•°æ®private T data;æ¥ç€å»æ–¹æ³•é‡Œè¿è¡Œã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 /** * é€šç”¨è¿”å›ç»“æœï¼ŒæœåŠ¡ç«¯å“åº”çš„æ•°æ®æœ€ç»ˆéƒ½ä¼šå°è£…æˆæ­¤å¯¹è±¡ * @param \u0026lt;T\u0026gt; */ @Data public class R\u0026lt;T\u0026gt; { private Integer code; //ç¼–ç ï¼š1æˆåŠŸï¼Œ0å’Œå…¶å®ƒæ•°å­—ä¸ºå¤±è´¥ private String msg; //é”™è¯¯ä¿¡æ¯ private T data; //æ•°æ® private Map map = new HashMap(); //åŠ¨æ€æ•°æ® public static \u0026lt;T\u0026gt; R\u0026lt;T\u0026gt; success(T object) { R\u0026lt;T\u0026gt; r = new R\u0026lt;T\u0026gt;(); r.data = object; r.code = 1; return r; } public static \u0026lt;T\u0026gt; R\u0026lt;T\u0026gt; error(String msg) { R r = new R(); r.msg = msg; r.code = 0; return r; } public R\u0026lt;T\u0026gt; add(String key, Object value) { this.map.put(key, value); return this; } } 1 2 3 4 5 6 public static \u0026lt;T\u0026gt; R\u0026lt;T\u0026gt; success(T object) { R\u0026lt;T\u0026gt; r = new R\u0026lt;T\u0026gt;(); r.data = object; r.code = 1; return r; } å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ä¾‹å¦‚ï¼š\n1 2 3 4 5 public R\u0026lt;String\u0026gt; logout(HttpServletRequest request){ //æ¸…ç†Sessionä¸­ä¿å­˜çš„å½“å‰ç™»å½•å‘˜å·¥çš„id request.getSession().removeAttribute(\u0026#34;employee\u0026#34;); return R.success(\u0026#34;é€€å‡ºæˆåŠŸ\u0026#34;); } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 public R\u0026lt;Employee\u0026gt; login(HttpServletRequest request,@RequestBody Employee employee){ String password = employee.getPassword(); password = DigestUtils.md5DigestAsHex(password.getBytes()); LambdaQueryWrapper\u0026lt;Employee\u0026gt; queryWrapper = new LambdaQueryWrapper\u0026lt;\u0026gt;(); queryWrapper.eq(Employee::getUsername,employee.getUsername()); Employee emp = employeeService.getOne(queryWrapper); if(emp == null){ return R.error(\u0026#34;ç™»å½•å¤±è´¥\u0026#34;); } if(!emp.getPassword().equals(password)){ return R.error(\u0026#34;ç™»å½•å¤±è´¥\u0026#34;); } if(emp.getStatus() == 0){ return R.error(\u0026#34;è´¦å·å·²ç¦ç”¨\u0026#34;); } request.getSession().setAttribute(\u0026#34;employee\u0026#34;,emp.getId()); return R.success(emp); } MPçš„åˆ†é¡µæ’ä»¶ ä¸ºäº†ä¸å¾ˆéº»çƒ¦åœ°æ‰‹åŠ¨å†™sqlè¯­å¥è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œæ­¤å¤„é€‰ç”¨é…ç½®MPåˆ†é¡µæ’ä»¶æ¥æ–¹ä¾¿æŸ¥è¯¢ã€‚\n1 2 3 4 5 6 7 8 9 10 @Configuration public class MybatisPlusConfig { @Bean public MybatisPlusInterceptor mybatisPlusInterceptor(){ MybatisPlusInterceptor mybatisPlusInterceptor = new MybatisPlusInterceptor(); mybatisPlusInterceptor.addInnerInterceptor(new PaginationInnerInterceptor()); return mybatisPlusInterceptor; } } å…·ä½“çš„ä½¿ç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 @GetMapping(\u0026#34;/page\u0026#34;) public R\u0026lt;Page\u0026gt; page(int page,int pageSize,String name){ log.info(\u0026#34;page = {},pageSize = {},name = {}\u0026#34; ,page,pageSize,name); //æ„é€ åˆ†é¡µæ„é€ å™¨ Page pageInfo = new Page(page,pageSize); //æ„é€ æ¡ä»¶æ„é€ å™¨ LambdaQueryWrapper\u0026lt;Employee\u0026gt; queryWrapper = new LambdaQueryWrapper(); //æ·»åŠ è¿‡æ»¤æ¡ä»¶ queryWrapper.like(StringUtils.isNotEmpty(name),Employee::getName,name); //æ·»åŠ æ’åºæ¡ä»¶ queryWrapper.orderByDesc(Employee::getUpdateTime); //æ‰§è¡ŒæŸ¥è¯¢ employeeService.page(pageInfo,queryWrapper); return R.success(pageInfo); } MyBatis-Plusä¸­ï¼ŒMybatisPlusInterceptor æ˜¯ä¸€ä¸ªæ ¸å¿ƒçš„ç»„ä»¶ï¼Œå®ƒå…è®¸ä½ æ’å…¥è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨æ¥å¤„ç†MyBatisçš„æ‰§è¡Œæ“ä½œã€‚å½“ä½ é…ç½®äº† MybatisPlusInterceptor å¹¶æ·»åŠ äº† PaginationInnerInterceptor ä½œä¸ºå…¶å†…éƒ¨æ‹¦æˆªå™¨æ—¶ï¼Œè¿™ä¸ªåˆ†é¡µæ‹¦æˆªå™¨ä¼šåœ¨æ‰§è¡ŒæŸ¥è¯¢æ“ä½œæ—¶è‡ªåŠ¨ä»‹å…¥ï¼Œå¤„ç†åˆ†é¡µé€»è¾‘ã€‚\nå³ä½¿ä½ æ²¡æœ‰åœ¨ä»£ç ä¸­æ˜¾å¼åœ°â€œä½¿ç”¨â€æ‹¦æˆªå™¨ï¼Œåªè¦ä½ æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®äº†æ‹¦æˆªå™¨ï¼Œå®ƒå°±ä¼šåœ¨åå°è‡ªåŠ¨å·¥ä½œï¼š\nä½ çš„ä»£ç ä¸­ç¡®å®ä½¿ç”¨äº†MyBatis-Plusçš„åˆ†é¡µåŠŸèƒ½ï¼Œå¹¶ä¸”ç”¨åˆ°äº†åˆ†é¡µæ’ä»¶ã€‚è®©æˆ‘ä»¬é€æ­¥åˆ†æä½ çš„ä»£ç ï¼Œçœ‹çœ‹åˆ†é¡µæ˜¯å¦‚ä½•å®ç°çš„ï¼š\n@GetMapping(\u0026quot;/page\u0026quot;)ï¼šè¿™æ˜¯ä¸€ä¸ªSpring MVCæ³¨è§£ï¼Œç”¨äºå°†HTTP GETè¯·æ±‚æ˜ å°„åˆ°pageæ–¹æ³•ä¸Šã€‚\npublic R\u0026lt;Page\u0026gt; page(int page, int pageSize, String name) { ... }ï¼šè¿™æ˜¯æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰é¡µç ã€æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°å’Œä¸€ä¸ªåå­—æœç´¢æ¡ä»¶ï¼Œå¹¶è¿”å›ä¸€ä¸ªåˆ†é¡µç»“æœã€‚\nlog.info(\u0026quot;page = {},pageSize = {},name = {}\u0026quot;, page, pageSize, name);ï¼šè¿™è¡Œä»£ç ä½¿ç”¨SLF4Jæ—¥å¿—è®°å½•è¯·æ±‚çš„åˆ†é¡µå‚æ•°ï¼Œæœ‰åŠ©äºè°ƒè¯•ã€‚\nPage pageInfo = new Page(page, pageSize);ï¼šè¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Pageå¯¹è±¡ï¼Œå®ƒæ˜¯MyBatis-Plusåˆ†é¡µåŠŸèƒ½çš„è½½ä½“ï¼ŒåŒ…å«äº†åˆ†é¡µçš„è¯·æ±‚å‚æ•°ã€‚\nLambdaQueryWrapper\u0026lt;Employee\u0026gt; queryWrapper = new LambdaQueryWrapper\u0026lt;\u0026gt;();ï¼šåˆ›å»ºäº†ä¸€ä¸ªç”¨äºæ„å»ºæŸ¥è¯¢æ¡ä»¶çš„LambdaQueryWrapperå¯¹è±¡ã€‚\nqueryWrapper.like(StringUtils.isNotEmpty(name), Employee::getName, name);ï¼šå¦‚æœnameå‚æ•°ä¸ä¸ºç©ºï¼Œåˆ™æ·»åŠ ä¸€ä¸ªæ¨¡ç³ŠåŒ¹é…æ¡ä»¶ï¼Œç”¨äºæœç´¢å‘˜å·¥åç§°ã€‚\nqueryWrapper.orderByDesc(Employee::getUpdateTime);ï¼šè®¾ç½®æŸ¥è¯¢ç»“æœæŒ‰å‘˜å·¥æ›´æ–°æ—¶é—´é™åºæ’åºã€‚\nemployeeService.page(pageInfo, queryWrapper);ï¼šè¿™æ˜¯å…³é”®çš„ä¸€æ­¥ï¼Œå®ƒè°ƒç”¨äº†employeeServiceçš„pageæ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨ï¼ŒMyBatis-Plusä¼šåˆ©ç”¨ä½ ä¹‹å‰é…ç½®çš„MybatisPlusInterceptorå’Œå…¶ä¸­çš„PaginationInnerInterceptoræ¥å¤„ç†åˆ†é¡µé€»è¾‘ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªIPageç±»å‹çš„ç»“æœï¼Œå®ƒåŒ…å«äº†åˆ†é¡µæŸ¥è¯¢çš„ç»“æœä»¥åŠåˆ†é¡µä¿¡æ¯ï¼ˆå¦‚æ€»è®°å½•æ•°ã€æ€»é¡µæ•°ç­‰ï¼‰ã€‚\nreturn R.success(pageInfo);ï¼šæœ€åï¼Œæ–¹æ³•è¿”å›ä¸€ä¸ªæˆåŠŸçš„å“åº”ï¼Œå…¶ä¸­åŒ…å«äº†åˆ†é¡µä¿¡æ¯å’ŒæŸ¥è¯¢ç»“æœã€‚\nä½ çš„ä»£ç ä¸­æ²¡æœ‰ç›´æ¥å¼•ç”¨MybatisPlusInterceptoræˆ–PaginationInnerInterceptorï¼Œæ˜¯å› ä¸ºè¿™äº›ç»„ä»¶æ˜¯åœ¨Spring Bootçš„é…ç½®ç±»ä¸­é…ç½®çš„ï¼Œé€šå¸¸æ˜¯åœ¨application.ymlæˆ–application.propertiesæ–‡ä»¶ä¸­é…ç½®ï¼Œæˆ–è€…å¦‚å‰æ‰€è¿°ï¼Œåœ¨Javaé…ç½®ç±»ä¸­é€šè¿‡@Beanæ–¹æ³•é…ç½®ã€‚ä¸€æ—¦é…ç½®å®Œæˆï¼Œè¿™äº›æ‹¦æˆªå™¨å°±ä¼šè‡ªåŠ¨åœ¨MyBatis-Plusæ‰§è¡ŒæŸ¥è¯¢æ—¶èµ·ä½œç”¨ã€‚\nå› æ­¤ï¼Œå³ä½¿ä½ çš„ä»£ç ä¸­æ²¡æœ‰æ˜¾å¼åœ°â€œä½¿ç”¨â€åˆ†é¡µæ’ä»¶ï¼Œåªè¦ä½ æŒ‰ç…§å‰é¢çš„æ­¥éª¤é…ç½®äº†MybatisPlusInterceptorå’ŒPaginationInnerInterceptorï¼Œå®ƒä»¬å°±ä¼šåœ¨åå°è‡ªåŠ¨å·¥ä½œï¼Œä¸ºä½ çš„åˆ†é¡µæŸ¥è¯¢æä¾›æ”¯æŒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ çš„ä»£ç èƒ½å¤Ÿå®ç°åˆ†é¡µåŠŸèƒ½çš„åŸå› ã€‚\næ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ä¸è¿‡æ»¤å™¨ï¼ˆFilterï¼‰çš„åŒºåˆ«ï¼š\nè¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼š å·¥ä½œåœ¨Webåº”ç”¨æœåŠ¡å™¨çš„Servletå±‚é¢ï¼Œå¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾Servletä¹‹å‰æˆ–å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ä¹‹å‰è¿›è¡Œæ‹¦æˆªå¤„ç†ã€‚ ä¸»è¦ç”¨äºå¤„ç†Webè¯·æ±‚çš„é¢„å¤„ç†å’Œåå¤„ç†ï¼Œå¦‚æ—¥å¿—è®°å½•ã€æƒé™æ£€æŸ¥ã€è¯·æ±‚å†…å®¹ä¿®æ”¹ç­‰ã€‚ é€šå¸¸ç”¨äºå¤„ç†HTTPè¯·æ±‚å’Œå“åº”ã€‚ æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ï¼š å·¥ä½œåœ¨æ¡†æ¶å±‚é¢ï¼Œå¦‚Springæˆ–MyBatisï¼Œå¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘æ‰§è¡Œå‰åè¿›è¡Œæ‹¦æˆªå¤„ç†ã€‚ ä¸»è¦ç”¨äºå¤„ç†ç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘ï¼Œå¦‚äº‹åŠ¡ç®¡ç†ã€æ—¥å¿—è®°å½•ã€æ€§èƒ½ç›‘æ§ç­‰ã€‚ å¯ä»¥æ›´ç»†ç²’åº¦åœ°æ§åˆ¶ä¸šåŠ¡é€»è¾‘çš„æ‰§è¡Œæµç¨‹ã€‚ åœ¨MyBatis-Plusä¸­ï¼ŒMybatisPlusInterceptor åŠå…¶å†…éƒ¨æ‹¦æˆªå™¨ï¼ˆå¦‚ PaginationInnerInterceptorï¼‰é€šå¸¸ç”¨äºå¤„ç†åˆ†é¡µæŸ¥è¯¢ã€‚ä¸‹é¢æˆ‘å°†ç»™å‡ºä¸¤ä¸ªæ¡ˆä¾‹ï¼Œä¸€ä¸ªä½¿ç”¨ PaginationInnerInterceptor è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œå¦ä¸€ä¸ªä¸ä½¿ç”¨å®ƒã€‚\nä½¿ç”¨ PaginationInnerInterceptor çš„æ¡ˆä¾‹ï¼š\nåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ MybatisPlusInterceptor å’Œ PaginationInnerInterceptor æ¥å®ç°åˆ†é¡µæŸ¥è¯¢ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦é…ç½® MybatisPlusConfig ç±»ï¼Œå¦‚ä½ ä¹‹å‰æ‰€ç¤ºï¼š\n1 2 3 4 5 6 7 8 9 10 @Configuration public class MybatisPlusConfig { @Bean public MybatisPlusInterceptor mybatisPlusInterceptor(){ MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor(); interceptor.addInnerInterceptor(new PaginationInnerInterceptor()); return interceptor; } } ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å±‚ï¼ˆServiceï¼‰ä½¿ç”¨ Page å¯¹è±¡æ¥æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 @Service public class EmployeeService { @Autowired private EmployeeMapper employeeMapper; public IPage\u0026lt;Employee\u0026gt; getEmployeesByPage(int currentPage, int pageSize) { Page\u0026lt;Employee\u0026gt; page = new Page\u0026lt;\u0026gt;(currentPage, pageSize); IPage\u0026lt;Employee\u0026gt; employeePage = employeeMapper.selectPage(page, null); return employeePage; } } åœ¨æ§åˆ¶å™¨å±‚ï¼ˆControllerï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ”¶åˆ†é¡µå‚æ•°å¹¶è°ƒç”¨æœåŠ¡å±‚çš„æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 @RestController @RequestMapping(\u0026#34;/employees\u0026#34;) public class EmployeeController { @Autowired private EmployeeService employeeService; @GetMapping(\u0026#34;/page\u0026#34;) public R\u0026lt;IPage\u0026lt;Employee\u0026gt;\u0026gt; getEmployeesByPage(@RequestParam int page, @RequestParam int size) { IPage\u0026lt;Employee\u0026gt; employeePage = employeeService.getEmployeesByPage(page, size); return R.ok().data(\u0026#34;items\u0026#34;, employeePage.getRecords()).extra(\u0026#34;total\u0026#34;, employeePage.getTotal()); } } ä¸ä½¿ç”¨ PaginationInnerInterceptor çš„æ¡ˆä¾‹ï¼š\nå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨ PaginationInnerInterceptorï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨æ¯æ¬¡æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢æ—¶æ‰‹åŠ¨ç¼–å†™åˆ†é¡µé€»è¾‘ã€‚è¿™é€šå¸¸æ¶‰åŠåˆ°ç¼–å†™ç‰¹å®šçš„SQLè¯­å¥æ¥å®ç°åˆ†é¡µï¼Œæˆ–è€…åœ¨åº”ç”¨å±‚æ‰‹åŠ¨å¤„ç†åˆ†é¡µé€»è¾‘ã€‚\nä¾‹å¦‚ï¼Œä¸ä½¿ç”¨åˆ†é¡µæ‹¦æˆªå™¨æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨Mapperæ¥å£ä¸­å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„åˆ†é¡µæŸ¥è¯¢æ–¹æ³•ï¼Œå¹¶åœ¨XMLæ–‡ä»¶ä¸­ç¼–å†™ç›¸åº”çš„SQLï¼š\n1 2 3 4 // EmployeeMapper.java public interface EmployeeMapper extends BaseMapper\u0026lt;Employee\u0026gt; { IPage\u0026lt;Employee\u0026gt; selectPageWithCustomSql(IPage\u0026lt;?\u0026gt; page, @Param(\u0026#34;name\u0026#34;) String name); } åœ¨XMLæ–‡ä»¶ä¸­ï¼š\n1 2 3 4 5 6 \u0026lt;!-- EmployeeMapper.xml --\u0026gt; \u0026lt;select id=\u0026#34;selectPageWithCustomSql\u0026#34; resultType=\u0026#34;Employee\u0026#34;\u0026gt; SELECT * FROM employee WHERE name LIKE CONCAT(\u0026#39;%\u0026#39;, #{name}, \u0026#39;%\u0026#39;) LIMIT #{page.offset}, #{page.size} \u0026lt;/select\u0026gt; åœ¨æœåŠ¡å±‚ï¼Œæˆ‘ä»¬è°ƒç”¨è¿™ä¸ªè‡ªå®šä¹‰çš„åˆ†é¡µæŸ¥è¯¢æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 @Service public class EmployeeService { @Autowired private EmployeeMapper employeeMapper; public IPage\u0026lt;Employee\u0026gt; getEmployeesByPage(int currentPage, int pageSize, String name) { Page\u0026lt;Employee\u0026gt; page = new Page\u0026lt;\u0026gt;(currentPage, pageSize); IPage\u0026lt;Employee\u0026gt; employeePage = employeeMapper.selectPageWithCustomSql(page, name); return employeePage; } } åœ¨æ§åˆ¶å™¨å±‚ï¼Œæˆ‘ä»¬åŒæ ·æ¥æ”¶åˆ†é¡µå‚æ•°å¹¶è°ƒç”¨æœåŠ¡å±‚çš„æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 @RestController @RequestMapping(\u0026#34;/employees\u0026#34;) public class EmployeeController { @Autowired private EmployeeService employeeService; @GetMapping(\u0026#34;/page\u0026#34;) public R\u0026lt;IPage\u0026lt;Employee\u0026gt;\u0026gt; getEmployeesByPage(@RequestParam int page, @RequestParam int size, @RequestParam String name) { IPage\u0026lt;Employee\u0026gt; employeePage = employeeService.getEmployeesByPage(page, size, name); return R.ok().data(\u0026#34;items\u0026#34;, employeePage.getRecords()).extra(\u0026#34;total\u0026#34;, employeePage.getTotal()); } } åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ PaginationInnerInterceptorï¼Œå› æ­¤éœ€è¦åœ¨æ¯æ¬¡æŸ¥è¯¢æ—¶æ‰‹åŠ¨å¤„ç†åˆ†é¡µé€»è¾‘ï¼Œè¿™å¢åŠ äº†ä»£ç çš„å¤æ‚æ€§ï¼Œå¹¶ä¸”é™ä½äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ä½¿ç”¨ PaginationInnerInterceptor å¯ä»¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œä½¿å¾—åˆ†é¡µæŸ¥è¯¢æ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆã€‚\nMyBatis-Plus æä¾›äº†å¤šç§å†…ç½®æ‹¦æˆªå™¨ï¼Œé™¤äº†åˆ†é¡µæ‹¦æˆªå™¨ PaginationInnerInterceptor å¤–ï¼Œè¿˜åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ç§ï¼š\nå¤šç§Ÿæˆ·æ’ä»¶ TenantLineInnerInterceptorï¼šç”¨äºå®ç°å¤šç§Ÿæˆ·åœºæ™¯ä¸‹çš„æ•°æ®éš”ç¦»ã€‚é€šè¿‡è¿™ä¸ªæ‹¦æˆªå™¨ï¼Œå¯ä»¥æ ¹æ®ç§Ÿæˆ·çš„IDæˆ–å…¶ä»–æ ‡è¯†æ¥åŠ¨æ€ä¿®æ”¹SQLï¼Œä»¥ç¡®ä¿æ¯ä¸ªç§Ÿæˆ·åªèƒ½è®¿é—®åˆ°è‡ªå·±çš„æ•°æ®ã€‚è¿™å¯¹äºSaaSåº”ç”¨å°¤å…¶æœ‰ç”¨ã€‚\nåŠ¨æ€è¡¨åæ’ä»¶ DynamicTableNameInnerInterceptorï¼šå…è®¸åœ¨è¿è¡Œæ—¶åŠ¨æ€æ”¹å˜è¡¨åã€‚è¿™å¯¹äºéœ€è¦æ ¹æ®ä¸åŒæ¡ä»¶è®¿é—®ä¸åŒæ•°æ®åº“è¡¨çš„åœºæ™¯éå¸¸æœ‰ç”¨ã€‚\nä¹è§‚é”æ’ä»¶ OptimisticLockerInnerInterceptorï¼šæä¾›äº†ä¹è§‚é”æœºåˆ¶ï¼Œç”¨äºå¤„ç†å¹¶å‘æ›´æ–°æ•°æ®æ—¶å¯èƒ½å‡ºç°çš„å†²çªã€‚é€šè¿‡ç‰ˆæœ¬å·æˆ–å…¶ä»–æœºåˆ¶æ¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚\nSQLæ€§èƒ½è§„èŒƒæ’ä»¶ IllegalSQLInnerInterceptorï¼šç”¨äºæ£€æŸ¥å’Œé˜²æ­¢æ‰§è¡Œå¯èƒ½å½±å“æ•°æ®åº“æ€§èƒ½çš„SQLè¯­å¥ï¼Œå¦‚æ²¡æœ‰WHEREå­å¥çš„UPDATEæˆ–DELETEè¯­å¥ã€‚\né˜²æ­¢å…¨è¡¨æ›´æ–°ä¸åˆ é™¤æ’ä»¶ BlockAttackInnerInterceptorï¼šç”¨äºé˜²æ­¢æ‰§è¡Œå¯èƒ½å¯¼è‡´å…¨è¡¨æ‰«ææˆ–é”å®šçš„æœ‰å®³SQLè¯­å¥ï¼Œå¦‚ä¸å¸¦WHEREå­å¥çš„UPDATEæˆ–DELETEæ“ä½œã€‚\næ•°æ®æƒé™æ§åˆ¶æ‹¦æˆªå™¨ï¼šå¯ä»¥å®ç°åŸºäºç”¨æˆ·æƒé™çš„åŠ¨æ€SQLä¿®æ”¹ï¼Œä»¥æ§åˆ¶ä¸åŒç”¨æˆ·å¯ä»¥è®¿é—®çš„æ•°æ®èŒƒå›´ã€‚è¿™é€šå¸¸é€šè¿‡è‡ªå®šä¹‰æ‹¦æˆªå™¨å®ç°ï¼Œæ ¹æ®å½“å‰ç”¨æˆ·çš„è§’è‰²æˆ–æƒé™æ¥ä¿®æ”¹SQLè¯­å¥ã€‚\nè‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼šé™¤äº†å†…ç½®çš„æ‹¦æˆªå™¨ï¼ŒMyBatis-Plus ä¹Ÿæ”¯æŒå¼€å‘è€…æ ¹æ®å…·ä½“éœ€æ±‚è‡ªå®šä¹‰æ‹¦æˆªå™¨ã€‚è‡ªå®šä¹‰æ‹¦æˆªå™¨å¯ä»¥å®ç°å„ç§åŠŸèƒ½ï¼Œå¦‚æ·»åŠ ç§Ÿæˆ·éš”ç¦»ã€å®¡è®¡æ—¥å¿—è®°å½•ã€SQLä¼˜åŒ–ç­‰ã€‚\nè¿™äº›æ‹¦æˆªå™¨å¯ä»¥é€šè¿‡é…ç½®ç±» MybatisPlusConfig è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 @Configuration public class MybatisPlusConfig { @Bean public MybatisPlusInterceptor mybatisPlusInterceptor(){ MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor(); interceptor.addInnerInterceptor(new PaginationInnerInterceptor()); // æ·»åŠ å…¶ä»–æ‹¦æˆªå™¨ interceptor.addInnerInterceptor(new TenantLineInnerInterceptor()); interceptor.addInnerInterceptor(new DynamicTableNameInnerInterceptor()); // ...æ·»åŠ æ›´å¤šæ‹¦æˆªå™¨ return interceptor; } } é‚£ä¹ˆå®é™…å¼€å‘ä¸­ï¼Œæ ¹æ®é¡¹ç›®çš„å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ‹¦æˆªå™¨è¿›è¡Œé…ç½®ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å¢å¼ºMyBatis-Plusçš„åŠŸèƒ½ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½ã€‚\nPageç±» åœ¨MyBatis-Plusä¸­ï¼ŒPage ç±»æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç±»ï¼Œå®ƒç”¨äºæ‰¿è½½åˆ†é¡µæŸ¥è¯¢çš„è¯·æ±‚å‚æ•°ä»¥åŠè¿”å›çš„åˆ†é¡µç»“æœã€‚å½“ä½ æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢å¹¶è·å¾—ç»“æœæ—¶ï¼ŒPage å¯¹è±¡åŒ…å«äº†ä»¥ä¸‹ä¸»è¦å†…å®¹ï¼š\nå½“å‰é¡µç ï¼ˆCurrent Pageï¼‰ï¼š\nè¡¨ç¤ºè¯·æ±‚çš„é¡µç ï¼Œå³ç”¨æˆ·è¯·æ±‚æŸ¥çœ‹çš„æ˜¯å“ªä¸€é¡µçš„æ•°æ®ã€‚ æ¯é¡µæ•°é‡ï¼ˆPage Sizeï¼‰ï¼š\nè¡¨ç¤ºæ¯ä¸€é¡µæ˜¾ç¤ºçš„è®°å½•æ•°ã€‚ æ€»è®°å½•æ•°ï¼ˆTotal Countï¼‰ï¼š\nè¡¨ç¤ºæŸ¥è¯¢æ¡ä»¶ä¸‹çš„æ€»è®°å½•æ•°ã€‚è¿™ä¸ªæ•°å­—æ˜¯é€šè¿‡å¯¹æ•´ä¸ªæ•°æ®é›†è¿›è¡Œè®¡æ•°è·å¾—çš„ï¼Œå¯¹äºåˆ†é¡µæŸ¥è¯¢æ¥è¯´ï¼Œè¿™ä¸ªæ•°å­—æ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºå®ƒå†³å®šäº†å¯ä»¥åˆ†å¤šå°‘é¡µã€‚ æ€»é¡µæ•°ï¼ˆTotal Pagesï¼‰ï¼š\næ ¹æ®æ€»è®°å½•æ•°å’Œæ¯é¡µæ•°é‡è®¡ç®—å‡ºçš„æ€»é¡µæ•°ã€‚å¦‚æœæ€»è®°å½•æ•°ä¸èƒ½è¢«æ¯é¡µæ•°é‡æ•´é™¤ï¼Œæ€»é¡µæ•°ä¼šå‘ä¸Šå–æ•´ã€‚ è®°å½•åˆ—è¡¨ï¼ˆRecordsï¼‰ï¼š\nåŒ…å«äº†å½“å‰é¡µçš„è®°å½•åˆ—è¡¨ã€‚è¿™æ˜¯æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢åï¼Œæ•°æ®åº“è¿”å›çš„å½“å‰é¡µçš„æ•°æ®è®°å½•ã€‚ æ˜¯å¦ç¬¬ä¸€é¡µï¼ˆIs First Pageï¼‰ï¼š\nä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰é¡µæ˜¯å¦æ˜¯ç¬¬ä¸€é¡µã€‚ æ˜¯å¦æœ€åä¸€é¡µï¼ˆIs Last Pageï¼‰ï¼š\nä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰é¡µæ˜¯å¦æ˜¯æœ€åä¸€é¡µã€‚ æ˜¯å¦æœ‰å‰ä¸€é¡µï¼ˆHas Previous Pageï¼‰ï¼š\nä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰é¡µæ˜¯å¦æœ‰å‰ä¸€é¡µã€‚ æ˜¯å¦æœ‰ä¸‹ä¸€é¡µï¼ˆHas Next Pageï¼‰ï¼š\nä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰é¡µæ˜¯å¦æœ‰ä¸‹ä¸€é¡µã€‚ åˆ†é¡µå‚æ•°ï¼ˆPage Parametersï¼‰ï¼š\nå¯èƒ½åŒ…å«ä¸€äº›é¢å¤–çš„åˆ†é¡µå‚æ•°ï¼Œå¦‚æ’åºä¿¡æ¯ç­‰ã€‚ å½“ä½ ä½¿ç”¨ employeeService.page(pageInfo, queryWrapper) æ–¹æ³•æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢æ—¶ï¼ŒMyBatis-Plusæ¡†æ¶ä¼šåœ¨å†…éƒ¨å¤„ç†åˆ†é¡µé€»è¾‘ï¼Œå¹¶å¡«å…… Page å¯¹è±¡çš„ä¸Šè¿°å±æ€§ã€‚æœ€ç»ˆï¼Œä½ å¯ä»¥é€šè¿‡è¿”å›çš„ Page å¯¹è±¡è·å–åˆ°æ‰€æœ‰è¿™äº›åˆ†é¡µä¿¡æ¯ï¼Œä»¥åŠå½“å‰é¡µçš„æ•°æ®è®°å½•ã€‚\nåœ¨å®é™…çš„Webåº”ç”¨ä¸­ï¼Œè¿™äº›ä¿¡æ¯é€šå¸¸è¢«ç”¨æ¥æ„å»ºåˆ†é¡µå¯¼èˆªï¼Œä»¥åŠå±•ç¤ºå½“å‰é¡µçš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨æ€»é¡µæ•°æ¥ç”Ÿæˆåˆ†é¡µæ§ä»¶ä¸­çš„é¡µç é“¾æ¥ï¼Œä½¿ç”¨è®°å½•åˆ—è¡¨æ¥æ˜¾ç¤ºå½“å‰é¡µçš„æ•°æ®ã€‚\nå¯¹åº”å‰ç«¯ä»£ç  åœ¨å‰ç«¯ä½¿ç”¨Vue.jså¤„ç†åˆ†é¡µæ•°æ®ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªVueç»„ä»¶æ¥å‘é€è¯·æ±‚ã€å¤„ç†å“åº”å¹¶å±•ç¤ºæ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨Vue 2.xç‰ˆæœ¬çš„ç¤ºä¾‹ï¼š\n1. åˆ›å»ºVueç»„ä»¶\né¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»åœ¨ä½ çš„é¡¹ç›®ä¸­å®‰è£…äº†Axiosï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå‘é€HTTPè¯·æ±‚çš„åº“ã€‚å¦‚æœè¿˜æ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š\n1 npm install axios ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºEmployeePage.vueçš„Vueç»„ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 \u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;Employee List\u0026lt;/h1\u0026gt; \u0026lt;input v-model=\u0026#34;searchName\u0026#34; placeholder=\u0026#34;Search by name\u0026#34; @input=\u0026#34;fetchPageData\u0026#34; /\u0026gt; \u0026lt;table\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th\u0026gt;Name\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;Age\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;Update Time\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;tr v-for=\u0026#34;employee in pageInfo.records\u0026#34; :key=\u0026#34;employee.id\u0026#34;\u0026gt; \u0026lt;td\u0026gt;{{ employee.name }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ employee.age }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ formatDate(employee.updateTime) }}\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;div class=\u0026#34;pagination\u0026#34;\u0026gt; \u0026lt;button v-if=\u0026#34;pageInfo.current \u0026gt; 1\u0026#34; @click=\u0026#34;fetchPageData(pageInfo.current - 1, pageInfo.size)\u0026#34; \u0026gt; Previous \u0026lt;/button\u0026gt; \u0026lt;span\u0026gt;{{ pageInfo.current }}\u0026lt;/span\u0026gt; of \u0026lt;span\u0026gt;{{ pageInfo.pages }}\u0026lt;/span\u0026gt; \u0026lt;button v-if=\u0026#34;pageInfo.current \u0026lt; pageInfo.pages\u0026#34; @click=\u0026#34;fetchPageData(pageInfo.current + 1, pageInfo.size)\u0026#34; \u0026gt; Next \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; import axios from \u0026#39;axios\u0026#39;; export default { data() { return { pageInfo: { records: [] }, searchName: \u0026#39;\u0026#39;, currentPage: 1, pageSize: 10 }; }, methods: { async fetchPageData(page, size) { try { const response = await axios.get(`/page`, { params: { page, size, name: this.searchName } }); this.pageInfo = response.data; } catch (error) { console.error(\u0026#39;Error fetching page data:\u0026#39;, error); } }, formatDate(dateString) { const date = new Date(dateString); return date.toLocaleDateString(); } }, created() { this.fetchPageData(this.currentPage, this.pageSize); } }; \u0026lt;/script\u0026gt; \u0026lt;style\u0026gt; table { width: 100%; border-collapse: collapse; } th, td { border: 1px solid #ddd; padding: 8px; text-align: left; } .pagination { margin-top: 20px; } \u0026lt;/style\u0026gt; 2. æ³¨å†Œå’Œä½¿ç”¨ç»„ä»¶\nç¡®ä¿åœ¨ä½ çš„Vueåº”ç”¨ä¸­æ³¨å†Œäº†EmployeePage.vueç»„ä»¶ï¼Œç„¶ååœ¨çˆ¶ç»„ä»¶æˆ–App.vueä¸­ä½¿ç”¨å®ƒï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;template\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;employee-page\u0026gt;\u0026lt;/employee-page\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; import EmployeePage from \u0026#39;./components/EmployeePage.vue\u0026#39;; export default { name: \u0026#39;App\u0026#39;, components: { EmployeePage } }; \u0026lt;/script\u0026gt; 3. è¿è¡Œä½ çš„Vueåº”ç”¨\nç¡®ä¿ä½ çš„Vueåº”ç”¨æ­£åœ¨è¿è¡Œï¼Œå¹¶ä¸”åç«¯æœåŠ¡ä¹Ÿå·²ç»å¯åŠ¨ã€‚ç„¶åï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä½ çš„Vueåº”ç”¨ï¼Œä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°å‘˜å·¥åˆ—è¡¨ï¼Œå¹¶èƒ½å¤Ÿé€šè¿‡åˆ†é¡µæ§ä»¶æµè§ˆä¸åŒçš„é¡µé¢ã€‚\nè¿™ä¸ªVueç»„ä»¶ä½¿ç”¨äº†ç»„åˆå¼APIæ¥å¤„ç†æ•°æ®è·å–å’Œåˆ†é¡µé€»è¾‘ã€‚å®ƒåœ¨ç»„ä»¶åˆ›å»ºæ—¶ï¼ˆcreatedç”Ÿå‘½å‘¨æœŸé’©å­ï¼‰å‘é€ä¸€ä¸ªåˆå§‹è¯·æ±‚ï¼Œç„¶åæ ¹æ®ç”¨æˆ·çš„è¾“å…¥å’Œåˆ†é¡µæŒ‰é’®ç‚¹å‡»æ¥æ›´æ–°æ•°æ®ã€‚æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°formatDateç”¨äºå°†æ—¥æœŸå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ›´æ˜“è¯»çš„æ ¼å¼ã€‚\né‚£ä¹ˆMçš„åˆ†é¡µæ’ä»¶å‘¢ é…ç½®JacksonObjectMapperå¯¹è±¡æ˜ å°„å™¨ å°†å®ƒé…ç½®å¥½è¿‡åè¿˜éœ€è¦è¿›è¡Œçº³å…¥springå®¹å™¨ç®¡ç†ï¼Œç­‰ç”¨åˆ°çš„æ—¶å€™ä¼šé»˜è®¤è‡ªåŠ¨è°ƒç”¨ã€‚\nå¯ä»¥ä»å‰é¢ç¬”è®°åœ°WebMvcConfigé‡Œé¢çœ‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 /** * å¯¹è±¡æ˜ å°„å™¨:åŸºäºjacksonå°†Javaå¯¹è±¡è½¬ä¸ºjsonï¼Œæˆ–è€…å°†jsonè½¬ä¸ºJavaå¯¹è±¡ * å°†JSONè§£æä¸ºJavaå¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸º [ä»JSONååºåˆ—åŒ–Javaå¯¹è±¡] * ä»Javaå¯¹è±¡ç”ŸæˆJSONçš„è¿‡ç¨‹ç§°ä¸º [åºåˆ—åŒ–Javaå¯¹è±¡åˆ°JSON] */ public class JacksonObjectMapper extends ObjectMapper { public static final String DEFAULT_DATE_FORMAT = \u0026#34;yyyy-MM-dd\u0026#34;; public static final String DEFAULT_DATE_TIME_FORMAT = \u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;; public static final String DEFAULT_TIME_FORMAT = \u0026#34;HH:mm:ss\u0026#34;; public JacksonObjectMapper() { super(); //æ”¶åˆ°æœªçŸ¥å±æ€§æ—¶ä¸æŠ¥å¼‚å¸¸ this.configure(FAIL_ON_UNKNOWN_PROPERTIES, false); //ååºåˆ—åŒ–æ—¶ï¼Œå±æ€§ä¸å­˜åœ¨çš„å…¼å®¹å¤„ç† this.getDeserializationConfig().withoutFeatures(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES); SimpleModule simpleModule = new SimpleModule() .addDeserializer(LocalDateTime.class, new LocalDateTimeDeserializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT))) .addDeserializer(LocalDate.class, new LocalDateDeserializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT))) .addDeserializer(LocalTime.class, new LocalTimeDeserializer(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT))) .addSerializer(BigInteger.class, ToStringSerializer.instance) .addSerializer(Long.class, ToStringSerializer.instance) .addSerializer(LocalDateTime.class, new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT))) .addSerializer(LocalDate.class, new LocalDateSerializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT))) .addSerializer(LocalTime.class, new LocalTimeSerializer(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT))); //æ³¨å†ŒåŠŸèƒ½æ¨¡å— ä¾‹å¦‚ï¼Œå¯ä»¥æ·»åŠ è‡ªå®šä¹‰åºåˆ—åŒ–å™¨å’Œååºåˆ—åŒ–å™¨ this.registerModule(simpleModule); } } 1 2 3 4 5 6 7 8 9 10 @Override protected void extendMessageConverters(List\u0026lt;HttpMessageConverter\u0026lt;?\u0026gt;\u0026gt; converters) { log.info(\u0026#34;æ‰©å±•æ¶ˆæ¯è½¬æ¢å™¨...\u0026#34;); //åˆ›å»ºæ¶ˆæ¯è½¬æ¢å™¨å¯¹è±¡ MappingJackson2HttpMessageConverter messageConverter = new MappingJackson2HttpMessageConverter(); //è®¾ç½®å¯¹è±¡è½¬æ¢å™¨ï¼Œåº•å±‚ä½¿ç”¨Jacksonå°†Javaå¯¹è±¡è½¬ä¸ºjson messageConverter.setObjectMapper(new JacksonObjectMapper()); //å°†ä¸Šé¢çš„æ¶ˆæ¯è½¬æ¢å™¨å¯¹è±¡è¿½åŠ åˆ°mvcæ¡†æ¶çš„è½¬æ¢å™¨é›†åˆä¸­ converters.add(0,messageConverter); } è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º JacksonObjectMapper çš„ç±»ï¼Œå®ƒç»§æ‰¿è‡ª ObjectMapper ç±»ã€‚ObjectMapper æ˜¯ Jackson åº“ä¸­çš„æ ¸å¿ƒç±»ï¼Œç”¨äºå°† Java å¯¹è±¡åºåˆ—åŒ–æˆ JSON æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä»¥åŠå°† JSON å­—ç¬¦ä¸²ååºåˆ—åŒ–æˆ Java å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä»£ç ä¸­æ¯ä¸ªéƒ¨åˆ†çš„è¯¦ç»†è§£é‡Šï¼š\nè‡ªå®šä¹‰æ—¥æœŸæ—¶é—´æ ¼å¼ï¼š\nDEFAULT_DATE_FORMATã€DEFAULT_DATE_TIME_FORMAT å’Œ DEFAULT_TIME_FORMAT æ˜¯å®šä¹‰çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼å­—ç¬¦ä¸²ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”ä¸åŒçš„æ—¥æœŸæ—¶é—´ç»„ä»¶ï¼ˆå¦‚æ—¥æœŸã€æ—¥æœŸæ—¶é—´ã€æ—¶é—´ï¼‰ã€‚ é…ç½® ObjectMapperï¼š\nthis.configure(FAIL_ON_UNKNOWN_PROPERTIES, false); è¿™è¡Œä»£ç é…ç½® ObjectMapperï¼Œåœ¨ååºåˆ—åŒ–æ—¶é‡åˆ° JSON ä¸­çš„æœªçŸ¥å±æ€§ä¸æŠ›å‡ºå¼‚å¸¸ã€‚è¿™åœ¨å¤„ç† JSON æ•°æ®æ—¶éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯å½“ JSON æ•°æ®åŒ…å«ä¸€äº› Java å¯¹è±¡ä¸­ä¸å­˜åœ¨çš„å±æ€§æ—¶ã€‚ ååºåˆ—åŒ–é…ç½®ï¼š\nthis.getDeserializationConfig().withoutFeatures(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES); è¿™è¡Œä»£ç åŒæ ·ç”¨äºåœ¨ååºåˆ—åŒ–æ—¶å¿½ç•¥æœªçŸ¥å±æ€§ï¼Œè¿™æ˜¯å¦ä¸€ç§é…ç½®æ–¹å¼ï¼Œç¡®ä¿é…ç½®è¢«æ­£ç¡®åº”ç”¨ã€‚ è‡ªå®šä¹‰åºåˆ—åŒ–å’Œååºåˆ—åŒ–å™¨ï¼š\nSimpleModule æ˜¯ Jackson åº“ä¸­çš„ä¸€ä¸ªç±»ï¼Œç”¨äºæ³¨å†Œè‡ªå®šä¹‰çš„åºåˆ—åŒ–å™¨å’Œååºåˆ—åŒ–å™¨ã€‚ addDeserializer æ–¹æ³•ç”¨äºæ·»åŠ è‡ªå®šä¹‰çš„ååºåˆ—åŒ–å™¨ï¼Œè¿™é‡Œä¸º LocalDateTimeã€LocalDate å’Œ LocalTime æ·»åŠ äº†å¯¹åº”çš„ååºåˆ—åŒ–å™¨ï¼Œå®ƒä»¬ä½¿ç”¨é¢„å®šä¹‰çš„æ ¼å¼æ¥è§£ææ—¥æœŸå’Œæ—¶é—´ã€‚ addSerializer æ–¹æ³•ç”¨äºæ·»åŠ è‡ªå®šä¹‰çš„åºåˆ—åŒ–å™¨ï¼Œè¿™é‡Œä¸º BigIntegerã€Longã€LocalDateTimeã€LocalDate å’Œ LocalTime æ·»åŠ äº†å¯¹åº”çš„åºåˆ—åŒ–å™¨ï¼Œå®ƒä»¬å°†è¿™äº›ç±»å‹çš„å€¼è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚ æ³¨å†Œæ¨¡å—ï¼š\nthis.registerModule(simpleModule); è¿™è¡Œä»£ç å°†é…ç½®å¥½çš„ SimpleModule æ³¨å†Œåˆ° ObjectMapper å®ä¾‹ä¸­ï¼Œä½¿å…¶ç”Ÿæ•ˆã€‚ ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·å¤„ç†ï¼ŒJavaç¨‹åºè‡ªå¸¦çš„ä¸è¡Œå—ï¼Ÿ\nJava è‡ªå¸¦çš„åºåˆ—åŒ–æœºåˆ¶ï¼ˆå¦‚ Serializable æ¥å£ï¼‰å’Œ Jackson åº“åšçš„äº‹æƒ…æ˜¯ä¸åŒçš„ï¼š\nJava åºåˆ—åŒ–ï¼šJava é€šè¿‡å®ç° Serializable æ¥å£æä¾›äº†ä¸€ç§åºåˆ—åŒ–æœºåˆ¶ï¼Œä½†å®ƒé€šå¸¸ç”¨äºå°†æ•´ä¸ªå¯¹è±¡å›¾è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œä»¥ä¾¿å¯ä»¥å°†å…¶æŒä¹…ä¿å­˜åˆ°ç£ç›˜æˆ–é€šè¿‡ç½‘ç»œå‘é€ã€‚è¿™ç§åºåˆ—åŒ–æ˜¯äºŒè¿›åˆ¶å½¢å¼çš„ï¼Œä¸æ˜¯äººç±»å¯è¯»çš„ï¼Œä¸”ä¸å¦‚ JSON çµæ´»å’Œé€šç”¨ã€‚\nJackson åºåˆ—åŒ–ï¼šJackson åº“æä¾›çš„åºåˆ—åŒ–æœºåˆ¶æ˜¯å°† Java å¯¹è±¡è½¬æ¢ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚JSON æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œæ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚JSON åœ¨ Web å¼€å‘ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸­ã€‚\næ­¤å¤–ï¼ŒJackson æä¾›äº†çµæ´»çš„é…ç½®å’Œæ‰©å±•æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…è‡ªå®šä¹‰åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¡Œä¸ºï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„ä¸šåŠ¡éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰æ—¥æœŸæ—¶é—´çš„æ ¼å¼ï¼Œå¤„ç†ä¸€äº›ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼ˆå¦‚ BigIntegerï¼‰ï¼Œæˆ–è€…åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶æ‰§è¡Œé¢å¤–çš„é€»è¾‘ã€‚\nå› æ­¤ï¼Œè™½ç„¶ Java æä¾›äº†åºåˆ—åŒ–æœºåˆ¶ï¼Œä½†åœ¨éœ€è¦å¤„ç† JSON æ•°æ®æˆ–éœ€è¦æ›´çµæ´»çš„åºåˆ—åŒ–é…ç½®æ—¶ï¼Œä½¿ç”¨ Jackson åº“æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚\nå…¨å±€å¼‚å¸¸å¤„ç†å™¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 /** * å…¨å±€å¼‚å¸¸å¤„ç† */ @ControllerAdvice(annotations = {RestController.class, Controller.class}) @ResponseBody @Slf4j public class GlobalExceptionHandler { /** * å¼‚å¸¸å¤„ç†æ–¹æ³• * @return */ @ExceptionHandler(SQLIntegrityConstraintViolationException.class) public R\u0026lt;String\u0026gt; exceptionHandler(SQLIntegrityConstraintViolationException ex){ log.error(ex.getMessage()); if(ex.getMessage().contains(\u0026#34;Duplicate entry\u0026#34;)){ String[] split = ex.getMessage().split(\u0026#34; \u0026#34;); String msg = split[2] + \u0026#34;å·²å­˜åœ¨\u0026#34;; return R.error(msg); } return R.error(\u0026#34;æœªçŸ¥é”™è¯¯\u0026#34;); } /** * å¼‚å¸¸å¤„ç†æ–¹æ³• * @return */ @ExceptionHandler(CustomException.class) public R\u0026lt;String\u0026gt; exceptionHandler(CustomException ex){ log.error(ex.getMessage()); return R.error(ex.getMessage()); } } è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º GlobalExceptionHandler çš„ç±»ï¼Œå®ƒçš„ä½œç”¨æ˜¯å…¨å±€å¼‚å¸¸å¤„ç†ã€‚è¿™æ„å‘³ç€ï¼Œæ— è®ºä½ çš„Springåº”ç”¨ç¨‹åºä¸­çš„å“ªä¸ªéƒ¨åˆ†æŠ›å‡ºäº†å¼‚å¸¸ï¼Œåªè¦è¿™ä¸ªå¼‚å¸¸æ˜¯ GlobalExceptionHandler ä¸­å®šä¹‰çš„æ–¹æ³•å¯ä»¥å¤„ç†çš„ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚å¸¸å°±ä¼šè¢«è¿™äº›æ–¹æ³•æ•è·å¹¶ç»Ÿä¸€å¤„ç†ã€‚ä¸‹é¢æˆ‘ä¼šé€è¡Œè§£é‡Šè¿™æ®µä»£ç ï¼š\n@ControllerAdvice æ³¨è§£ï¼š\nè¿™ä¸ªæ³¨è§£ç”¨äºå®šä¹‰ä¸€ä¸ªå…¨å±€çš„æ§åˆ¶å™¨å¢å¼ºå™¨ï¼ˆä¾‹å¦‚å¼‚å¸¸å¤„ç†ã€æ•°æ®é¢„å¤„ç†ç­‰ï¼‰ï¼Œå¯ä»¥è¢«åŠ åˆ°ä»»ä½•Spring MVCçš„æ§åˆ¶å™¨ä¸Šã€‚ annotations = {RestController.class, Controller.class} å‚æ•°è¡¨ç¤ºè¿™ä¸ªå¢å¼ºå™¨ä¼šåº”ç”¨åˆ°æ‰€æœ‰æ ‡è®°äº† @RestController æˆ– @Controller æ³¨è§£çš„æ§åˆ¶å™¨ä¸Šã€‚ @ResponseBody æ³¨è§£ï¼š\nè¿™ä¸ªæ³¨è§£è¡¨ç¤ºè¯¥ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•çš„è¿”å›å€¼éƒ½å°†ç›´æ¥ä½œä¸ºHTTPå“åº”çš„æ­£æ–‡è¿”å›ã€‚ç”±äºè¿™ä¸ªæ³¨è§£åŠ åœ¨äº†ç±»ä¸Šï¼Œæ‰€ä»¥è¿™ä¸ªç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè‡ªåŠ¨åº”ç”¨ @ResponseBody çš„æ•ˆæœã€‚ @Slf4j æ³¨è§£ï¼š\nè¿™æ˜¯ä¸€ä¸ªç”±Lombokåº“æä¾›çš„æ³¨è§£ï¼Œç”¨äºè‡ªåŠ¨ä¸ºç±»ç”Ÿæˆæ—¥å¿—å¯¹è±¡ï¼ˆé€šå¸¸æ˜¯ private static final Logger log = LoggerFactory.getLogger(Class.class);ï¼‰ã€‚ ç±»å®šä¹‰ public class GlobalExceptionHandlerï¼š\nå®šä¹‰äº†ä¸€ä¸ªå…¬å…±ç±» GlobalExceptionHandlerã€‚ @ExceptionHandler(SQLIntegrityConstraintViolationException.class) æ³¨è§£ï¼š\nè¿™ä¸ªæ³¨è§£è¡¨ç¤ºä¸‹é¢çš„æ–¹æ³•å°†å¤„ç† SQLIntegrityConstraintViolationException ç±»å‹çš„å¼‚å¸¸ã€‚ ç¬¬ä¸€ä¸ª exceptionHandler æ–¹æ³•ï¼š\npublic R\u0026lt;String\u0026gt; exceptionHandler(SQLIntegrityConstraintViolationException ex)ï¼š è¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ª SQLIntegrityConstraintViolationException ç±»å‹çš„å‚æ•° exï¼Œè¡¨ç¤ºå®ƒä¼šå¤„ç†è¿™ä¸ªç±»å‹çš„å¼‚å¸¸ã€‚ log.error(ex.getMessage());ï¼š ä½¿ç”¨æ—¥å¿—è®°å½•å™¨è®°å½•å¼‚å¸¸ä¿¡æ¯ã€‚ if(ex.getMessage().contains(\u0026quot;Duplicate entry\u0026quot;))ï¼š æ£€æŸ¥å¼‚å¸¸æ¶ˆæ¯ä¸­æ˜¯å¦åŒ…å« \u0026ldquo;Duplicate entry\u0026rdquo; å­—ç¬¦ä¸²ã€‚ String msg = split[2] + \u0026quot;å·²å­˜åœ¨\u0026quot;;ï¼š å¦‚æœåŒ…å«ï¼Œåˆ™ä»å¼‚å¸¸æ¶ˆæ¯ä¸­æå–å‡ºé”™çš„æ•°æ®åç§°ï¼Œå¹¶æ‹¼æ¥ä¸Š \u0026ldquo;å·²å­˜åœ¨\u0026rdquo; å­—ç¬¦ä¸²ï¼Œå½¢æˆæ–°çš„å¼‚å¸¸æ¶ˆæ¯ã€‚ return R.error(msg);ï¼š è¿”å›ä¸€ä¸ªé”™è¯¯å“åº” R.error(msg)ï¼Œå…¶ä¸­ R æ˜¯ä¸€ä¸ªé€šç”¨å“åº”ç±»ï¼Œç”¨äºå°è£…å“åº”æ•°æ®ã€‚ return R.error(\u0026quot;æœªçŸ¥é”™è¯¯\u0026quot;);ï¼š å¦‚æœå¼‚å¸¸æ¶ˆæ¯ä¸åŒ…å« \u0026ldquo;Duplicate entry\u0026rdquo;ï¼Œåˆ™è¿”å›ä¸€ä¸ªé€šç”¨çš„é”™è¯¯æ¶ˆæ¯ã€‚ ç¬¬äºŒä¸ª exceptionHandler æ–¹æ³•ï¼š\n@ExceptionHandler(CustomException.class)ï¼š è¿™ä¸ªæ³¨è§£è¡¨ç¤ºä¸‹é¢çš„æ–¹æ³•å°†å¤„ç† CustomException ç±»å‹çš„å¼‚å¸¸ã€‚ public R\u0026lt;String\u0026gt; exceptionHandler(CustomException ex)ï¼š è¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ª CustomException ç±»å‹çš„å‚æ•° exã€‚ log.error(ex.getMessage());ï¼š è®°å½•å¼‚å¸¸ä¿¡æ¯ã€‚ return R.error(ex.getMessage());ï¼š è¿”å›ä¸€ä¸ªé”™è¯¯å“åº”ï¼Œæ¶ˆæ¯å†…å®¹ä¸ºå¼‚å¸¸ ex çš„æ¶ˆæ¯ã€‚ æ€»ç»“æ¥è¯´ï¼ŒGlobalExceptionHandler ç±»æ˜¯ä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œå®ƒæ•è·å¹¶å¤„ç†ç‰¹å®šç±»å‹çš„å¼‚å¸¸ï¼Œç„¶åè¿”å›ç»Ÿä¸€çš„é”™è¯¯å“åº”ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªåœ°æ–¹é›†ä¸­å¤„ç†å¼‚å¸¸ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªæ§åˆ¶å™¨æ–¹æ³•ä¸­å•ç‹¬å¤„ç†ï¼Œè¿™æœ‰åŠ©äºä¿æŒä»£ç çš„æ•´æ´å’Œä¸€è‡´æ€§ã€‚\nåœ¨Javaä¸­ï¼Œç¡®å®ä¸èƒ½åœ¨åŒä¸€ä¸ªç±»ä¸­æœ‰å¤šä¸ªå…·æœ‰ç›¸åŒæ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨çš„æ–¹æ³•ï¼Œè¿™è¢«ç§°ä¸ºæ–¹æ³•çš„é‡è½½ï¼ˆMethod Overloadingï¼‰ã€‚ç„¶è€Œï¼Œä½ æåˆ°çš„GlobalExceptionHandlerç±»ä¸­çš„ä¸¤ä¸ªexceptionHandleræ–¹æ³•å¹¶ä¸æ˜¯é‡è½½ï¼Œå› ä¸ºå®ƒä»¬æ¥å—çš„å‚æ•°ç±»å‹ä¸åŒã€‚\nç¬¬ä¸€ä¸ªexceptionHandleræ–¹æ³•æ¥å—çš„å‚æ•°æ˜¯SQLIntegrityConstraintViolationExceptionç±»å‹ï¼š\n1 2 3 public R\u0026lt;String\u0026gt; exceptionHandler(SQLIntegrityConstraintViolationException ex){ // ... } ç¬¬äºŒä¸ªexceptionHandleræ–¹æ³•æ¥å—çš„å‚æ•°æ˜¯CustomExceptionç±»å‹ï¼š\n1 2 3 public R\u0026lt;String\u0026gt; exceptionHandler(CustomException ex){ // ... } ç”±äºè¿™ä¸¤ä¸ªæ–¹æ³•çš„å‚æ•°ç±»å‹ä¸åŒï¼Œå®ƒä»¬å¹¶ä¸è¿åJavaçš„é‡è½½è§„åˆ™ã€‚Javaçš„æ–¹æ³•é‡è½½æ˜¯æ ¹æ®æ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨ï¼ˆåŒ…æ‹¬å‚æ•°çš„æ•°é‡å’Œç±»å‹ï¼‰æ¥åŒºåˆ†çš„ã€‚åªè¦å‚æ•°åˆ—è¡¨ä¸åŒï¼Œå³ä½¿æ–¹æ³•åç›¸åŒï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ–¹æ³•ã€‚\nåœ¨GlobalExceptionHandlerç±»ä¸­ï¼Œæ¯ä¸ªexceptionHandleræ–¹æ³•éƒ½é€šè¿‡@ExceptionHandleræ³¨è§£æŒ‡å®šäº†å®ƒæ‰€å¤„ç†çš„å¼‚å¸¸ç±»å‹ã€‚å½“Spring MVCæ¡†æ¶é‡åˆ°ç›¸åº”çš„å¼‚å¸¸æ—¶ï¼Œå®ƒä¼šè°ƒç”¨å¯¹åº”çš„å¤„ç†æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•çš„ç»„ç»‡æ–¹å¼ä½¿å¾—å¼‚å¸¸å¤„ç†æ›´åŠ æ¨¡å—åŒ–å’Œæ¸…æ™°ï¼Œå¹¶ä¸”æ¯ä¸ªæ–¹æ³•éƒ½å¯ä»¥æœ‰è‡ªå·±ç‹¬ç‰¹çš„é€»è¾‘æ¥å¤„ç†ç‰¹å®šç±»å‹çš„å¼‚å¸¸ã€‚\nè‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ç±» 1 2 3 4 5 6 7 8 /** * è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ç±» */ public class CustomException extends RuntimeException { public CustomException(String message){ super(message); } } è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º CustomException çš„è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œå®ƒç»§æ‰¿è‡ª Java çš„ RuntimeException ç±»ã€‚ä¸‹é¢æ˜¯å¯¹è¿™ä¸ªç±»çš„è¯¦ç»†è§£é‡Šï¼š\npublic class CustomExceptionï¼š\nè¿™æ˜¯ä¸€ä¸ªæ–°çš„å…¬å…±ç±»çš„å£°æ˜ï¼Œç±»åä¸º CustomExceptionã€‚ extends RuntimeExceptionï¼š\nCustomException ç»§æ‰¿è‡ª Java çš„ RuntimeException ç±»ã€‚RuntimeException æ˜¯ä¸€ä¸ªéå—æŸ¥å¼‚å¸¸ï¼ˆunchecked exceptionï¼‰ï¼Œæ„å‘³ç€ç¼–è¯‘å™¨ä¸ä¼šå¼ºåˆ¶ä½ æ•è·æˆ–æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚å®ƒé€šå¸¸ç”¨äºè¡¨ç¤ºç¨‹åºè¿è¡Œæ—¶çš„é”™è¯¯ï¼Œæ¯”å¦‚æ•°ç»„è¶Šç•Œã€ç©ºæŒ‡é’ˆå¼‚å¸¸ç­‰ã€‚ public CustomException(String message)ï¼š\nè¿™æ˜¯ CustomException ç±»çš„æ„é€ å™¨ï¼ˆconstructorï¼‰ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å‚æ•° messageã€‚è¿™ä¸ªæ„é€ å™¨ç”¨äºåœ¨åˆ›å»º CustomException å¯¹è±¡æ—¶åˆå§‹åŒ–å¼‚å¸¸ä¿¡æ¯ã€‚ super(message)ï¼š\nè¿™è¡Œä»£ç è°ƒç”¨äº†çˆ¶ç±» RuntimeException çš„æ„é€ å™¨ï¼Œå¹¶ä¼ é€’äº† message å‚æ•°ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†è®¾ç½®å¼‚å¸¸çš„æ¶ˆæ¯ï¼Œè¿™ä¸ªä¿¡æ¯é€šå¸¸åœ¨è°ƒè¯•æ—¶éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥æä¾›å…³äºå¼‚å¸¸åŸå› çš„è¯¦ç»†ä¿¡æ¯ã€‚ æ€»çš„æ¥è¯´ï¼ŒCustomException æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„å¼‚å¸¸ç±»ï¼Œä½ å¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘ä¸­æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸æ¥è¡¨ç¤ºç‰¹å®šçš„ä¸šåŠ¡é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥äº†æ— æ•ˆçš„æ•°æ®ï¼Œä½ å¯ä»¥æŠ›å‡ºä¸€ä¸ª CustomException æ¥è¡¨ç¤ºè¿™ä¸ªé”™è¯¯ï¼Œå¹¶æä¾›ç›¸åº”çš„é”™è¯¯æ¶ˆæ¯ã€‚\nä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸çš„å¥½å¤„æ˜¯ï¼Œä½ å¯ä»¥åˆ›å»ºæ›´å…·ä½“ã€æ›´æœ‰æ„ä¹‰çš„å¼‚å¸¸ç±»å‹æ¥è¡¨ç¤ºä½ çš„åº”ç”¨ç¨‹åºå¯èƒ½é‡åˆ°çš„å„ç§é”™è¯¯æƒ…å†µã€‚è¿™æœ‰åŠ©äºé”™è¯¯å¤„ç†å’Œè°ƒè¯•ï¼Œä¹Ÿä½¿å¾—å¼‚å¸¸å¤„ç†ä»£ç æ›´åŠ æ¸…æ™°å’Œæ˜“äºç»´æŠ¤ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ CustomException çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public void someBusinessMethod() { try { // ä¸šåŠ¡é€»è¾‘... if (æŸä¸ªæ¡ä»¶) { throw new CustomException(\u0026#34;å‘ç”Ÿäº†ä¸€ä¸ªä¸šåŠ¡é”™è¯¯\u0026#34;); } } catch (CustomException e) { // å¤„ç† CustomException e.printStackTrace(); } } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ æŸä¸ªæ¡ä»¶ ä¸ºçœŸï¼ŒsomeBusinessMethod æ–¹æ³•å°†æŠ›å‡ºä¸€ä¸ª CustomExceptionï¼Œå¼‚å¸¸çš„æ¶ˆæ¯æ˜¯ \u0026ldquo;å‘ç”Ÿäº†ä¸€ä¸ªä¸šåŠ¡é”™è¯¯\u0026rdquo;ã€‚ç„¶åï¼Œä½ å¯ä»¥åœ¨ catch å—ä¸­æ•è·å¹¶å¤„ç†è¿™ä¸ªå¼‚å¸¸ã€‚\nçŸ­ä¿¡å‘é€å·¥å…· 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 /** * çŸ­ä¿¡å‘é€å·¥å…·ç±» */ public class SMSUtils { /** * å‘é€çŸ­ä¿¡ * @param signName ç­¾å * @param templateCode æ¨¡æ¿ * @param phoneNumbers æ‰‹æœºå· * @param param å‚æ•° */ public static void sendMessage(String signName, String templateCode,String phoneNumbers,String param){ DefaultProfile profile = DefaultProfile.getProfile(\u0026#34;cn-hangzhou\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;\u0026#34;); IAcsClient client = new DefaultAcsClient(profile); SendSmsRequest request = new SendSmsRequest(); request.setSysRegionId(\u0026#34;cn-hangzhou\u0026#34;); request.setPhoneNumbers(phoneNumbers); request.setSignName(signName); request.setTemplateCode(templateCode); request.setTemplateParam(\u0026#34;{\\\u0026#34;code\\\u0026#34;:\\\u0026#34;\u0026#34;+param+\u0026#34;\\\u0026#34;}\u0026#34;); try { SendSmsResponse response = client.getAcsResponse(request); System.out.println(\u0026#34;çŸ­ä¿¡å‘é€æˆåŠŸ\u0026#34;); }catch (ClientException e) { e.printStackTrace(); } } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 /** * éšæœºç”ŸæˆéªŒè¯ç å·¥å…·ç±» */ public class ValidateCodeUtils { /** * éšæœºç”ŸæˆéªŒè¯ç  * @param length é•¿åº¦ä¸º4ä½æˆ–è€…6ä½ * @return */ public static Integer generateValidateCode(int length){ Integer code =null; if(length == 4){ code = new Random().nextInt(9999);//ç”Ÿæˆéšæœºæ•°ï¼Œæœ€å¤§ä¸º9999 if(code \u0026lt; 1000){ code = code + 1000;//ä¿è¯éšæœºæ•°ä¸º4ä½æ•°å­— } }else if(length == 6){ code = new Random().nextInt(999999);//ç”Ÿæˆéšæœºæ•°ï¼Œæœ€å¤§ä¸º999999 if(code \u0026lt; 100000){ code = code + 100000;//ä¿è¯éšæœºæ•°ä¸º6ä½æ•°å­— } }else{ throw new RuntimeException(\u0026#34;åªèƒ½ç”Ÿæˆ4ä½æˆ–6ä½æ•°å­—éªŒè¯ç \u0026#34;); } return code; } /** * éšæœºç”ŸæˆæŒ‡å®šé•¿åº¦å­—ç¬¦ä¸²éªŒè¯ç  * @param length é•¿åº¦ * @return */ public static String generateValidateCode4String(int length){ Random rdm = new Random(); String hash1 = Integer.toHexString(rdm.nextInt()); String capstr = hash1.substring(0, length); return capstr; } } æ–‡ä»¶çš„ä¸Šä¼ ä¸å›æ˜¾ ç”¨æˆ·é€šè¿‡å‰ç«¯å°†æ–‡ä»¶ï¼ˆå›¾ç‰‡ç­‰ä¿¡æ¯ï¼‰æäº¤ï¼Œå‰ç«¯å°†ä¿¡æ¯å‘é€ç»™åç«¯ï¼Œåç«¯é€šè¿‡springmvcæä¾›çš„MultipartFileæ¥æ”¶åˆ°æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å…ˆè½¬å­˜åˆ°æœ¬åœ°ç£ç›˜çš„æŸä¸€åœ°æ–¹ï¼Œæ¥ç€ç­‰å‰ç«¯éœ€è¦å°†æ–‡ä»¶è¿›è¡Œå›æ˜¾çš„æ—¶å€™ï¼Œå°±è¦ä»æœ¬åœ°è·å–æµï¼Œé€šè¿‡HttpServletResponseå°†æ–‡ä»¶å†™å›æµè§ˆå™¨ã€‚\nåˆ©ç”¨@Valueå°†é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯æ›´åŠ æ–¹ä¾¿åœ°æ³¨å…¥ç»™basePathã€‚\næ‹¿åˆ°æ–‡ä»¶ååˆ©ç”¨UUIDè·å–ä¸€ä¸²å­—ç¬¦ä¸ºæ–‡ä»¶åé‡æ–°èµ‹å€¼ï¼Œé˜²æ­¢é‡åå¯¼è‡´çš„æ–‡ä»¶è¦†ç›–ï¼Œå¹¶ä¸”å°†é‡å‘½åçš„æ–‡ä»¶åä¼ ç»™å‰ç«¯ï¼Œå½“å‰ç«¯æƒ³å›æ˜¾æ—¶åˆ©ç”¨æ–°çš„æ–‡ä»¶åè¿›è¡Œè¯·æ±‚ã€‚\nåˆ©ç”¨Fileåˆ›å»ºå‡ºæ¥çš„æ˜¯å¯ä»¥å¸¦è·¯å¾„çš„æ–‡ä»¶ï¼Œå¦‚æœè·¯å¾„æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå¯ä»¥é€šè¿‡mkdirsæ–¹æ³•è¿›è¡Œåˆ›å»ºã€‚\néœ€è¦è®¾ç½®ä¸ºresponse.setContentType(\u0026ldquo;image/jpeg\u0026rdquo;);\nå°†æ–‡ä»¶è¿›è¡Œå›æ˜¾çš„æ—¶å€™ï¼Œé€šè¿‡æ–‡ä»¶è¾“å…¥æµå’ŒHttpServletResponseè·å–è¾“å‡ºæµï¼Œå°†æ–‡ä»¶å†™å›åˆ°æµè§ˆå™¨ã€‚\n1 2 3 4 5 6 7 8 response.setContentType(\u0026#34;image/jpeg\u0026#34;); int len = 0; byte[] bytes = new byte[1024]; while ((len = fileInputStream.read(bytes)) != -1){ outputStream.write(bytes,0,len); outputStream.flush(); } å¹¶ä¸”è¦è®°å¾—å…³é—­èµ„æºã€‚\nMultipartFile MultipartFile æ˜¯ Spring MVC æä¾›çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚ä¸­çš„æ–‡ä»¶ä¸Šä¼ éƒ¨åˆ†ã€‚å®ƒæå¤§åœ°ç®€åŒ–äº†æ–‡ä»¶ä¸Šä¼ çš„å¤„ç†è¿‡ç¨‹ï¼Œæä¾›äº†å¤šç§æ–¹æ³•æ¥è®¿é—®å’Œæ“ä½œä¸Šä¼ çš„æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯ MultipartFile çš„ä¸€äº›å¸¸ç”¨æ–¹æ³•å’Œä½¿ç”¨åœºæ™¯ï¼š\nMultipartFile çš„å¸¸ç”¨æ–¹æ³•ï¼š\ngetOriginalFilename()ï¼šè·å–ä¸Šä¼ æ–‡ä»¶çš„åŸå§‹æ–‡ä»¶åã€‚ getContentType()ï¼šè·å–æ–‡ä»¶çš„ MIME ç±»å‹ï¼Œè¿™å¯ä»¥å¸®åŠ©ä½ ç¡®å®šæ–‡ä»¶çš„ç±»å‹ã€‚ isEmpty()ï¼šæ£€æŸ¥ä¸Šä¼ çš„æ–‡ä»¶æ˜¯å¦ä¸ºç©ºã€‚ getSize()ï¼šè·å–æ–‡ä»¶çš„å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ã€‚ getBytes()ï¼šå°†æ–‡ä»¶å†…å®¹è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ã€‚ getInputStream()ï¼šè·å–æ–‡ä»¶å†…å®¹çš„è¾“å…¥æµã€‚ transferTo(File dest)ï¼šå°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨çš„æŒ‡å®šè·¯å¾„ã€‚ ä½¿ç”¨åœºæ™¯å’Œç¤ºä¾‹ï¼š\n1. å•æ–‡ä»¶ä¸Šä¼ ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @PostMapping(\u0026#34;/upload\u0026#34;) public String handleFileUpload(@RequestParam(\u0026#34;file\u0026#34;) MultipartFile file) { if (file.isEmpty()) { return \u0026#34;æ–‡ä»¶ä¸ºç©ºï¼Œè¯·é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ ã€‚\u0026#34;; } try { String originalFilename = file.getOriginalFilename(); File destFile = new File(\u0026#34;/uploads/\u0026#34; + originalFilename); file.transferTo(destFile); return \u0026#34;æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼š\u0026#34; + originalFilename; } catch (IOException e) { e.printStackTrace(); return \u0026#34;æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼š\u0026#34; + e.getMessage(); } } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ¥æ”¶ä¸€ä¸ªåä¸º file çš„æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°æœåŠ¡å™¨çš„ /uploads/ ç›®å½•ä¸‹ã€‚\n2. å¤šæ–‡ä»¶ä¸Šä¼ ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @PostMapping(\u0026#34;/uploadMultiple\u0026#34;) public String handleMultipleFileUpload(@RequestParam(\u0026#34;files\u0026#34;) MultipartFile[] files) { for (MultipartFile file : files) { if (file.isEmpty()) continue; try { String originalFilename = file.getOriginalFilename(); File destFile = new File(\u0026#34;/uploads/\u0026#34; + originalFilename); file.transferTo(destFile); } catch (IOException e) { e.printStackTrace(); return \u0026#34;æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼š\u0026#34; + e.getMessage(); } } return \u0026#34;æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ æˆåŠŸ\u0026#34;; } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶æ•°ç»„ï¼Œå¹¶éå†æ•°ç»„ä¸­çš„æ¯ä¸ªæ–‡ä»¶ï¼Œå°†å®ƒä»¬ä¿å­˜åˆ°æœåŠ¡å™¨çš„ /uploads/ ç›®å½•ä¸‹ã€‚\n3. æ–‡ä»¶ä¸‹è½½ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 @GetMapping(\u0026#34;/download\u0026#34;) public void handleFileDownload(HttpServletRequest request, HttpServletResponse response) { String filePath = \u0026#34;/path/to/file.jpg\u0026#34;; File file = new File(filePath); response.setContentType(\u0026#34;application/octet-stream\u0026#34;); response.setHeader(\u0026#34;Content-Disposition\u0026#34;, \u0026#34;attachment; filename=\\\u0026#34;\u0026#34; + file.getName() + \u0026#34;\\\u0026#34;\u0026#34;); try (InputStream in = new FileInputStream(file); OutputStream out = response.getOutputStream()) { byte[] buffer = new byte[8192]; int bytesRead; while ((bytesRead = in.read(buffer)) != -1) { out.write(buffer, 0, bytesRead); } } catch (IOException e) { e.printStackTrace(); } } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–‡ä»¶ä¸‹è½½çš„æ¥å£ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å£ä¸‹è½½æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚\næ³¨æ„äº‹é¡¹ï¼š\næ–‡ä»¶å¤§å°é™åˆ¶ï¼šSpring Boot å…è®¸ä½ é€šè¿‡é…ç½®æ–‡ä»¶æ¥é™åˆ¶ä¸Šä¼ æ–‡ä»¶çš„å¤§å°ï¼Œä»¥é˜²æ­¢æ¶æ„ä¸Šä¼ å¤§æ–‡ä»¶ã€‚ æ–‡ä»¶åå¤„ç†ï¼šç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶åå¯èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦è¿›è¡Œé€‚å½“çš„å¤„ç†ã€‚ æ–‡ä»¶å­˜å‚¨è·¯å¾„ï¼šä¸Šä¼ çš„æ–‡ä»¶åº”è¯¥å­˜å‚¨åœ¨å®‰å…¨çš„è·¯å¾„ä¸‹ï¼Œä»¥é˜²æ­¢æ–‡ä»¶è¢«æ¶æ„è®¿é—®ã€‚ é€šè¿‡è¿™äº›æ–¹æ³•å’Œç¤ºä¾‹ï¼Œä½ å¯ä»¥ç†Ÿç»ƒåœ°ä½¿ç”¨ MultipartFile æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½çš„éœ€æ±‚ã€‚\n@Value åœ¨Springæ¡†æ¶ä¸­ï¼Œ@Value æ³¨è§£ç”¨äºå°†é…ç½®æ–‡ä»¶ä¸­çš„å€¼æ³¨å…¥åˆ°Springç®¡ç†çš„Beançš„å­—æ®µä¸­ã€‚è¿™ä¸ªæ³¨è§£æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥å°†å¤–éƒ¨é…ç½®ï¼ˆå¦‚.propertiesæˆ–.ymlæ–‡ä»¶ä¸­çš„å€¼ï¼‰ç»‘å®šåˆ°Javaå¯¹è±¡çš„å±æ€§ä¸Šã€‚\nä½¿ç”¨æ–¹æ³•ï¼š\n@Value æ³¨è§£å¯ä»¥ç”¨äºå­—æ®µã€è®¾ç½®æ–¹æ³•ï¼ˆsetter methodsï¼‰æˆ–æ™®é€šæ–¹æ³•ä¸Šã€‚å½“ç”¨äºå­—æ®µä¸Šæ—¶ï¼ŒSpringä¼šåœ¨åˆ›å»ºBeanæ—¶è‡ªåŠ¨å°†é…ç½®å€¼æ³¨å…¥åˆ°è¿™äº›å­—æ®µä¸­ã€‚å¦‚æœç”¨äºæ–¹æ³•ä¸Šï¼ŒSpringä¼šè°ƒç”¨è¿™äº›æ–¹æ³•å¹¶å°†é…ç½®å€¼ä½œä¸ºå‚æ•°ä¼ é€’ã€‚\nåŸºæœ¬è¯­æ³•ï¼š\n1 2 @Value(\u0026#34;${property.name}\u0026#34;) private String propertyName; æˆ–è€…ï¼Œå¦‚æœä½ éœ€è¦è¿›è¡Œä¸€äº›è¡¨è¾¾å¼è¯„ä¼°ï¼Œå¯ä»¥ä½¿ç”¨SpELï¼ˆSpring Expression Languageï¼‰ï¼š\n1 2 @Value(\u0026#34;#{systemProperties[\u0026#39;user.home\u0026#39;]}\u0026#34;) private String userHome; ä½¿ç”¨åœºæ™¯ï¼š\næ³¨å…¥ç®€å•å€¼ï¼š\nç”¨äºå°†é…ç½®æ–‡ä»¶ä¸­çš„ç®€å•å€¼ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ç­‰ï¼‰æ³¨å…¥åˆ°Beançš„å­—æ®µä¸­ã€‚ æ³¨å…¥é›†åˆæˆ–æ•°ç»„ï¼š\nå¯ä»¥å°†é…ç½®æ–‡ä»¶ä¸­çš„åˆ—è¡¨æˆ–æ•°ç»„å€¼æ³¨å…¥åˆ°Beançš„é›†åˆæˆ–æ•°ç»„å­—æ®µä¸­ã€‚ æ³¨å…¥SpELè¡¨è¾¾å¼ï¼š\nå¯ä»¥åˆ©ç”¨SpELçš„å¼ºå¤§åŠŸèƒ½ï¼Œæ‰§è¡Œæ›´å¤æ‚çš„æ³¨å…¥æ“ä½œï¼Œå¦‚è°ƒç”¨æ–¹æ³•ã€è®¿é—®ç¯å¢ƒå˜é‡ç­‰ã€‚ ç¤ºä¾‹ä»£ç ï¼š\nå‡è®¾ä½ æœ‰ä¸€ä¸ªapplication.propertiesé…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å±æ€§ï¼š\n1 2 3 app.name=MyApplication app.description=This is a sample application. app.version=1.0.0 ä½ å¯ä»¥ä½¿ç”¨@Valueæ³¨è§£å°†è¿™äº›å€¼æ³¨å…¥åˆ°Beanä¸­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 import org.springframework.beans.factory.annotation.Value; import org.springframework.stereotype.Component; @Component public class ApplicationProperties { @Value(\u0026#34;${app.name}\u0026#34;) private String name; @Value(\u0026#34;${app.description}\u0026#34;) private String description; @Value(\u0026#34;${app.version}\u0026#34;) private String version; // Getters and Setters public String getName() { return name; } public void setName(String name) { this.name = name; } public String getDescription() { return description; } public void setDescription(String description) { this.description = description; } public String getVersion() { return version; } public void setVersion(String version) { this.version = version; } } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒApplicationProperties ç±»çš„å­—æ®µè¢«@Valueæ³¨è§£æ ‡è®°ï¼ŒSpringå®¹å™¨åœ¨åˆ›å»ºè¿™ä¸ªBeanæ—¶ä¼šè‡ªåŠ¨ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ç›¸åº”çš„å€¼å¹¶æ³¨å…¥åˆ°è¿™äº›å­—æ®µä¸­ã€‚\næ³¨æ„äº‹é¡¹ï¼š\nè¡¨è¾¾å¼ç»“æœä¸ºnullï¼šå¦‚æœ@Valueæ³¨è§£çš„è¡¨è¾¾å¼ç»“æœä¸ºnullï¼Œä¸”å­—æ®µæ²¡æœ‰åˆå§‹å€¼ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥ä¸ºå­—æ®µæä¾›ä¸€ä¸ªé»˜è®¤å€¼ã€‚\nå®‰å…¨æ€§ï¼šä¸è¦å°†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ã€å¯†é’¥ç­‰ï¼‰ç›´æ¥æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚å¯ä»¥ä½¿ç”¨Spring Bootçš„é…ç½®å±æ€§æ›¿æ¢åŠŸèƒ½æ¥å®ç°æ•æ„Ÿä¿¡æ¯çš„åŠ å¯†å’Œè§£å¯†ã€‚\nç±»å‹è½¬æ¢ï¼šSpringä¼šå°è¯•å°†æ³¨å…¥çš„å€¼è½¬æ¢ä¸ºå­—æ®µçš„ç±»å‹ã€‚å¦‚æœè½¬æ¢å¤±è´¥ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\n@Value æ³¨è§£æä¾›äº†ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„æ–¹å¼ï¼Œå°†å¤–éƒ¨é…ç½®ä¸åº”ç”¨ç¨‹åºä»£ç è§£è€¦ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºæ›´å®¹æ˜“é…ç½®å’Œç»´æŠ¤ã€‚\nContent-Type response.setContentType(\u0026quot;image/jpeg\u0026quot;); è¿™è¡Œä»£ç è®¾ç½®äº†HTTPå“åº”çš„å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ä¸º image/jpegã€‚è¿™ä¸ªå¤´éƒ¨ä¿¡æ¯å‘Šè¯‰å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼‰å“åº”çš„å†…å®¹æ˜¯JPEGæ ¼å¼çš„å›¾ç‰‡ã€‚\nä¸ºä»€ä¹ˆè¦è®¾ç½®å†…å®¹ç±»å‹ï¼š\nå†…å®¹åå•†ï¼š\nå†…å®¹ç±»å‹æ˜¯HTTPå†…å®¹åå•†çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯æ ¹æ®å“åº”çš„å†…å®¹ç±»å‹å†³å®šå¦‚ä½•å¤„ç†è¿™äº›æ•°æ®ã€‚ä¾‹å¦‚ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®å†…å®¹ç±»å‹æ˜¾ç¤ºå›¾ç‰‡æˆ–æ‰§è¡Œå…¶ä»–æ“ä½œã€‚ æ­£ç¡®çš„æ¸²æŸ“ï¼š\nå¦‚æœä¸è®¾ç½®å†…å®¹ç±»å‹ï¼Œæˆ–è€…è®¾ç½®é”™è¯¯ï¼Œå®¢æˆ·ç«¯å¯èƒ½æ— æ³•æ­£ç¡®æ¸²æŸ“æˆ–å¤„ç†å“åº”å†…å®¹ã€‚ä¾‹å¦‚ï¼Œæµè§ˆå™¨å¯èƒ½ä¸çŸ¥é“å¦‚ä½•å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œå¯èƒ½ä¼šå°†å…¶è§†ä¸ºæ–‡æœ¬æˆ–ä¸‹è½½æ–‡ä»¶ã€‚ ä¿å­˜æ–‡ä»¶æ—¶çš„æ–‡ä»¶ç±»å‹ï¼š\nå½“ç”¨æˆ·é€šè¿‡æµè§ˆå™¨ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œæ­£ç¡®çš„å†…å®¹ç±»å‹å¯ä»¥æç¤ºæµè§ˆå™¨ä»¥æ­£ç¡®çš„æ ¼å¼ä¿å­˜æ–‡ä»¶ã€‚ å®‰å…¨æ€§ï¼š\næŸäº›å†…å®¹ç±»å‹å¯èƒ½ä¼šè§¦å‘å®¢æˆ·ç«¯çš„å®‰å…¨æ£€æŸ¥ï¼Œå¦‚æ‰§è¡ŒJavaScriptä»£ç ã€‚æ­£ç¡®çš„å†…å®¹ç±»å‹æœ‰åŠ©äºé¿å…æ½œåœ¨çš„å®‰å…¨é—®é¢˜ã€‚ å¦‚æœæ²¡æœ‰è®¾ç½®å†…å®¹ç±»å‹å¯ä»¥å—ï¼Ÿ\nä¸è®¾ç½®å†…å®¹ç±»å‹ï¼ŒHTTPå“åº”é»˜è®¤å¯èƒ½ä¸ä¼šæœ‰ Content-Type å¤´éƒ¨ï¼Œæˆ–è€…ç»§æ‰¿è‡ªé…ç½®çš„é»˜è®¤å€¼ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå³ä½¿æ²¡æœ‰æ˜¾å¼è®¾ç½®å†…å®¹ç±»å‹ï¼Œå®¢æˆ·ç«¯å¯èƒ½ä»ç„¶èƒ½å¤Ÿæ­£ç¡®å¤„ç†å“åº”ï¼Œç‰¹åˆ«æ˜¯å¦‚æœå“åº”çš„å†…å®¹èƒ½å¤Ÿè¢«å®¢æˆ·ç«¯è‡ªåŠ¨è¯†åˆ«ï¼ˆä¾‹å¦‚ï¼ŒæŸäº›æµè§ˆå™¨å¯ä»¥è¯†åˆ«JPEGæ–‡ä»¶çš„äºŒè¿›åˆ¶ç­¾åï¼‰ã€‚\nç„¶è€Œï¼Œä¸è®¾ç½®å†…å®¹ç±»å‹å¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š\nå®¢æˆ·ç«¯è¡Œä¸ºä¸ç¡®å®šï¼š\nå®¢æˆ·ç«¯å¯èƒ½æ— æ³•ç¡®å®šå¦‚ä½•å¤„ç†å“åº”å†…å®¹ï¼Œå¯¼è‡´æ¸²æŸ“ä¸æ­£ç¡®æˆ–å‡ºç°é”™è¯¯ã€‚ ä¸‹è½½æ–‡ä»¶æ—¶çš„é—®é¢˜ï¼š\nå¦‚æœç”¨æˆ·æ­£åœ¨ä¸‹è½½æ–‡ä»¶ï¼Œæ²¡æœ‰æ­£ç¡®çš„å†…å®¹ç±»å‹ï¼Œä¸‹è½½çš„æ–‡ä»¶å¯èƒ½æ— æ³•ä»¥æ­£ç¡®çš„æ ¼å¼ä¿å­˜ã€‚ å®‰å…¨æ€§é—®é¢˜ï¼š\nåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¼ºå°‘å†…å®¹ç±»å‹å¯èƒ½ä¼šç»•è¿‡å®¢æˆ·ç«¯çš„å®‰å…¨æ£€æŸ¥ï¼Œå¯¼è‡´æ½œåœ¨çš„å®‰å…¨é£é™©ã€‚ å› æ­¤ï¼Œä¸ºäº†ç¡®ä¿æœ€ä½³çš„å…¼å®¹æ€§å’Œå®‰å…¨æ€§ï¼Œå»ºè®®åœ¨å‘é€ç‰¹å®šç±»å‹çš„å“åº”æ—¶æ€»æ˜¯è®¾ç½®æ­£ç¡®çš„ Content-Typeã€‚è¿™æ˜¯ä¸€ä¸ªè‰¯å¥½çš„å®è·µï¼Œå¯ä»¥ç¡®ä¿ä½ çš„åº”ç”¨ç¨‹åºåœ¨ä¸åŒçš„å®¢æˆ·ç«¯å’Œç¯å¢ƒä¸­è¡¨ç°ä¸€è‡´ã€‚\nresponse.setContentType æ–¹æ³•ç”¨äºè®¾ç½®HTTPå“åº”çš„å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œå®ƒå‘Šè¯‰å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰å“åº”çš„å†…å®¹æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„å†…å®¹ç±»å‹åŠå…¶ä½¿ç”¨åœºæ™¯å’Œç¤ºä¾‹ï¼š\næ–‡æœ¬ç±»å‹ï¼š\ntext/htmlï¼šç”¨äºä¼ è¾“HTMLæ–‡æ¡£ã€‚å½“ä½ æƒ³è¿”å›ä¸€ä¸ªç½‘é¡µæ—¶ä½¿ç”¨æ­¤ç±»å‹ã€‚ 1 response.setContentType(\u0026#34;text/html; charset=utf-8\u0026#34;); text/plainï¼šç”¨äºä¼ è¾“çº¯æ–‡æœ¬æ•°æ®ã€‚é€‚ç”¨äºè¿”å›ç®€å•çš„æ–‡æœ¬ä¿¡æ¯ã€‚ 1 response.setContentType(\u0026#34;text/plain; charset=utf-8\u0026#34;); text/xmlï¼šç”¨äºä¼ è¾“XMLæ•°æ®ã€‚å¸¸ç”¨äºé…ç½®æ–‡ä»¶æˆ–APIå“åº”ã€‚ 1 response.setContentType(\u0026#34;text/xml; charset=utf-8\u0026#34;); text/cssï¼šç”¨äºä¼ è¾“CSSæ ·å¼è¡¨ã€‚ 1 response.setContentType(\u0026#34;text/css; charset=utf-8\u0026#34;); text/javascriptï¼šç”¨äºä¼ è¾“JavaScriptä»£ç ã€‚ 1 response.setContentType(\u0026#34;text/javascript; charset=utf-8\u0026#34;); å›¾åƒç±»å‹ï¼š\nimage/jpegï¼šç”¨äºä¼ è¾“JPEGæ ¼å¼çš„å›¾ç‰‡ã€‚ 1 response.setContentType(\u0026#34;image/jpeg\u0026#34;); image/pngï¼šç”¨äºä¼ è¾“PNGæ ¼å¼çš„å›¾ç‰‡ã€‚ 1 response.setContentType(\u0026#34;image/png\u0026#34;); image/gifï¼šç”¨äºä¼ è¾“GIFæ ¼å¼çš„å›¾ç‰‡ã€‚ 1 response.setContentType(\u0026#34;image/gif\u0026#34;); åº”ç”¨ç±»å‹ï¼š\napplication/jsonï¼šç”¨äºä¼ è¾“JSONæ ¼å¼çš„æ•°æ®ã€‚å¸¸ç”¨äºAPIå“åº”ã€‚ 1 response.setContentType(\u0026#34;application/json; charset=utf-8\u0026#34;); application/xmlï¼šç”¨äºä¼ è¾“XMLæ•°æ®ã€‚ 1 response.setContentType(\u0026#34;application/xml; charset=utf-8\u0026#34;); application/pdfï¼šç”¨äºä¼ è¾“PDFæ–‡ä»¶ã€‚ 1 response.setContentType(\u0026#34;application/pdf\u0026#34;); application/zipï¼šç”¨äºä¼ è¾“ZIPå‹ç¼©æ–‡ä»¶ã€‚ 1 response.setContentType(\u0026#34;application/zip\u0026#34;); å¤šéƒ¨åˆ†ç±»å‹ï¼š\nmultipart/form-dataï¼šç”¨äºæ–‡ä»¶ä¸Šä¼ ã€‚å½“è¡¨å•åŒ…å«æ–‡ä»¶ä¸Šä¼ æ—¶ä½¿ç”¨æ­¤ç±»å‹ã€‚ 1 response.setContentType(\u0026#34;multipart/form-data; boundary=----WebKitFormBoundaryXXXXX\u0026#34;); multipart/byterangesï¼šç”¨äºä¼ è¾“æ–‡ä»¶çš„ç‰¹å®šéƒ¨åˆ†ã€‚ 1 response.setContentType(\u0026#34;multipart/byteranges\u0026#34;); éŸ³é¢‘å’Œè§†é¢‘ç±»å‹ï¼š\naudio/mpegï¼šç”¨äºä¼ è¾“MP3éŸ³é¢‘æ–‡ä»¶ã€‚ 1 response.setContentType(\u0026#34;audio/mpeg\u0026#34;); video/mp4ï¼šç”¨äºä¼ è¾“MP4è§†é¢‘æ–‡ä»¶ã€‚ 1 response.setContentType(\u0026#34;video/mp4\u0026#34;); å…¶ä»–ç±»å‹ï¼š\napplication/octet-streamï¼šç”¨äºä¼ è¾“äºŒè¿›åˆ¶æµæ•°æ®ï¼Œå¦‚æ–‡ä»¶ä¸‹è½½ã€‚ 1 response.setContentType(\u0026#34;application/octet-stream\u0026#34;); application/x-www-form-urlencodedï¼šç”¨äºä¼ è¾“è¡¨å•æ•°æ®ã€‚è¿™æ˜¯è¡¨å•æäº¤çš„é»˜è®¤ç¼–ç ç±»å‹ã€‚ 1 response.setContentType(\u0026#34;application/x-www-form-urlencoded\u0026#34;); æ­£ç¡®è®¾ç½®å†…å®¹ç±»å‹å¯¹äºç¡®ä¿æ•°æ®æ­£ç¡®ä¼ è¾“å’Œå¤„ç†è‡³å…³é‡è¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¿”å›ä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶ï¼Œä½†æ²¡æœ‰è®¾ç½®æ­£ç¡®çš„å†…å®¹ç±»å‹ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šå°†å“åº”è§†ä¸ºæ™®é€šæ–‡æœ¬ï¼Œå¯¼è‡´æ— æ³•æ­£ç¡®æ˜¾ç¤ºå›¾ç‰‡ã€‚åŒæ ·ï¼Œå¦‚æœä½ è¿”å›JSONæ•°æ®ï¼Œä½†æ²¡æœ‰è®¾ç½®application/jsonç±»å‹ï¼Œå®¢æˆ·ç«¯å¯èƒ½æ— æ³•æ­£ç¡®è§£ææ•°æ®ã€‚\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œæ ¹æ®ä½ ä¼ è¾“çš„æ•°æ®ç±»å‹é€‰æ‹©æ­£ç¡®çš„Content-Typeï¼Œä»¥ç¡®ä¿æ•°æ®èƒ½å¤Ÿè¢«å®¢æˆ·ç«¯æ­£ç¡®å¤„ç†ã€‚\nä»£ç å’Œè§£æï¼š 1 2 reggie: path: D:\\ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 /** * æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ */ @RestController @RequestMapping(\u0026#34;/common\u0026#34;) @Slf4j public class CommonController { @Value(\u0026#34;${reggie.path}\u0026#34;) private String basePath; /** * æ–‡ä»¶ä¸Šä¼  * @param file * @return */ @PostMapping(\u0026#34;/upload\u0026#34;) public R\u0026lt;String\u0026gt; upload(MultipartFile file){ //fileæ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œéœ€è¦è½¬å­˜åˆ°æŒ‡å®šä½ç½®ï¼Œå¦åˆ™æœ¬æ¬¡è¯·æ±‚å®Œæˆåä¸´æ—¶æ–‡ä»¶ä¼šåˆ é™¤ log.info(file.toString()); //åŸå§‹æ–‡ä»¶å String originalFilename = file.getOriginalFilename();//abc.jpg String suffix = originalFilename.substring(originalFilename.lastIndexOf(\u0026#34;.\u0026#34;)); //ä½¿ç”¨UUIDé‡æ–°ç”Ÿæˆæ–‡ä»¶åï¼Œé˜²æ­¢æ–‡ä»¶åç§°é‡å¤é€ æˆæ–‡ä»¶è¦†ç›– String fileName = UUID.randomUUID().toString() + suffix;//dfsdfdfd.jpg //åˆ›å»ºä¸€ä¸ªç›®å½•å¯¹è±¡ File dir = new File(basePath); //åˆ¤æ–­å½“å‰ç›®å½•æ˜¯å¦å­˜åœ¨ if(!dir.exists()){ //ç›®å½•ä¸å­˜åœ¨ï¼Œéœ€è¦åˆ›å»º dir.mkdirs(); } try { //å°†ä¸´æ—¶æ–‡ä»¶è½¬å­˜åˆ°æŒ‡å®šä½ç½® file.transferTo(new File(basePath + fileName)); } catch (IOException e) { e.printStackTrace(); } return R.success(fileName); } /** * æ–‡ä»¶ä¸‹è½½ * @param name * @param response */ @GetMapping(\u0026#34;/download\u0026#34;) public void download(String name, HttpServletResponse response){ try { //è¾“å…¥æµï¼Œé€šè¿‡è¾“å…¥æµè¯»å–æ–‡ä»¶å†…å®¹ FileInputStream fileInputStream = new FileInputStream(new File(basePath + name)); //è¾“å‡ºæµï¼Œé€šè¿‡è¾“å‡ºæµå°†æ–‡ä»¶å†™å›æµè§ˆå™¨ ServletOutputStream outputStream = response.getOutputStream(); response.setContentType(\u0026#34;image/jpeg\u0026#34;); int len = 0; byte[] bytes = new byte[1024]; while ((len = fileInputStream.read(bytes)) != -1){ outputStream.write(bytes,0,len); outputStream.flush(); } //å…³é—­èµ„æº outputStream.close(); fileInputStream.close(); } catch (Exception e) { e.printStackTrace(); } } } è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªSpring Bootæ§åˆ¶å™¨CommonControllerï¼Œå®ƒæä¾›äº†æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½çš„åŠŸèƒ½ã€‚ä¸‹é¢æˆ‘å°†é€è¡Œè§£é‡Šè¿™æ®µä»£ç ï¼š\n@RestControllerï¼š\nè¿™ä¸ªæ³¨è§£è¡¨æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªRESTæ§åˆ¶å™¨ï¼Œæ„å‘³ç€ç±»ä¸­çš„æ–¹æ³•ä¼šè¿”å›æ•°æ®è€Œä¸æ˜¯è§†å›¾ã€‚å®ƒç›¸å½“äº@Controllerå’Œ@ResponseBodyçš„ç»„åˆã€‚ @RequestMapping(\u0026quot;/common\u0026quot;)ï¼š\nè¿™ä¸ªæ³¨è§£ç”¨äºæ˜ å°„Webè¯·æ±‚åˆ°æ§åˆ¶å™¨çš„å¤„ç†æ–¹æ³•ä¸Šã€‚åœ¨è¿™é‡Œï¼Œå®ƒæŒ‡å®šäº†æ‰€æœ‰è¯·æ±‚çš„URLå‰ç¼€ä¸º/commonã€‚ @Slf4jï¼š\nè¿™æ˜¯Lombokåº“æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºè‡ªåŠ¨ä¸ºç±»ç”Ÿæˆä¸€ä¸ªæ—¥å¿—å¯¹è±¡ï¼ˆprivate static final Logger log = LoggerFactory.getLogger(CommonController.class);ï¼‰ã€‚ @Value(\u0026quot;${reggie.path}\u0026quot;)ï¼š\nè¿™ä¸ªæ³¨è§£ç”¨äºä»Spring Bootçš„é…ç½®æ–‡ä»¶ä¸­æ³¨å…¥é…ç½®å€¼ã€‚åœ¨è¿™é‡Œï¼Œå®ƒæ³¨å…¥äº†é…ç½®æ–‡ä»¶ä¸­reggie.pathçš„å€¼ï¼Œé€šå¸¸ç”¨äºæŒ‡å®šæ–‡ä»¶å­˜å‚¨çš„è·¯å¾„ã€‚ private String basePath;ï¼š\nè¿™æ˜¯ä¸€ä¸ªç±»çš„å­—æ®µï¼Œç”¨äºå­˜å‚¨æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ã€‚ @PostMapping(\u0026quot;/upload\u0026quot;)ï¼š\nè¿™ä¸ªæ³¨è§£ç”¨äºæ˜ å°„POSTè¯·æ±‚åˆ°uploadæ–¹æ³•ä¸Šã€‚è¿™æ„å‘³ç€å½“æœ‰POSTè¯·æ±‚å‘é€åˆ°/common/uploadæ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ public R\u0026lt;String\u0026gt; upload(MultipartFile file)ï¼š\nè¿™æ˜¯ä¸€ä¸ªå¤„ç†æ–‡ä»¶ä¸Šä¼ çš„æ–¹æ³•ã€‚å®ƒæ¥å—ä¸€ä¸ªMultipartFileç±»å‹çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ç”±Spring MVCè‡ªåŠ¨è§£æä¸Šä¼ çš„æ–‡ä»¶ã€‚ log.info(file.toString());ï¼š\nä½¿ç”¨æ—¥å¿—è®°å½•å™¨è®°å½•ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯ã€‚ String originalFilename = file.getOriginalFilename();ï¼š\nè·å–ä¸Šä¼ æ–‡ä»¶çš„åŸå§‹æ–‡ä»¶åã€‚ String suffix = originalFilename.substring(originalFilename.lastIndexOf(\u0026quot;.\u0026quot;));ï¼š\nä»åŸå§‹æ–‡ä»¶åä¸­æå–æ–‡ä»¶åç¼€ã€‚ String fileName = UUID.randomUUID().toString() + suffix;ï¼š\nç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶åï¼Œä½¿ç”¨UUIDç¡®ä¿æ–‡ä»¶åå”¯ä¸€ï¼Œé˜²æ­¢æ–‡ä»¶åå†²çªã€‚ File dir = new File(basePath);ï¼š\nåˆ›å»ºä¸€ä¸ªFileå¯¹è±¡ï¼ŒæŒ‡å‘å­˜å‚¨æ–‡ä»¶çš„ç›®å½•ã€‚ if(!dir.exists()){ dir.mkdirs(); }ï¼š\næ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºå®ƒã€‚ file.transferTo(new File(basePath + fileName));ï¼š\nå°†ä¸Šä¼ çš„ä¸´æ—¶æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šçš„å­˜å‚¨è·¯å¾„ã€‚ return R.success(fileName);ï¼š\nè¿”å›ä¸€ä¸ªæˆåŠŸçš„å“åº”ï¼ŒåŒ…å«æ–°ç”Ÿæˆçš„æ–‡ä»¶åã€‚ æ¥ä¸‹æ¥æ˜¯æ–‡ä»¶ä¸‹è½½çš„æ–¹æ³•ï¼š\n@GetMapping(\u0026quot;/download\u0026quot;)ï¼š\nè¿™ä¸ªæ³¨è§£ç”¨äºæ˜ å°„GETè¯·æ±‚åˆ°downloadæ–¹æ³•ä¸Šã€‚è¿™æ„å‘³ç€å½“æœ‰GETè¯·æ±‚å‘é€åˆ°/common/downloadæ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ public void download(String name, HttpServletResponse response)ï¼š\nè¿™æ˜¯ä¸€ä¸ªå¤„ç†æ–‡ä»¶ä¸‹è½½çš„æ–¹æ³•ã€‚å®ƒæ¥å—æ–‡ä»¶åå’ŒHttpServletResponseå¯¹è±¡ä½œä¸ºå‚æ•°ã€‚ FileInputStream fileInputStream = new FileInputStream(new File(basePath + name));ï¼š\nåˆ›å»ºä¸€ä¸ªæ–‡ä»¶è¾“å…¥æµï¼Œç”¨äºè¯»å–è¦ä¸‹è½½çš„æ–‡ä»¶ã€‚ ServletOutputStream outputStream = response.getOutputStream();ï¼š\nè·å–HttpServletResponseçš„è¾“å‡ºæµï¼Œç”¨äºå°†æ–‡ä»¶å†…å®¹å†™å›å®¢æˆ·ç«¯ã€‚ response.setContentType(\u0026quot;image/jpeg\u0026quot;);ï¼š\nè®¾ç½®å“åº”çš„å†…å®¹ç±»å‹ï¼Œè¿™é‡Œå‡è®¾æ–‡ä»¶æ˜¯JPEGå›¾ç‰‡ã€‚ int len = 0; byte[] bytes = new byte[1024];ï¼š\nå®šä¹‰ä¸€ä¸ªç¼“å†²åŒºï¼Œç”¨äºå­˜å‚¨ä»æ–‡ä»¶ä¸­è¯»å–çš„æ•°æ®ã€‚ while ((len = fileInputStream.read(bytes)) != -1){ outputStream.write(bytes,0,len); outputStream.flush(); }ï¼š\nè¯»å–æ–‡ä»¶å†…å®¹ï¼Œå¹¶å†™å…¥åˆ°å“åº”çš„è¾“å‡ºæµä¸­ã€‚ outputStream.close(); fileInputStream.close();ï¼š\nå…³é—­æ‰“å¼€çš„æµèµ„æºã€‚ è¿™ä¸ªæ–¹æ³•é€šè¿‡è¯»å–æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å¹¶å°†å…¶å†™å…¥HTTPå“åº”ï¼Œå…è®¸å®¢æˆ·ç«¯ä¸‹è½½æ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡æœ‰å¤„ç†å¼‚å¸¸ï¼Œå®é™…ä½¿ç”¨æ—¶åº”è¯¥æ·»åŠ é€‚å½“çš„å¼‚å¸¸å¤„ç†é€»è¾‘ã€‚æ­¤å¤–ï¼ŒbasePathåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç›®å½•è·¯å¾„ï¼Œå¹¶ä¸”åœ¨è¿è¡Œåº”ç”¨ç¨‹åºçš„æœåŠ¡å™¨ä¸Šå¯å†™ã€‚\nDTO å®ƒå¯ä»¥è¯´æ˜¯ä¸ºäº†æ›´å¥½çš„æ¥æ”¶å’Œå‘é€æ•°æ®ç­‰ï¼Œå¯¹æœ¬æ¥å·²ç»æœ‰çš„entityç±»è¿›è¡ŒåŠ å¼ºã€‚\næ¥æ”¶DTO ä¾‹å¦‚ï¼š\næœ¬æ¥Dishå°±åªæœ‰è¿™ä¹ˆå¤šå±æ€§ï¼Œä½†æ˜¯ç°åœ¨å‰ç«¯ç»™å®ƒä¼ è¾“çš„ä¸æ­¢è¿™äº›å±æ€§ï¼Œè¿˜æœ‰ä¸€ä¸ªå£å‘³çš„é›†åˆï¼Œå› æ­¤å¦‚æœæƒ³è¦ç”¨@RequestBody Dish dishæ¥å°±æ”¶å‰ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚å°±æ²¡æ³•æ¥æ”¶åˆ°å…¨éƒ¨ä¿¡æ¯äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 /** èœå“ */ @Data public class Dish implements Serializable { private static final long serialVersionUID = 1L; private Long id; private String name; private Long categoryId; private BigDecimal price; private String code; private String image; private String description; private Integer status; private Integer sort; @TableField(fill = FieldFill.INSERT) private LocalDateTime createTime; @TableField(fill = FieldFill.INSERT_UPDATE) private LocalDateTime updateTime; @TableField(fill = FieldFill.INSERT) private Long createUser; @TableField(fill = FieldFill.INSERT_UPDATE) private Long updateUser; } æ­¤æ—¶å¯ä»¥åˆ©ç”¨Dtoç±»ã€‚\nå°†DishDtoç»§æ‰¿Dishç±»ï¼Œå°±æ„å‘³ç€å®ƒé‡Œé¢æœ‰äº†Dishçš„å…¨éƒ¨å±æ€§ã€‚ç°åœ¨åˆå¾€é‡Œé¢æ·»åŠ äº†ä¸€äº›å±æ€§ï¼Œå°±å½¢æˆäº†Dishçš„åŠ å¼ºç±»ï¼Œä¾‹å¦‚ç”¨Listé›†åˆæ¥æ”¶å£å‘³çš„é›†åˆã€‚\n1 2 3 4 5 6 7 8 9 10 @Data public class DishDto extends Dish { //èœå“å¯¹åº”çš„å£å‘³æ•°æ® private List\u0026lt;DishFlavor\u0026gt; flavors = new ArrayList\u0026lt;\u0026gt;(); private String categoryName; private Integer copies; } æ­¤æ—¶å°±å¯ä»¥ç”¨DishDtoç±»è¿›è¡Œæ¥æ”¶ä¿¡æ¯ï¼Œä½†æ˜¯å‘¢å°±ä¸èƒ½è°ƒç”¨MPé»˜è®¤å®ç°çš„æ–¹æ³•äº†ï¼Œéœ€è¦è‡ªå®šä¹‰æ–¹æ³•ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 /** * æ–°å¢èœå“ * @param dishDto * @return */ @PostMapping public R\u0026lt;String\u0026gt; save(@RequestBody DishDto dishDto){ log.info(dishDto.toString()); dishService.saveWithFlavor(dishDto); return R.success(\u0026#34;æ–°å¢èœå“æˆåŠŸ\u0026#34;); } 1 2 3 4 5 6 7 8 9 10 11 public interface DishService extends IService\u0026lt;Dish\u0026gt; { //æ–°å¢èœå“ï¼ŒåŒæ—¶æ’å…¥èœå“å¯¹åº”çš„å£å‘³æ•°æ®ï¼Œéœ€è¦æ“ä½œä¸¤å¼ è¡¨ï¼šdishã€dish_flavor public void saveWithFlavor(DishDto dishDto); //æ ¹æ®idæŸ¥è¯¢èœå“ä¿¡æ¯å’Œå¯¹åº”çš„å£å‘³ä¿¡æ¯ public DishDto getByIdWithFlavor(Long id); //æ›´æ–°èœå“ä¿¡æ¯ï¼ŒåŒæ—¶æ›´æ–°å¯¹åº”çš„å£å‘³ä¿¡æ¯ public void updateWithFlavor(DishDto dishDto); } åˆ©ç”¨å·²ç»çº³å…¥springå®¹å™¨ç®¡ç†çš„DishServiceImplç±»ï¼Œå¯¹è‡ªèº«è¿›è¡Œå¤„ç†ã€‚\nåˆ©ç”¨this.save(dishDto);å°†å…¶ä¸­çš„èœå“çš„å±æ€§ä¿å­˜èµ·æ¥ï¼Œé‚£äº›å¤šå‡ºæ¥çš„å±æ€§å°±ä¸å¤„ç†ã€‚\næ¥ç€å¯¹å…¶å®ƒå±æ€§è¿›è¡Œå¤„ç†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 @Service @Slf4j public class DishServiceImpl extends ServiceImpl\u0026lt;DishMapper,Dish\u0026gt; implements DishService { @Autowired private DishFlavorService dishFlavorService; /** * æ–°å¢èœå“ï¼ŒåŒæ—¶ä¿å­˜å¯¹åº”çš„å£å‘³æ•°æ® * @param dishDto */ @Transactional public void saveWithFlavor(DishDto dishDto) { //ä¿å­˜èœå“çš„åŸºæœ¬ä¿¡æ¯åˆ°èœå“è¡¨dish this.save(dishDto); Long dishId = dishDto.getId();//èœå“id //èœå“å£å‘³ List\u0026lt;DishFlavor\u0026gt; flavors = dishDto.getFlavors(); flavors = flavors.stream().map((item) -\u0026gt; { item.setDishId(dishId); return item; }).collect(Collectors.toList()); //ä¿å­˜èœå“å£å‘³æ•°æ®åˆ°èœå“å£å‘³è¡¨dish_flavor dishFlavorService.saveBatch(flavors); } } å‘é€DTO 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 /** * èœå“ä¿¡æ¯åˆ†é¡µæŸ¥è¯¢ * @param page * @param pageSize * @param name * @return */ @GetMapping(\u0026#34;/page\u0026#34;) public R\u0026lt;Page\u0026gt; page(int page,int pageSize,String name){ //æ„é€ åˆ†é¡µæ„é€ å™¨å¯¹è±¡ã€‚ä¹‹æ‰€ä»¥è¦æœ‰ä¸¤ä¸ªï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨å‰ç«¯éœ€è¦çš„DishDtoï¼ŒåŸå› æ˜¯å®ƒå¹¶æ²¡æœ‰å¯¹åº”çš„å„ç§serviceã€mapperå±‚ã€‚ //é‚£ä¹ˆå˜å…ˆå°†Dishçš„Pageä½œä¸ºæ¡¥æ¢ï¼Œå°†å…¶ä¸­çš„æ•°æ®ç»è¿‡å¤„ç†è½¬å…¥åˆ°DishDtoçš„Pageå¯¹è±¡é‡Œï¼Œæ¥ç€è¿”å›ç»™å‰ç«¯ã€‚ Page\u0026lt;Dish\u0026gt; pageInfo = new Page\u0026lt;\u0026gt;(page,pageSize); Page\u0026lt;DishDto\u0026gt; dishDtoPage = new Page\u0026lt;\u0026gt;(); //æ¡ä»¶æ„é€ å™¨ LambdaQueryWrapper\u0026lt;Dish\u0026gt; queryWrapper = new LambdaQueryWrapper\u0026lt;\u0026gt;(); //æ·»åŠ è¿‡æ»¤æ¡ä»¶ queryWrapper.like(name != null,Dish::getName,name); //æ·»åŠ æ’åºæ¡ä»¶ queryWrapper.orderByDesc(Dish::getUpdateTime); //æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œæ­¤æ—¶æ‰§è¡Œè¿‡äº†pageInfoå°±ä¼šåŒ…å«åˆ†é¡µçš„ç›¸å…³ä¿¡æ¯ dishService.page(pageInfo,queryWrapper); //å¯¹è±¡æ‹·è´ï¼Œåˆ©ç”¨springæ¡†æ¶æä¾›çš„å·¥å…·ç±»ï¼Œå¯¹ç±»ä¹‹é—´æ•°æ®çš„è½¬ç§»è¿›è¡Œä¼ é€’ï¼Œå…ˆå°†è·å–åˆ°çš„åˆ†é¡µåçš„ä¿¡æ¯å¿½ç•¥äº†ï¼Œå› ä¸º //é‚£äº›ä¿¡æ¯è¿˜éœ€è¦ç»è¿‡å¤„ç†æ‰èƒ½è¢«ä½¿ç”¨ï¼Œç­‰å¤„ç†å¥½äº†å†æ”¾è¿›å»ï¼Œè¦ä¸ç„¶é‡æ–°è¦†ç›–å½±å“æ•ˆç‡ã€‚ BeanUtils.copyProperties(pageInfo,dishDtoPage,\u0026#34;records\u0026#34;); //è·å–åˆ†é¡µåçš„å…·ä½“å†…å®¹ä¿¡æ¯ List\u0026lt;Dish\u0026gt; records = pageInfo.getRecords(); //æ­¤å¤„å¯¹äºé›†åˆä¸­æ•°æ®çš„å¤„ç†ï¼Œåˆ©ç”¨äº†streamæµ List\u0026lt;DishDto\u0026gt; list = records.stream().map((item) -\u0026gt; { DishDto dishDto = new DishDto(); BeanUtils.copyProperties(item,dishDto); Long categoryId = item.getCategoryId();//åˆ†ç±»id //æ ¹æ®idæŸ¥è¯¢åˆ†ç±»å¯¹è±¡ Category category = categoryService.getById(categoryId); if(category != null){ String categoryName = category.getName(); dishDto.setCategoryName(categoryName); } return dishDto; }).collect(Collectors.toList()); dishDtoPage.setRecords(list); return R.success(dishDtoPage); } åƒè¿™ä¸ªä¹Ÿæ˜¯åŒç§ç±»å‹çš„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 @GetMapping(\u0026#34;/list\u0026#34;) public R\u0026lt;List\u0026lt;DishDto\u0026gt;\u0026gt; list(Dish dish){ //æ„é€ æŸ¥è¯¢æ¡ä»¶ LambdaQueryWrapper\u0026lt;Dish\u0026gt; queryWrapper = new LambdaQueryWrapper\u0026lt;\u0026gt;(); queryWrapper.eq(dish.getCategoryId() != null ,Dish::getCategoryId,dish.getCategoryId()); //æ·»åŠ æ¡ä»¶ï¼ŒæŸ¥è¯¢çŠ¶æ€ä¸º1ï¼ˆèµ·å”®çŠ¶æ€ï¼‰çš„èœå“ queryWrapper.eq(Dish::getStatus,1); //æ·»åŠ æ’åºæ¡ä»¶ queryWrapper.orderByAsc(Dish::getSort).orderByDesc(Dish::getUpdateTime); List\u0026lt;Dish\u0026gt; list = dishService.list(queryWrapper); List\u0026lt;DishDto\u0026gt; dishDtoList = list.stream().map((item) -\u0026gt; { DishDto dishDto = new DishDto(); BeanUtils.copyProperties(item,dishDto); Long categoryId = item.getCategoryId();//åˆ†ç±»id //æ ¹æ®idæŸ¥è¯¢åˆ†ç±»å¯¹è±¡ Category category = categoryService.getById(categoryId); if(category != null){ String categoryName = category.getName(); dishDto.setCategoryName(categoryName); } //å½“å‰èœå“çš„id Long dishId = item.getId(); LambdaQueryWrapper\u0026lt;DishFlavor\u0026gt; lambdaQueryWrapper = new LambdaQueryWrapper\u0026lt;\u0026gt;(); lambdaQueryWrapper.eq(DishFlavor::getDishId,dishId); //SQL:select * from dish_flavor where dish_id = ? List\u0026lt;DishFlavor\u0026gt; dishFlavorList = dishFlavorService.list(lambdaQueryWrapper); dishDto.setFlavors(dishFlavorList); return dishDto; }).collect(Collectors.toList()); return R.success(dishDtoList); } Serviceå’ŒControllerå±‚ç»å¸¸ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ @RestController @RestController æ˜¯ Spring Framework ä¸­çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºå®šä¹‰ RESTful æ§åˆ¶å™¨ã€‚è¿™ä¸ªæ³¨è§£æ˜¯ @Controller å’Œ @ResponseBody æ³¨è§£çš„ç»„åˆï¼Œå®ƒè¡¨æ˜è¯¥æ§åˆ¶å™¨ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè‡ªåŠ¨å°†è¿”å›å€¼ä½œä¸º HTTP å“åº”çš„æ­£æ–‡ï¼ˆBodyï¼‰ï¼Œå¹¶ä¸”ä¸éœ€è¦è¿”å›è§†å›¾ï¼ˆViewï¼‰ã€‚\nä¸‹é¢æ˜¯ @RestController æ³¨è§£çš„ä¸€äº›å…³é”®ç‚¹ï¼š\næ³¨è§£ç»„åˆï¼š\n@RestController æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå®ƒæœ¬èº«å°±åŒ…å«äº† @Controller å’Œ @ResponseBodyã€‚ @Controller è¡¨ç¤ºè¯¥ç±»æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚ã€‚ @ResponseBody è¡¨ç¤ºè¯¥æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•è¿”å›å€¼å°†ç›´æ¥ä½œä¸º HTTP å“åº”æ­£æ–‡è¿”å›ã€‚ è‡ªåŠ¨åºåˆ—åŒ–ï¼š\nå½“ä½ ä½¿ç”¨ @RestController æ³¨è§£æ—¶ï¼ŒSpring MVC ä¼šè‡ªåŠ¨å°†æ–¹æ³•çš„è¿”å›å€¼åºåˆ—åŒ–ä¸º JSONï¼ˆæˆ–å…¶ä»–æ ¼å¼ï¼Œå–å†³äºé…ç½®çš„æ¶ˆæ¯è½¬æ¢å™¨ï¼‰å¹¶å†™å…¥ HTTP å“åº”æ­£æ–‡ä¸­ã€‚ æ— éœ€è§†å›¾è§£æå™¨ï¼š\nç”±äº @RestController åŒ…å«äº† @ResponseBodyï¼Œæ‰€ä»¥ä¸éœ€è¦ Spring çš„è§†å›¾è§£æå™¨æ¥è§£æè¿”å›å€¼ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥è¿”å›ä»»æ„çš„ Java å¯¹è±¡ï¼Œè€Œä¸éœ€è¦æ‹…å¿ƒå®ƒä»¬å¦‚ä½•è¢«æ¸²æŸ“ä¸º HTMLã€‚ ç®€åŒ–ä»£ç ï¼š\nä½¿ç”¨ @RestController å¯ä»¥ç®€åŒ–ä»£ç ï¼Œå› ä¸ºä½ ä¸éœ€è¦åœ¨æ¯ä¸ªæ–¹æ³•ä¸Šéƒ½æ·»åŠ  @ResponseBody æ³¨è§£ã€‚ RESTful APIï¼š\n@RestController é€šå¸¸ç”¨äºæ„å»º RESTful APIï¼Œå› ä¸ºå®ƒä½¿å¾—è¿”å› JSON æ•°æ®å˜å¾—éå¸¸ç®€å•ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ @RestController æ³¨è§£çš„ç®€å•ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RestController; @RestController public class MyRestController { @GetMapping(\u0026#34;/hello\u0026#34;) public String sayHello() { return \u0026#34;Hello, World!\u0026#34;; } @GetMapping(\u0026#34;/users/{id}\u0026#34;) public User getUserById(@PathVariable Long id) { // å‡è®¾è¿™é‡Œé€šè¿‡ id è·å–ç”¨æˆ·ä¿¡æ¯ return new User(id, \u0026#34;John Doe\u0026#34;); } } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒMyRestController ç±»ä½¿ç”¨äº† @RestController æ³¨è§£ï¼Œæ‰€ä»¥å®ƒçš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè‡ªåŠ¨å°†è¿”å›å€¼ä½œä¸º HTTP å“åº”æ­£æ–‡è¿”å›ã€‚sayHello æ–¹æ³•è¿”å›ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼Œè€Œ getUserById æ–¹æ³•è¿”å›ä¸€ä¸ª User å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°†è¢«è‡ªåŠ¨åºåˆ—åŒ–ä¸º JSON æ ¼å¼ã€‚\nä½¿ç”¨ @RestController æ³¨è§£æ˜¯åˆ›å»º RESTful Web æœåŠ¡æ—¶çš„ä¸€ç§å¸¸è§åšæ³•ï¼Œå®ƒä½¿å¾—æ§åˆ¶å™¨ä»£ç æ›´åŠ ç®€æ´å’Œä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚\n@RequestMapping @RequestMapping æ˜¯ Spring Framework ä¸­çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºå°† HTTP è¯·æ±‚æ˜ å°„åˆ°ç‰¹å®šçš„å¤„ç†æ–¹æ³•ä¸Šã€‚è¿™ä¸ªæ³¨è§£å¯ä»¥ç”¨äºå®šä¹‰è¯·æ±‚çš„ç±»å‹ã€è·¯å¾„ä»¥åŠå…¶ä»–æ˜ å°„ä¿¡æ¯ï¼Œå®ƒè¡¨æ˜äº†æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•å¦‚ä½•å¤„ç†ç‰¹å®šçš„ HTTP è¯·æ±‚ã€‚\nä»¥ä¸‹æ˜¯ @RequestMapping æ³¨è§£çš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼š\nè¯·æ±‚ç±»å‹ï¼š\nå¯ä»¥é€šè¿‡ method å±æ€§æŒ‡å®šè¯·æ±‚çš„ç±»å‹ï¼Œå¦‚ GETã€POSTã€PUTã€DELETE ç­‰ã€‚ è¯·æ±‚è·¯å¾„ï¼š\nå¯ä»¥é€šè¿‡ value æˆ– path å±æ€§æŒ‡å®šè¯·æ±‚çš„è·¯å¾„ã€‚value æ˜¯ path çš„åˆ«åï¼Œä¸¤è€…å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚ å‚æ•°æ¡ä»¶ï¼š\nå¯ä»¥é€šè¿‡ params å±æ€§æŒ‡å®šè¯·æ±‚å‚æ•°çš„æ¡ä»¶ï¼Œåªæœ‰å½“è¿™äº›æ¡ä»¶æ»¡è¶³æ—¶ï¼Œè¯·æ±‚æ‰ä¼šæ˜ å°„åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚ å¤´éƒ¨æ¡ä»¶ï¼š\nå¯ä»¥é€šè¿‡ headers å±æ€§æŒ‡å®šè¯·æ±‚å¤´éƒ¨çš„æ¡ä»¶ã€‚ è¯·æ±‚æ¶ˆè´¹ç±»å‹ï¼š\nå¯ä»¥é€šè¿‡ consumes å±æ€§æŒ‡å®šè¯·æ±‚ä½“å¯ä»¥æ¶ˆè´¹çš„åª’ä½“ç±»å‹ã€‚ è¯·æ±‚äº§ç”Ÿç±»å‹ï¼š\nå¯ä»¥é€šè¿‡ produces å±æ€§æŒ‡å®šå“åº”å¯ä»¥äº§ç”Ÿçš„åª’ä½“ç±»å‹ã€‚ ç»„åˆä½¿ç”¨ï¼š\nå¯ä»¥åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸Šä½¿ç”¨å¤šä¸ª @RequestMapping æ³¨è§£ï¼Œæ¥å¤„ç†ä¸åŒçš„è·¯å¾„æˆ–è¯·æ±‚ç±»å‹ã€‚ ç»§æ‰¿ï¼š\n@RequestMapping æ³¨è§£å¯ä»¥ç»§æ‰¿ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨æ§åˆ¶å™¨ç±»ä¸Šä½¿ç”¨ @RequestMapping æ¥å®šä¹‰ä¸€ä¸ªåŸºç¡€è·¯å¾„ï¼Œç„¶ååœ¨è¯¥ç±»çš„æ–¹æ³•ä¸Šä½¿ç”¨ @RequestMapping æ¥å®šä¹‰ç›¸å¯¹è·¯å¾„ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ @RequestMapping æ³¨è§£çš„ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RequestMethod; import org.springframework.web.bind.annotation.RestController; @RestController public class MyController { // æ˜ å°„ GET è¯·æ±‚åˆ° \u0026#34;/employees\u0026#34; è·¯å¾„ @RequestMapping(value = \u0026#34;/employees\u0026#34;, method = RequestMethod.GET) public List\u0026lt;Employee\u0026gt; getAllEmployees() { // è¿”å›æ‰€æœ‰å‘˜å·¥ä¿¡æ¯ return employeeService.getAllEmployees(); } // æ˜ å°„ POST è¯·æ±‚åˆ° \u0026#34;/employees\u0026#34; è·¯å¾„ @RequestMapping(value = \u0026#34;/employees\u0026#34;, method = RequestMethod.POST) public Employee createEmployee(@RequestBody Employee employee) { // åˆ›å»ºä¸€ä¸ªæ–°çš„å‘˜å·¥ return employeeService.createEmployee(employee); } } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒMyController ç±»ä¸­çš„ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«å¤„ç†ä¸åŒçš„ HTTP è¯·æ±‚ç±»å‹ã€‚getAllEmployees æ–¹æ³•å¤„ç† GET è¯·æ±‚ï¼Œè¿”å›æ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯ï¼›createEmployee æ–¹æ³•å¤„ç† POST è¯·æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å‘˜å·¥è®°å½•ã€‚\nä½¿ç”¨ @RequestMapping æ³¨è§£å¯ä»¥æ¸…æ™°åœ°å®šä¹‰æ§åˆ¶å™¨æ–¹æ³•ä¸ HTTP è¯·æ±‚ä¹‹é—´çš„å…³ç³»ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œæ˜“äºç»´æŠ¤ã€‚\n@Slf4j @Slf4j æ˜¯ Lombok åº“æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºåœ¨ç±»ä¸­è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ—¥å¿—å¯¹è±¡ã€‚å½“ä½ åœ¨ç±»ä¸Šä½¿ç”¨ @Slf4j æ³¨è§£æ—¶ï¼ŒLombok ä¼šåœ¨ç¼–è¯‘æœŸé—´ä¸ºä½ ç”Ÿæˆä¸€ä¸ªæ—¥å¿—å®ä¾‹ï¼Œé€šå¸¸æ˜¯ private static final Logger log = LoggerFactory.getLogger(YourClass.class); è¿™æ ·çš„å½¢å¼ã€‚\nä¸‹é¢æ˜¯ @Slf4j æ³¨è§£çš„ä¸€äº›å…³é”®ç‚¹ï¼š\næ—¥å¿—å®ä¾‹ï¼š\n@Slf4j æ³¨è§£ä¼šè‡ªåŠ¨ä¸ºä½ çš„ç±»åˆ›å»ºä¸€ä¸ªæ—¥å¿—å®ä¾‹ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ç±»çš„æ–¹æ³•ä¸­ä½¿ç”¨è¿™ä¸ªå®ä¾‹æ¥è®°å½•æ—¥å¿—ã€‚ æ— éœ€æ‰‹åŠ¨åˆ›å»ºï¼š\nä½¿ç”¨ @Slf4j æ³¨è§£åï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºæ—¥å¿—å¯¹è±¡ï¼Œè¿™ç®€åŒ–äº†ä»£ç ï¼Œç‰¹åˆ«æ˜¯åœ¨æœ‰è®¸å¤šæ—¥å¿—è®°å½•çš„ç±»ä¸­ã€‚ æ”¯æŒå¤šç§æ—¥å¿—æ¡†æ¶ï¼š\nLombok æ”¯æŒå¤šç§æ—¥å¿—æ¡†æ¶ï¼ŒåŒ…æ‹¬ SLF4Jã€Log4jã€Java Util Logging ç­‰ã€‚@Slf4j æ³¨è§£ç‰¹åˆ«ä¸º SLF4J æ—¥å¿—æ¡†æ¶ç”Ÿæˆæ—¥å¿—å®ä¾‹ã€‚ çº¿ç¨‹å®‰å…¨ï¼š\nè‡ªåŠ¨ç”Ÿæˆçš„æ—¥å¿—å®ä¾‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ æ€§èƒ½ï¼š\nä½¿ç”¨ @Slf4j æ³¨è§£ç”Ÿæˆçš„æ—¥å¿—å®ä¾‹é€šå¸¸æ¯”æ‰‹åŠ¨åˆ›å»ºçš„æ—¥å¿—å®ä¾‹æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒä»¬æ˜¯é€šè¿‡æ³¨è§£åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆçš„ã€‚ çµæ´»æ€§ï¼š\nä½ å¯ä»¥é€‰æ‹©åœ¨ç±»çº§åˆ«ä½¿ç”¨ @Slf4j æ³¨è§£ï¼Œæˆ–è€…åœ¨æ–¹æ³•çº§åˆ«ä½¿ç”¨å…¶ä»– Lombok æ—¥å¿—æ³¨è§£ï¼Œå¦‚ @Logï¼ˆLog4jï¼‰ã€@Loggerï¼ˆJava Util Loggingï¼‰ç­‰ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ @Slf4j æ³¨è§£çš„ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import lombok.extern.slf4j.Slf4j; @Slf4j public class MyClass { public void doSomething() { log.info(\u0026#34;Doing something\u0026#34;); // å¦‚æœå‘ç”Ÿå¼‚å¸¸ try { // ä¸€äº›å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç  } catch (Exception e) { log.error(\u0026#34;Error occurred\u0026#34;, e); } } } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒMyClass ç±»ä½¿ç”¨äº† @Slf4j æ³¨è§£ï¼Œå› æ­¤å®ƒè‡ªåŠ¨è·å¾—äº†ä¸€ä¸ªæ—¥å¿—å®ä¾‹ logã€‚åœ¨ doSomething æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ log æ¥è®°å½•ä¸åŒçº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ã€‚\nä½¿ç”¨ @Slf4j æ³¨è§£å¯ä»¥æ˜¾è‘—å‡å°‘æ ·æ¿ä»£ç ï¼Œè®©ä½ æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æœ‰åŠ©äºä¿æŒä»£ç çš„æ•´æ´å’Œä¸€è‡´æ€§ã€‚\n@Data @Data æ˜¯ Lombok åº“æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºåœ¨ç±»ä¸Šè‡ªåŠ¨ç”Ÿæˆä¸€ç³»åˆ—çš„å¸¸ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š\ngetter å’Œ setter æ–¹æ³•ï¼šä¸ºç±»çš„æ¯ä¸ªå­—æ®µç”Ÿæˆå¯¹åº”çš„è·å–ï¼ˆgetterï¼‰å’Œè®¾ç½®ï¼ˆsetterï¼‰æ–¹æ³•ã€‚\ntoString() æ–¹æ³•ï¼šç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰å­—æ®µå€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼çš„æ–¹æ³•ã€‚\nequals() æ–¹æ³•ï¼šç”Ÿæˆä¸€ä¸ªæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„æ–¹æ³•ï¼Œé€šå¸¸åŸºäºæ‰€æœ‰å­—æ®µçš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚\nhashCode() æ–¹æ³•ï¼šç”Ÿæˆä¸€ä¸ªåŸºäºå¯¹è±¡å­—æ®µå€¼çš„å“ˆå¸Œç è®¡ç®—æ–¹æ³•ã€‚\nä½¿ç”¨ @Data æ³¨è§£å¯ä»¥æ˜¾è‘—å‡å°‘åœ¨ Java ç±»ä¸­ç¼–å†™æ ·æ¿ä»£ç çš„å·¥ä½œé‡ï¼Œè®©ä½ æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ @Data æ³¨è§£çš„ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 import lombok.Data; @Data public class User { private String name; private int age; private String email; // ä½¿ç”¨ @Data æ³¨è§£åï¼Œä»¥ä¸‹æ–¹æ³•å°†è‡ªåŠ¨ç”Ÿæˆï¼š // - name() getter æ–¹æ³• // - setName(String name) setter æ–¹æ³• // - age() getter æ–¹æ³• // - setAge(int age) setter æ–¹æ³• // - email() getter æ–¹æ³• // - setEmail(String email) setter æ–¹æ³• // - User [name=Kimi, age=30, email=kimi@moonshot.cn] toString() æ–¹æ³• // - equals(Object o) æ–¹æ³• // - hashCode() æ–¹æ³• } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒUser ç±»ä½¿ç”¨äº† @Data æ³¨è§£ï¼Œå› æ­¤ Lombok ä¼šåœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ä¸ºè¿™ä¸ªç±»çš„æ¯ä¸ªå­—æ®µç”Ÿæˆ getter å’Œ setter æ–¹æ³•ï¼Œä»¥åŠ toString()ã€equals() å’Œ hashCode() æ–¹æ³•ã€‚\nä½¿ç”¨ @Data æ³¨è§£çš„å¥½å¤„åŒ…æ‹¬ï¼š\nå‡å°‘ä»£ç é‡ï¼šè‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å‡å°‘äº†æ‰‹åŠ¨ç¼–å†™è¿™äº›å¸¸ç”¨æ–¹æ³•çš„éœ€è¦ã€‚ ä¿æŒä¸€è‡´æ€§ï¼šè‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•éµå¾ªä¸€è‡´çš„ç¼–ç é£æ ¼å’Œé€»è¾‘ã€‚ æé«˜æ•ˆç‡ï¼šå‡å°‘äº†ç¼–å†™å’Œç»´æŠ¤æ ·æ¿ä»£ç çš„æ—¶é—´ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚ å‡å°‘é”™è¯¯ï¼šè‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å‡å°‘äº†æ‰‹åŠ¨ç¼–å†™æ–¹æ³•æ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚ è¯·æ³¨æ„ï¼Œä¸ºäº†ä½¿ç”¨ Lombok æ³¨è§£ï¼Œä½ éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥ Lombok åº“ï¼Œå¹¶ç¡®ä¿ä½ çš„ IDE æ”¯æŒ Lombok æ’ä»¶ã€‚è¿™æ ·ï¼Œå½“ä½ ç¼–è¯‘é¡¹ç›®æ—¶ï¼ŒLombok ä¼šåœ¨ç¼–è¯‘æœŸé—´è‡ªåŠ¨ä¸ºä½ ç”Ÿæˆæ‰€æœ‰æ³¨è§£æŒ‡å®šçš„ä»£ç ã€‚\n@RequiredArgsConstructor @RequiredArgsConstructor æ˜¯ Lombok æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œå®ƒç”¨äºåœ¨ç±»ä¸Šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°åŒ…æ‹¬æ‰€æœ‰è¢«æ ‡è®°ä¸º final çš„æˆå‘˜å˜é‡ä»¥åŠç”¨ @NonNull æ³¨è§£æ ‡è®°çš„æˆå‘˜å˜é‡ã€‚è¿™ä¸ªæ³¨è§£å¤§å¤§ç®€åŒ–äº†å¿…é¡»å‚æ•°çš„æ„é€ å‡½æ•°çš„ç¼–å†™ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦æ³¨å…¥ä¾èµ–æˆ–å¸¸é‡å€¼æ—¶ã€‚\nä»¥ä¸‹æ˜¯ @RequiredArgsConstructor æ³¨è§£çš„ä¸€äº›å…³é”®ç‚¹ï¼š\nè‡ªåŠ¨ç”Ÿæˆæ„é€ å‡½æ•°ï¼š\n@RequiredArgsConstructor ä¼šä¸ºç±»ç”Ÿæˆä¸€ä¸ªæ„é€ å‡½æ•°ï¼ŒåŒ…å«æ‰€æœ‰ final å­—æ®µå’Œæ ‡è®°ä¸º @NonNull çš„å­—æ®µä½œä¸ºå‚æ•°ã€‚ å‡å°‘ä»£ç é‡ï¼š\nä½¿ç”¨ @RequiredArgsConstructor å¯ä»¥é¿å…æ‰‹åŠ¨ç¼–å†™æ„é€ å‡½æ•°ï¼Œä»è€Œå‡å°‘ä»£ç é‡ã€‚ å¼ºåˆ¶ä¾èµ–æ³¨å…¥ï¼š\né€šè¿‡ç”Ÿæˆçš„æ„é€ å‡½æ•°ï¼Œå¯ä»¥å®ç°ä¾èµ–çš„è‡ªåŠ¨æ³¨å…¥ï¼Œè¿™å¯¹äº Spring æ¡†æ¶ä¸­çš„ä¾èµ–æ³¨å…¥å°¤ä¸ºé‡è¦ã€‚ æ”¯æŒä¸å˜æ€§ï¼š\nå¯¹äºè¢«æ ‡è®°ä¸º final çš„å­—æ®µï¼Œä¸€æ—¦å®ƒä»¬é€šè¿‡æ„é€ å‡½æ•°è¢«èµ‹å€¼åï¼Œå°±ä¸èƒ½è¢«æ›´æ”¹ï¼Œè¿™æœ‰åŠ©äºåˆ›å»ºæ›´ç¨³å®šã€å¯é¢„æµ‹çš„ä»£ç ã€‚ æ¸…æ™°çš„ä¾èµ–å…³ç³»ï¼š\nè‡ªåŠ¨ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜ç¡®è¦æ±‚å¿…é¡»æä¾›æ‰€æœ‰å¿…éœ€çš„ä¾èµ–ï¼Œè¿™ä½¿å¾—å¼€å‘è€…åœ¨ä½¿ç”¨ç±»çš„æ—¶å€™æ›´åŠ æ¸…æ™°åœ°äº†è§£åˆ°å“ªäº›ä¾èµ–æ˜¯å¿…é¡»çš„ã€‚ ä½¿ç”¨ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 import lombok.RequiredArgsConstructor; import org.springframework.stereotype.Service; @Service @RequiredArgsConstructor public class MyService { private final MyDependency dependency; } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒMyService ç±»ä½¿ç”¨äº† @RequiredArgsConstructor æ³¨è§£ï¼Œå› æ­¤ Lombok ä¼šç”Ÿæˆä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¯¥æ„é€ å‡½æ•°è¦æ±‚å¿…é¡»æä¾› MyDependency çš„ä¸€ä¸ªå®ä¾‹ã€‚è¿™æ ·ï¼ŒSpring å°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ„é€ å‡½æ•°è‡ªåŠ¨æ³¨å…¥ MyDependency çš„å®ä¾‹ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ @RequiredArgsConstructor æ³¨è§£æ—¶ï¼Œéœ€è¦æ³¨å…¥çš„ç±»æˆå‘˜å˜é‡å¿…é¡»è¢«å£°æ˜ä¸º finalï¼Œæˆ–è€…ä½¿ç”¨ @NonNull æ³¨è§£æ ‡è®°ä¸ºéç©ºã€‚è¿™æ ·å¯ä»¥ç¡®ä¿è¿™äº›ä¾èµ–åœ¨ä½¿ç”¨å‰å·²ç»è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚\n@Autowired @Autowired æ˜¯ Spring æ¡†æ¶ä¸­ä½¿ç”¨çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºå®ç°ä¾èµ–æ³¨å…¥ã€‚å½“ä½ åœ¨ä¸€ä¸ªå­—æ®µã€æ„é€ å‡½æ•°ã€è®¾ç½®æ–¹æ³•ï¼ˆsetter methodï¼‰æˆ–è€…æ™®é€šæ–¹æ³•ï¼ˆnon-constructor, non-setter methodï¼‰ä¸Šä½¿ç”¨ @Autowired æ³¨è§£æ—¶ï¼ŒSpring å®¹å™¨åœ¨åˆ›å»º Bean å®ä¾‹æ—¶ä¼šè‡ªåŠ¨æ³¨å…¥ç›¸åº”çš„ä¾èµ–ã€‚\nä»¥ä¸‹æ˜¯ @Autowired æ³¨è§£çš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼š\nè‡ªåŠ¨æ³¨å…¥ï¼š\nSpring ä¼šè‡ªåŠ¨æ³¨å…¥ä¸æ³¨è§£æ ‡è®°çš„å­—æ®µã€æ„é€ å‡½æ•°æˆ–æ–¹æ³•å‚æ•°ç›¸åŒ¹é…çš„ Beanã€‚ æŒ‰ç±»å‹æ³¨å…¥ï¼š\né»˜è®¤æƒ…å†µä¸‹ï¼Œ@Autowired æŒ‰ç…§ç±»å‹ï¼ˆby typeï¼‰è¿›è¡Œæ³¨å…¥ï¼Œè¿™æ„å‘³ç€å¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„ Beanï¼ŒSpring å°†æŠ›å‡ºå¼‚å¸¸ï¼Œé™¤éä½ ä½¿ç”¨ @Qualifier æ³¨è§£æŒ‡å®šå…·ä½“çš„ Bean åç§°ã€‚ æŒ‰åç§°æ³¨å…¥ï¼š\né€šè¿‡ç»“åˆä½¿ç”¨ @Autowired å’Œ @Qualifier æ³¨è§£ï¼Œå¯ä»¥æŒ‰ç…§ Bean çš„åç§°ï¼ˆby nameï¼‰è¿›è¡Œæ³¨å…¥ã€‚ æ„é€ å‡½æ•°æ³¨å…¥ï¼š\nå½“ @Autowired æ³¨è§£ç”¨äºæ„é€ å‡½æ•°æ—¶ï¼ŒSpring å°†ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆconstructor injectionï¼‰çš„æ–¹å¼åˆ›å»º Bean å®ä¾‹ã€‚ è®¾ç½®æ–¹æ³•æ³¨å…¥ï¼š\nå½“ @Autowired æ³¨è§£ç”¨äºè®¾ç½®æ–¹æ³•ï¼ˆå¦‚ setSomething(Something something)ï¼‰æ—¶ï¼ŒSpring å°†è°ƒç”¨è¯¥æ–¹æ³•æ³¨å…¥ä¾èµ–ã€‚ å­—æ®µæ³¨å…¥ï¼š\nå½“ @Autowired æ³¨è§£ç›´æ¥ç”¨äºå­—æ®µæ—¶ï¼ŒSpring å°†ç›´æ¥æ³¨å…¥ä¾èµ–åˆ°è¯¥å­—æ®µã€‚ å¯é€‰ä¾èµ–ï¼š\nå¯ä»¥é€šè¿‡è®¾ç½® @Autowired æ³¨è§£çš„ required å±æ€§ä¸º false æ¥æ ‡è®°æŸä¸ªä¾èµ–æ˜¯å¯é€‰çš„ã€‚å¦‚æœè¯¥ä¾èµ–ä¸å­˜åœ¨ï¼ŒSpring ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ åœ¨æ™®é€šæ–¹æ³•ä¸Šçš„ä½¿ç”¨ï¼š\nä» Spring 4.3 å¼€å§‹ï¼Œ@Autowired ä¹Ÿå¯ä»¥ç”¨äºæ™®é€šæ–¹æ³•ä¸Šï¼Œè¿™å…è®¸æ›´çµæ´»çš„ä¾èµ–æ³¨å…¥æ–¹å¼ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ @Autowired æ³¨è§£çš„ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; @Component public class MyComponent { private final MyDependency myDependency; @Autowired public MyComponent(MyDependency myDependency) { this.myDependency = myDependency; } // æˆ–è€…ä½¿ç”¨è®¾ç½®æ–¹æ³•æ³¨å…¥ @Autowired public void setMyDependency(MyDependency myDependency) { this.myDependency = myDependency; } // æˆ–è€…ç›´æ¥åœ¨å­—æ®µä¸Šä½¿ç”¨ @Autowired private MyDependency myDependency; // ä½¿ç”¨ @Qualifier æŒ‰åç§°æ³¨å…¥ @Autowired private MyDependency myDependency; public void doSomething() { myDependency.doSomething(); } } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒMyComponent ç±»é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥çš„æ–¹å¼æ³¨å…¥äº† MyDependency çš„å®ä¾‹ã€‚å¦‚æœ MyDependency åªæœ‰ä¸€ä¸ª Bean å®šä¹‰ï¼ŒSpring å°†è‡ªåŠ¨æ³¨å…¥è¿™ä¸ª Beanã€‚å¦‚æœæœ‰å¤šä¸ª MyDependency ç±»å‹çš„ Beanï¼Œä½ éœ€è¦ä½¿ç”¨ @Qualifier æ¥æŒ‡å®šæ³¨å…¥å“ªä¸€ä¸ªã€‚\nä½¿ç”¨ @Autowired æ³¨è§£å¯ä»¥æ˜¾è‘—å‡å°‘é…ç½®å·¥ä½œé‡ï¼Œä½¿ä»£ç æ›´ç®€æ´ï¼Œå¹¶ä¸”æœ‰åŠ©äºå®ç°æ¾è€¦åˆå’Œæ›´é«˜çš„æµ‹è¯•æ€§ã€‚\nBeanUtilsç±» BeanUtils æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªå®ç”¨å·¥å…·ç±»ï¼Œä½äº org.springframework.beans åŒ…ä¸­ã€‚å®ƒä¸»è¦ç”¨äºç®€åŒ– JavaBean å¯¹è±¡ä¹‹é—´çš„å±æ€§æ‹·è´å’Œèµ‹å€¼æ“ä½œã€‚ä»¥ä¸‹æ˜¯ BeanUtils ä¸­ä¸€äº›å¸¸ç”¨æ–¹æ³•çš„ä½¿ç”¨æ–¹æ³•å’Œæ¡ˆä¾‹ï¼š\n1. BeanUtils.copyProperties(source, target)\nè¿™ä¸ªæ–¹æ³•ç”¨äºå°†ä¸€ä¸ª JavaBean å¯¹è±¡ï¼ˆsourceï¼‰çš„å±æ€§å€¼å¤åˆ¶åˆ°å¦ä¸€ä¸ª JavaBean å¯¹è±¡ï¼ˆtargetï¼‰ä¸­ã€‚å®ƒä¼šè‡ªåŠ¨åŒ¹é…ä¸¤ä¸ª Bean å¯¹è±¡ä¸­ç›¸åŒåç§°çš„å±æ€§ï¼Œå¹¶å°†æº Bean å¯¹è±¡ä¸­å¯¹åº”å±æ€§çš„å€¼å¤åˆ¶åˆ°ç›®æ ‡ Bean å¯¹è±¡ä¸­ã€‚\nä½¿ç”¨æ–¹æ³•ï¼š\n1 BeanUtils.copyProperties(sourceBean, targetBean); æ¡ˆä¾‹ï¼š å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªç±» User å’Œ UserDtoï¼Œæˆ‘ä»¬æƒ³å°† User å¯¹è±¡çš„å±æ€§å¤åˆ¶åˆ° UserDto å¯¹è±¡ä¸­ï¼š\n1 2 3 4 5 6 User user = new User(); user.setId(1L); user.setName(\u0026#34;John Doe\u0026#34;); UserDto userDto = new UserDto(); BeanUtils.copyProperties(user, userDto); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œuser å¯¹è±¡çš„ id å’Œ name å±æ€§å°†è¢«å¤åˆ¶åˆ° userDto å¯¹è±¡ä¸­ ã€‚\n2. BeanUtils.copyProperties(dest, orig, ignoreProperties)\nè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ copyProperties çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å¿½ç•¥ç‰¹å®šå±æ€§çš„åŠŸèƒ½ã€‚å½“ä½ ä¸æƒ³å¤åˆ¶æŸäº›å±æ€§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚\nä½¿ç”¨æ–¹æ³•ï¼š\n1 BeanUtils.copyProperties(sourceBean, targetBean, \u0026#34;ignoreProperty1\u0026#34;, \u0026#34;ignoreProperty2\u0026#34;); æ¡ˆä¾‹ï¼š å‡è®¾æˆ‘ä»¬ä¸æƒ³å¤åˆ¶ User å¯¹è±¡çš„ password å±æ€§ï¼š\n1 2 3 4 5 6 7 User user = new User(); user.setId(1L); user.setName(\u0026#34;John Doe\u0026#34;); user.setPassword(\u0026#34;secret\u0026#34;); UserDto userDto = new UserDto(); BeanUtils.copyProperties(user, userDto, \u0026#34;password\u0026#34;); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œuser å¯¹è±¡çš„ id å’Œ name å±æ€§å°†è¢«å¤åˆ¶åˆ° userDto å¯¹è±¡ä¸­ï¼Œä½† password å±æ€§å°†è¢«å¿½ç•¥ ã€‚\n3. BeanUtils.copyProperties(dest, orig, Class\u0026lt;?\u0026gt; editable)\nè¿™ä¸ªæ–¹æ³•å…è®¸ä½ æŒ‡å®šä¸€ä¸ªç¼–è¾‘ç±»ï¼Œåªæœ‰åœ¨è¿™ä¸ªç±»ä¸­å®šä¹‰çš„å±æ€§æ‰ä¼šè¢«å¤åˆ¶ã€‚\nä½¿ç”¨æ–¹æ³•ï¼š\n1 BeanUtils.copyProperties(sourceBean, targetBean, SomeInterface.class); æ¡ˆä¾‹ï¼š å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥å£ Auditableï¼Œå®ƒå®šä¹‰äº† createdBy å’Œ createdDate å±æ€§ã€‚æˆ‘ä»¬åªæƒ³å¤åˆ¶å®ç°äº†è¿™ä¸ªæ¥å£çš„ç±»çš„å±æ€§ï¼š\n1 2 3 Auditable auditable = new SomeAuditableImpl(); User user = new User(); BeanUtils.copyProperties(auditable, user, Auditable.class); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰ Auditable æ¥å£ä¸­å®šä¹‰çš„å±æ€§å°†è¢«å¤åˆ¶åˆ° user å¯¹è±¡ä¸­ ã€‚\næ³¨æ„äº‹é¡¹ï¼š\nå±æ€§åç§°å’Œç±»å‹åŒ¹é…ï¼šæºå¯¹è±¡å’Œç›®æ ‡å¯¹è±¡çš„å±æ€§åå¿…é¡»ç›¸åŒï¼Œç±»å‹ä¹Ÿéœ€è¦åŒ¹é…æˆ–å¯ä»¥è‡ªåŠ¨è½¬æ¢ã€‚ æµ…æ‹·è´ï¼šBeanUtils.copyProperties å®ç°çš„æ˜¯æµ…æ‹·è´ï¼Œå³å¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¤åˆ¶çš„æ˜¯å¼•ç”¨è€Œä¸æ˜¯å®é™…çš„å¯¹è±¡ ã€‚ nullå€¼è¦†ç›–ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæºå¯¹è±¡ä¸­çš„ null å€¼å±æ€§ä¼šè¦†ç›–ç›®æ ‡å¯¹è±¡ä¸­å¯¹åº”çš„å±æ€§å€¼ ã€‚ å®‰å…¨æ€§ï¼šä½¿ç”¨åå°„å¯èƒ½ä¼šå¸¦æ¥å®‰å…¨é£é™©ï¼Œéœ€è¦ç¡®ä¿ä»£ç çš„å®‰å…¨æ€§ã€‚ æ€§èƒ½ï¼šåå°„æœºåˆ¶å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸‹ ã€‚ é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œä½ å¯ä»¥çµæ´»åœ°åœ¨ä¸åŒçš„ JavaBean å¯¹è±¡ä¹‹é—´å¤åˆ¶å±æ€§ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚\nMD5ä»¥åŠå…¶å®ƒåŠ å¯†ç®—æ³• åœ¨ç°ä»£å¯†ç å­¦ä¸­ï¼Œæœ‰å¤šç§åŠ å¯†ç®—æ³•è¢«è®¤ä¸ºæ¯”MD5æ›´å®‰å…¨ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„åŠ å¯†ç®—æ³•åŠå…¶ç‰¹ç‚¹ï¼š\nSHA-256ï¼š\nSHA-256ï¼ˆSecure Hash Algorithm 256ï¼‰æ˜¯SHA-2å®¶æ—ä¸­çš„ä¸€ç§åŠ å¯†å“ˆå¸Œå‡½æ•°ã€‚å®ƒç”Ÿæˆä¸€ä¸ª256ä½ï¼ˆ32å­—èŠ‚ï¼‰çš„å“ˆå¸Œå€¼ï¼Œå¯¹è¾“å…¥æ•°æ®è¿›è¡Œå”¯ä¸€çš„å›ºå®šå¤§å°å“ˆå¸Œå€¼æ˜ å°„ã€‚ ç‰¹ç‚¹åŒ…æ‹¬æ•°æ®å®Œæ•´æ€§éªŒè¯ã€å”¯ä¸€æ€§å’Œä¸å¯é€†æ€§ã€‚SHA-256åœ¨åŒºå—é“¾æŠ€æœ¯ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œå¦‚æ¯”ç‰¹å¸åŒºå—é“¾ã€‚ SHA-512ï¼š\nSHA-512æ˜¯SHA-2å®¶æ—ä¸­çš„å¦ä¸€ç§åŠ å¯†å“ˆå¸Œå‡½æ•°ï¼Œå®ƒç”Ÿæˆä¸€ä¸ª512ä½ï¼ˆ64å­—èŠ‚ï¼‰çš„å“ˆå¸Œå€¼ã€‚ å®ƒæ¯”SHA-256æä¾›æ›´é«˜çš„å®‰å…¨æ€§ï¼Œå› ä¸ºå“ˆå¸Œå€¼æ›´é•¿ï¼Œä½†è®¡ç®—é€Ÿåº¦è¾ƒæ…¢ã€‚é€šå¸¸ç”¨äºå­˜å‚¨é«˜åº¦æ•æ„Ÿæ•°æ®çš„åœºæ™¯ã€‚ Argon2ï¼š\nArgon2æ˜¯ä¸€ç§å†…å­˜ç¡¬å“ˆå¸Œå‡½æ•°ï¼Œè®¾è®¡ç”¨äºå¯†ç å“ˆå¸Œï¼Œéœ€è¦å¤§é‡å†…å­˜æ¥è®¡ç®—å“ˆå¸Œå€¼ï¼Œè¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆç”¨äºä¿æŠ¤å¯†ç ã€‚ Argon2åœ¨2015å¹´èµ¢å¾—äº†å¯†ç å“ˆå¸Œç«èµ›ï¼Œè¢«é€‰ä¸ºæ–°çš„å¯†ç å“ˆå¸Œæ ‡å‡†ã€‚å®ƒèƒ½æœ‰æ•ˆæŠµæŠ—æš´åŠ›ç ´è§£æ”»å‡»ã€‚ bcryptï¼š\nbcryptæ˜¯ä¸€ç§ä¸“é—¨è®¾è®¡ç”¨äºå¯†ç å­˜å‚¨çš„å“ˆå¸Œå‡½æ•°ï¼Œå®ƒé€šè¿‡ä½¿ç”¨â€œä»£ä»·å‡½æ•°â€æ¥å¢åŠ ç ´è§£å¯†ç çš„éš¾åº¦ã€‚ bcryptåœ¨å“ˆå¸Œè®¡ç®—è¿‡ç¨‹ä¸­ä½¿ç”¨ç›å€¼ï¼ˆsaltï¼‰å’Œå¤šæ¬¡è¿­ä»£æ¥å¢å¼ºå®‰å…¨æ€§ï¼Œè¢«å¹¿æ³›ç”¨äºä¿æŠ¤ç”¨æˆ·å¯†ç ã€‚ AESï¼ˆAdvanced Encryption Standardï¼‰ï¼š\nAESæ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„å¯¹ç§°åŠ å¯†æ ‡å‡†ï¼Œç”¨äºä¿æŠ¤ç”µå­æ•°æ®çš„å®‰å…¨æ€§ã€‚ AESæ”¯æŒå¤šç§å¯†é’¥é•¿åº¦ï¼ˆ128ã€192ã€256ä½ï¼‰ï¼Œå¹¶ä¸”å› å…¶å¼ºå¤§çš„å®‰å…¨æ€§å’Œè¾ƒé«˜çš„æ•ˆç‡è€Œè¢«è®¸å¤šç»„ç»‡é‡‡ç”¨ã€‚ ECCï¼ˆElliptic-curve cryptographyï¼‰ï¼š\nECCæ˜¯ä¸€ç§åŸºäºæ¤­åœ†æ›²çº¿æ•°å­¦çš„å…¬é’¥åŠ å¯†æŠ€æœ¯ï¼Œå®ƒæä¾›äº†ä¸éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼ˆå¦‚RSAï¼‰ç›¸æ¯”æ›´çŸ­çš„å¯†é’¥é•¿åº¦å’Œæ›´é«˜çš„å®‰å…¨æ€§ã€‚ ECCåœ¨éœ€è¦é«˜æ•ˆå¯†é’¥äº¤æ¢å’Œæ•°å­—ç­¾åçš„åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚ Twofishï¼š\nTwofishæ˜¯ä¸€ç§å¯¹ç§°å¯†é’¥åŠ å¯†ç®—æ³•ï¼Œç”±Bruce Schneierè®¾è®¡ï¼Œç”¨äºæ›¿ä»£Blowfishå’ŒDESã€‚ Twofishä½¿ç”¨128è‡³256ä½çš„å¯†é’¥é•¿åº¦ï¼Œæä¾›äº†å¼ºå¤§çš„å®‰å…¨æ€§å’Œè¾ƒå¿«çš„å¤„ç†é€Ÿåº¦ã€‚ Quantum-resistant algorithmsï¼š\néšç€é‡å­è®¡ç®—çš„å‘å±•ï¼Œä¸€äº›åŠ å¯†ç®—æ³•å¯èƒ½åœ¨æœªæ¥é¢ä¸´å®‰å…¨å¨èƒã€‚ä¸ºäº†åº”å¯¹è¿™ä¸€æŒ‘æˆ˜ï¼ŒNISTï¼ˆç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢ï¼‰å·²ç»é€‰æ‹©äº†ä¸€äº›é‡å­æŠ—æ€§åŠ å¯†ç®—æ³•ï¼Œå¦‚CRYSTALS-Kyberã€CRYSTALS-Dilithiumã€FALCONå’ŒSPHINCS+ã€‚è¿™äº›ç®—æ³•åŸºäºç»“æ„åŒ–æ ¼å’Œå“ˆå¸Œå‡½æ•°ï¼Œæ—¨åœ¨æŠµå¾¡é‡å­è®¡ç®—æœºçš„æ”»å‡»ã€‚ é€‰æ‹©å“ªç§åŠ å¯†ç®—æ³•å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯ã€æ•°æ®æ•æ„Ÿæ€§ã€æ€§èƒ½è¦æ±‚å’Œå®‰å…¨éœ€æ±‚ã€‚å¯¹äºéœ€è¦é«˜å®‰å…¨æ€§çš„åº”ç”¨ï¼Œæ¨èä½¿ç”¨SHA-256ã€SHA-512ã€Argon2æˆ–AESç­‰ç®—æ³•ã€‚å¯¹äºéœ€è¦æŠµå¾¡é‡å­è®¡ç®—æ”»å‡»çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨NISTæ¨èçš„é‡å­æŠ—æ€§åŠ å¯†ç®—æ³•ã€‚\nç§»åŠ¨ç«¯æœ¬åœ°éªŒè¯ç ç”Ÿæˆå’Œç™»å½• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 package com.itheima.reggie.utils; import java.util.Random; /** * éšæœºç”ŸæˆéªŒè¯ç å·¥å…·ç±» */ public class ValidateCodeUtils { /** * éšæœºç”ŸæˆéªŒè¯ç  * @param length é•¿åº¦ä¸º4ä½æˆ–è€…6ä½ * @return */ public static Integer generateValidateCode(int length){ Integer code =null; if(length == 4){ code = new Random().nextInt(9999);//ç”Ÿæˆéšæœºæ•°ï¼Œæœ€å¤§ä¸º9999 if(code \u0026lt; 1000){ code = code + 1000;//ä¿è¯éšæœºæ•°ä¸º4ä½æ•°å­— } }else if(length == 6){ code = new Random().nextInt(999999);//ç”Ÿæˆéšæœºæ•°ï¼Œæœ€å¤§ä¸º999999 if(code \u0026lt; 100000){ code = code + 100000;//ä¿è¯éšæœºæ•°ä¸º6ä½æ•°å­— } }else{ throw new RuntimeException(\u0026#34;åªèƒ½ç”Ÿæˆ4ä½æˆ–6ä½æ•°å­—éªŒè¯ç \u0026#34;); } return code; } /** * éšæœºç”ŸæˆæŒ‡å®šé•¿åº¦å­—ç¬¦ä¸²éªŒè¯ç  * @param length é•¿åº¦ * @return */ public static String generateValidateCode4String(int length){ Random rdm = new Random(); String hash1 = Integer.toHexString(rdm.nextInt()); String capstr = hash1.substring(0, length); return capstr; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 @RestController @RequestMapping(\u0026#34;/user\u0026#34;) @Slf4j public class UserController { @Autowired private UserService userService; /** * å‘é€æ‰‹æœºçŸ­ä¿¡éªŒè¯ç  * @param user * @return */ @PostMapping(\u0026#34;/sendMsg\u0026#34;) public R\u0026lt;String\u0026gt; sendMsg(@RequestBody User user, HttpSession session){ //è·å–æ‰‹æœºå· String phone = user.getPhone(); if(StringUtils.isNotEmpty(phone)){ //ç”Ÿæˆéšæœºçš„4ä½éªŒè¯ç  String code = ValidateCodeUtils.generateValidateCode(4).toString(); log.info(\u0026#34;code={}\u0026#34;,code); //è°ƒç”¨é˜¿é‡Œäº‘æä¾›çš„çŸ­ä¿¡æœåŠ¡APIå®Œæˆå‘é€çŸ­ä¿¡ //SMSUtils.sendMessage(\u0026#34;ç‘å‰å¤–å–\u0026#34;,\u0026#34;\u0026#34;,phone,code); //éœ€è¦å°†ç”Ÿæˆçš„éªŒè¯ç ä¿å­˜åˆ°Session session.setAttribute(phone,code); return R.success(\u0026#34;æ‰‹æœºéªŒè¯ç çŸ­ä¿¡å‘é€æˆåŠŸ\u0026#34;); } return R.error(\u0026#34;çŸ­ä¿¡å‘é€å¤±è´¥\u0026#34;); } /** * ç§»åŠ¨ç«¯ç”¨æˆ·ç™»å½• * @param map * @param session * @return */ @PostMapping(\u0026#34;/login\u0026#34;) public R\u0026lt;User\u0026gt; login(@RequestBody Map map, HttpSession session){ log.info(map.toString()); //è·å–æ‰‹æœºå· String phone = map.get(\u0026#34;phone\u0026#34;).toString(); //è·å–éªŒè¯ç  String code = map.get(\u0026#34;code\u0026#34;).toString(); //ä»Sessionä¸­è·å–ä¿å­˜çš„éªŒè¯ç  Object codeInSession = session.getAttribute(phone); //è¿›è¡ŒéªŒè¯ç çš„æ¯”å¯¹ï¼ˆé¡µé¢æäº¤çš„éªŒè¯ç å’ŒSessionä¸­ä¿å­˜çš„éªŒè¯ç æ¯”å¯¹ï¼‰ if(codeInSession != null \u0026amp;\u0026amp; codeInSession.equals(code)){ //å¦‚æœèƒ½å¤Ÿæ¯”å¯¹æˆåŠŸï¼Œè¯´æ˜ç™»å½•æˆåŠŸ LambdaQueryWrapper\u0026lt;User\u0026gt; queryWrapper = new LambdaQueryWrapper\u0026lt;\u0026gt;(); queryWrapper.eq(User::getPhone,phone); User user = userService.getOne(queryWrapper); if(user == null){ //åˆ¤æ–­å½“å‰æ‰‹æœºå·å¯¹åº”çš„ç”¨æˆ·æ˜¯å¦ä¸ºæ–°ç”¨æˆ·ï¼Œå¦‚æœæ˜¯æ–°ç”¨æˆ·å°±è‡ªåŠ¨å®Œæˆæ³¨å†Œ user = new User(); user.setPhone(phone); user.setStatus(1); userService.save(user); } session.setAttribute(\u0026#34;user\u0026#34;,user.getId()); return R.success(user); } return R.error(\u0026#34;ç™»å½•å¤±è´¥\u0026#34;); } } å…¶å®ƒçš„éƒ½æ˜¯ä¸€äº›é€»è¾‘æ€§çš„ä¸œè¥¿ï¼Œä»¥åŠmå’Œmpçš„çŸ¥è¯†ç‚¹ï¼Œå’Œstreamæµ æˆåŠŸ\n","date":"0001-01-01T00:00:00Z","permalink":"https://gkxgithub.github.io/p/","title":""}]